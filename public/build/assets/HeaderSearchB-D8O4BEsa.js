import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r}from"./index-BH53Isel.js";import{G as Y}from"./Global-ErywZRdd.js";import{C as J}from"./HeaderSearch-7Gr-0bsN.js";import{L as $}from"./Logout-TGKOqZqZ.js";import{X as _}from"./x-DBMwyD6F.js";import{S as k}from"./search-TwiiKGP5.js";import{C as Q}from"./chevron-left-B2s3ZsB7.js";import{C as H}from"./chevron-right-Ckt5D2ka.js";import{C as R,D as K}from"./door-closed-Z4GbcMb-.js";import{A as P}from"./index-CmxRu895.js";import{m as A}from"./proxy-F8AlgMSF.js";import{H as F}from"./house-D_ORqlIe.js";import{S as T}from"./shopping-cart-CZEUxbmv.js";import{U as Z}from"./user-BvYmyGTY.js";import{S as ee}from"./settings-BSPs3Zt8.js";import"./index-yBjzXJbu.js";import"./PaymentModal-Bxx5p2o_.js";import"./index-fNjTmf9T.js";import"./index-Chjiymov.js";import"./CartItemRow-JDzRN0oi.js";import"./Number2Currency-e57Tgsuk.js";import"./tippy-react.esm-BWiGTO87.js";import"./index-rimy3MAc.js";import"./trash-2-DK1wnsDn.js";import"./createLucideIcon-Cy5Ya80P.js";import"./minus-jyhodMPN.js";import"./plus-Bot15Khs.js";import"./main-6DCdASTx.js";import"./___vite-browser-external_commonjs-proxy-0zb4Agf2.js";function te({search:d,setSearch:l,pages:C,items:S,onClose:i}){const[m,M]=r.useState("main"),[h,v]=r.useState(null),[E,w]=r.useState(null),[x,g]=r.useState([]),[p,L]=r.useState("right"),f=r.useRef(null),u=s=>{if(s.preventDefault(),d.trim()){const a=d.trim();window.location.href=`/catalogo?search=${encodeURIComponent(a)}`}return!1},o=s=>{if(s.key==="Enter"&&(s.preventDefault(),d.trim())){const a=d.trim();window.location.href=`/catalogo?search=${encodeURIComponent(a)}`}},c=(s,a="right",y=null)=>{L(a),y&&v(y),setTimeout(()=>{M(s)},50)},b=s=>{w(s.name),g([...x,{level:m,name:"Categorías"}]),c("subcategories","right",s.name)},N=()=>{if(x.length>0){const s=x[x.length-1];c(s.level,"left"),g(x.slice(0,-1))}else m==="subcategories"?c("categories","left"):m==="categories"&&c("main","left")},D=s=>{c("categories","right")},z=()=>"Menú principal",j=()=>{if(m==="main")return e.jsxs("div",{className:"animate-fade animate-duration-300",children:[e.jsxs("button",{className:"p-4 mb-3 w-full flex justify-between items-center hover:bg-gray-50 active:bg-primary transition-all  rounded-xl",onClick:()=>D(),children:[e.jsx("div",{className:"flex items-center",children:e.jsx("span",{className:"font-medium",children:"Categorías"})}),e.jsx(H,{className:"h-5 w-5 customtext-neutral-light"})]}),e.jsx("div",{className:"space-y-2",children:C.map((s,a)=>s.menuable&&e.jsx("a",{href:s.path,className:"p-4 flex justify-between items-center w-full hover:bg-gray-50 active:bg-primary transition-all  rounded-xl",children:e.jsx("span",{className:"font-medium",children:s.name})},a))})]});if(m==="categories")return e.jsx("div",{className:p==="right"?"animate-fade-left animate-duration-300":"animate-fade-right animate-duration-300",children:e.jsx("div",{className:"space-y-2",children:S.map(s=>e.jsxs("div",{className:"p-4  rounded-xl flex justify-between items-center cursor-pointer hover:bg-gray-50 active:bg-primary transition-all",onClick:()=>b(s),children:[e.jsx("span",{className:"font-medium",children:s.name}),e.jsx(H,{className:"h-5 w-5 customtext-neutral-light"})]},s.id))})});if(m==="subcategories"&&h){const s=S.find(a=>a.name===h);return e.jsx("div",{className:p==="right"?"animate-fade-left animate-duration-300":"animate-fade-right animate-duration-300",children:e.jsx("div",{className:"space-y-2",children:s.subcategories.map((a,y)=>e.jsxs("a",{href:`/catalogo?subcategory=${a.slug}`,className:"flex w-full p-4  rounded-xl justify-between items-center hover:bg-gray-50 active:bg-primary transition-all",children:[e.jsx("span",{className:"font-medium",children:a.name}),e.jsx(H,{className:"h-5 w-5 customtext-neutral-light"})]},y))})})}};return r.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[]),r.useEffect(()=>{const s=a=>{a.key==="Escape"&&(d.trim()?l(""):i())};return document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s)}},[d,i,l]),e.jsxs("div",{className:"fixed inset-0 z-50 flex flex-col touch-none overscroll-none",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:i}),e.jsx("div",{className:"relative w-full md:w-[400px] md:mx-auto flex flex-col h-[100dvh]  ",children:e.jsxs("div",{className:"mt-auto bg-white  shadow-xl flex flex-col max-h-[80vh] rounded-t-2xl overflow-hidden",children:[e.jsxs("div",{className:"p-4 bg-white flex justify-between items-center border-b border-gray-200 sticky top-0 z-10",children:[e.jsx("h1",{className:"text-lg font-bold",children:z()}),e.jsx("button",{className:"p-2 rounded-full hover:bg-gray-100",onClick:i,children:e.jsx(_,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"overflow-y-auto flex-1 p-4 overscroll-contain",children:[e.jsx("div",{className:"mb-5",children:e.jsxs("form",{onSubmit:u,role:"search",className:"relative w-full",children:[e.jsx("input",{ref:f,type:"search",name:"search",placeholder:"Buscar productos",value:d,onChange:s=>l(s.target.value),onKeyDown:o,className:"w-full pr-12 py-3 pl-4 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-primary/20 focus:outline-none",enterKeyHint:"search",inputMode:"search",autoComplete:"off",role:"searchbox","aria-label":"Buscar productos"}),e.jsx("button",{type:"submit",className:"absolute right-3 top-1/2 transform -translate-y-1/2 p-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors","aria-label":"Buscar",children:e.jsx(k,{className:"h-4 w-4"})})]})}),m!=="main"&&e.jsxs("button",{onClick:N,className:"flex items-center customtext-primary mb-4 font-medium",children:[e.jsx(Q,{className:"h-5 w-5 mr-1"}),e.jsx("span",{children:m==="categories"?"Categorías":h})]}),e.jsx("div",{className:"pb-16",children:j()})]})]})})]})}const De=({items:d,data:l,cart:C,setCart:S,isUser:i,pages:m,generals:M=[]})=>{const h=M.find(t=>t.correlative==="phone_whatsapp"),v=M.find(t=>t.correlative==="message_whatsapp"),E=(h==null?void 0:h.description)??null,w=(v==null?void 0:v.description)??null,[x,g]=r.useState(!1),[p,L]=r.useState(!1),[f,u]=r.useState(!1),[o,c]=r.useState(""),[b,N]=r.useState(!1),[D,z]=r.useState(!1),j=r.useRef(null),s=r.useRef(null),a=r.useRef(null),y=r.useRef(null),O=C.reduce((t,n)=>Number(t)+Number(n.quantity),0),U=()=>{try{const t=window.location.pathname||"";return["/cart","/checkout"].some(X=>t.includes(X))}catch(t){return console.warn("Error checking path:",t),!1}};r.useEffect(()=>{function t(n){j.current&&!j.current.contains(n.target)&&N(!1),s.current&&!s.current.contains(n.target)&&(o.trim()||u(!1))}return document.addEventListener("mousedown",t),document.addEventListener("touchstart",t),()=>{document.removeEventListener("mousedown",t),document.removeEventListener("touchstart",t)}},[o]),r.useEffect(()=>{const t=()=>{window.scrollY>0?z(!0):z(!1)};return window.addEventListener("scroll",t),()=>window.removeEventListener("scroll",t)},[]),r.useEffect(()=>{const t=n=>{n.key==="Escape"&&f&&(u(!1),c(""))};return f&&document.addEventListener("keydown",t),()=>{document.removeEventListener("keydown",t)}},[f]);const W={hidden:{opacity:0,y:-10,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{type:"spring",stiffness:400,damping:25}},exit:{opacity:0,y:-10,scale:.95,transition:{duration:.15}}},q=[{icon:e.jsx(Z,{size:16}),label:"Mi Perfil",href:"/profile"},{icon:e.jsx(T,{size:16}),label:"Mis Pedidos",href:"/customer/dashboard"},{icon:e.jsx(ee,{size:16}),label:"Configuración",href:"/account"},{icon:e.jsx(K,{size:16}),label:"Cerrar Sesión",onClick:$}],V=t=>{if(t.preventDefault(),o.trim()){const n=o.trim();window.location.href=`/catalogo?search=${encodeURIComponent(n)}`}return!1},G=t=>{if(t.preventDefault(),o.trim()){const n=o.trim();u(!1),window.location.href=`/catalogo?search=${encodeURIComponent(n)}`}return!1},I=t=>{if(t.key==="Enter"&&(t.preventDefault(),o.trim())){const n=o.trim();u(!1),window.location.href=`/catalogo?search=${encodeURIComponent(n)}`}},B=i&&Array.isArray(i.roles)&&i.roles.some(t=>t.name==="Customer");return console.log("isUser:",i),console.log("roles:",i==null?void 0:i.roles),console.log("isCustomer:",B),e.jsxs("header",{className:`w-full top-0 left-0 z-50 transition-all duration-300 ${D?"fixed bg-white shadow-lg":"relative bg-white"}`,children:[e.jsxs("div",{className:"px-primary  bg-white 2xl:px-0 2xl:max-w-7xl mx-auto py-4 font-font-secondary text-base font-semibold",children:[e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsx("a",{href:"/",className:"flex items-center gap-2 z-[51]",children:e.jsx("img",{src:`/assets/resources/logo.png?v=${crypto.randomUUID()}`,alt:Y.APP_NAME,className:"h-14 object-contain object-center",onError:t=>{t.target.onerror=null,t.target.src="/assets/img/logo-bk.svg"}})}),(l==null?void 0:l.showLoginCart)&&e.jsxs("div",{className:"flex gap-8 lg:hidden",children:[e.jsxs("div",{className:`${f?"hidden":"flex"} items-center gap-4`,children:[i?e.jsxs("div",{ref:j,className:"relative",children:[e.jsx("button",{"aria-label":"user",className:"flex items-center gap-2 hover:customtext-primary transition-colors duration-300",onClick:()=>N(!b),children:e.jsx(R,{className:"customtext-primary",width:"1.5rem"})}),e.jsx(P,{children:b&&e.jsx(A.div,{initial:"hidden",animate:"visible",exit:"exit",variants:W,className:"absolute z-50 top-full right-0 bg-white shadow-xl border-t rounded-xl w-48 mt-2",children:e.jsx("div",{className:"p-4",children:e.jsx("ul",{className:"space-y-3",children:B?q.map((t,n)=>e.jsx("li",{children:t.onClick?e.jsxs("button",{"aria-label":"menu-items",onClick:t.onClick,className:"flex w-full items-center gap-3 customtext-neutral-dark text-sm hover:customtext-primary transition-colors duration-300",children:[t.icon,e.jsx("span",{children:t.label})]}):e.jsxs("a",{href:t.href,className:"flex items-center gap-3 customtext-neutral-dark text-sm hover:customtext-primary transition-colors duration-300",children:[t.icon,e.jsx("span",{children:t.label})]})},n)):e.jsxs(e.Fragment,{children:[e.jsx("li",{children:e.jsxs("a",{href:"/admin/home",className:"flex items-center gap-3 customtext-neutral-dark text-sm hover:customtext-primary transition-colors duration-300",children:[e.jsx(F,{size:16}),e.jsx("span",{children:"Dashboard"})]})}),e.jsx("li",{children:e.jsxs("a",{href:"#",onClick:$,className:"flex items-center gap-3 customtext-neutral-dark text-sm hover:customtext-primary transition-colors duration-300",children:[e.jsx(F,{}),e.jsx(K,{size:16}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})})})})})]}):e.jsx("a",{href:"/iniciar-sesion",className:"flex items-center",children:e.jsx(R,{className:"customtext-primary",width:"1.5rem"})}),e.jsxs("button",{"aria-label":"",onClick:()=>g(!0),className:"flex items-center relative",children:[e.jsx(T,{className:"customtext-primary",width:"1.5rem"}),e.jsx("span",{className:"absolute -right-2 -top-2 inline-flex items-center justify-center w-4 h-4 bg-primary text-white rounded-full text-[8px]",children:O})]})]}),e.jsx("button",{"aria-label":"Menú",onClick:()=>L(!p),className:"flex md:hidden items-center justify-center bg-primary rounded-lg w-auto h-auto p-2 text-white fill-white transition-all duration-300 ",children:p?e.jsx(_,{}):e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("path",{d:"M10 5H20",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M4 12H20",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M4 19H14",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})})]}),e.jsx("div",{className:"hidden md:block relative w-full max-w-xl mx-auto",children:e.jsxs("form",{onSubmit:V,role:"search",children:[e.jsx("input",{ref:y,type:"search",name:"search",placeholder:"Buscar productos",value:o,onChange:t=>c(t.target.value),onKeyDown:I,className:"w-full pr-14 py-4 pl-4 border rounded-full focus:ring-0 focus:outline-none",enterKeyHint:"search",inputMode:"search",autoComplete:"off",role:"searchbox","aria-label":"Buscar productos"}),e.jsx("button",{type:"submit",className:"absolute right-3 top-1/2 transform -translate-y-1/2 p-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors","aria-label":"Buscar",children:e.jsx(k,{})})]})}),l!=null&&l.showLoginCart?e.jsxs("div",{className:"hidden md:flex items-center gap-4 relative text-sm",children:[e.jsxs("div",{ref:j,children:[i?e.jsxs("button",{"aria-label":"user",className:"customtext-neutral-dark flex items-center gap-2 hover:customtext-primary pr-6 transition-colors duration-300",onClick:()=>N(!b),children:[e.jsx(R,{className:"customtext-primary"}),e.jsx("span",{className:"hidden md:inline",children:i.name})]}):e.jsxs("a",{href:"/iniciar-sesion",className:"flex items-center gap-2 text-sm hover:customtext-primary transition-colors duration-300",children:[e.jsx(R,{className:"customtext-primary"}),e.jsx("span",{className:"hidden md:inline",children:"Iniciar Sesión"})]}),e.jsx(P,{children:b&&e.jsx(A.div,{initial:"hidden",animate:"visible",exit:"exit",variants:W,className:"absolute z-50 top-full left-0 bg-white shadow-xl border-t rounded-xl w-48 mt-2",children:e.jsx("div",{className:"p-4",children:e.jsx("ul",{className:"space-y-3",children:B?q.map((t,n)=>e.jsx("li",{children:t.onClick?e.jsxs("button",{"aria-label":"menu-items",onClick:t.onClick,className:"flex w-full items-center gap-3 customtext-neutral-dark text-sm hover:customtext-primary transition-colors duration-300",children:[t.icon,e.jsx("span",{children:t.label})]}):e.jsxs("a",{href:t.href,className:"flex items-center gap-3 customtext-neutral-dark text-sm hover:customtext-primary transition-colors duration-300",children:[t.icon,e.jsx("span",{children:t.label})]})},n)):e.jsxs(e.Fragment,{children:[e.jsx("li",{children:e.jsxs("a",{href:"/admin/home",className:"flex items-center gap-3 customtext-neutral-dark text-sm hover:customtext-primary transition-colors duration-300",children:[e.jsx(F,{size:16}),e.jsx("span",{children:"Dashboard"})]})}),e.jsx("li",{children:e.jsxs("a",{href:"#",onClick:$,className:"flex items-center gap-3 customtext-neutral-dark text-sm hover:customtext-primary transition-colors duration-300",children:[e.jsx(K,{size:16}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})})})})})]}),e.jsxs("button",{"aria-label":"cart",onClick:()=>g(!0),className:"flex items-center gap-2 text-sm relative hover:customtext-primary transition-colors duration-300",children:[e.jsx("div",{className:"customtext-primary",children:e.jsx(T,{})}),e.jsx("span",{className:"hidden md:inline",children:"Mi Carrito"}),e.jsx("span",{className:"absolute -right-6 -top-2 inline-flex items-center justify-center w-5 h-5 text-xs bg-primary text-white rounded-full",children:O})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("a",{"aria-label":"primary-button",className:"hidden lg:block px-4 py-3 bg-primary text-white rounded-full hover:brightness-125 transition-colors duration-300",target:"_blank",rel:"noopener noreferrer",href:E&&w?`https://api.whatsapp.com/send?phone=${encodeURIComponent(E)}&text=${encodeURIComponent(w)}`:"#",children:"Haz tu Pedido"}),e.jsx("div",{className:"md:hidden relative w-full max-w-xl mx-auto",children:f?e.jsx("div",{className:"relative w-full",children:e.jsxs("form",{onSubmit:G,role:"search",children:[e.jsx("input",{ref:a,type:"search",name:"search",placeholder:"Buscar productos",value:o,onChange:t=>c(t.target.value),onKeyDown:I,className:"w-full pr-14 py-4 pl-4 border rounded-full focus:ring-0 focus:outline-none",autoFocus:!0,enterKeyHint:"search",inputMode:"search",autoComplete:"off",role:"searchbox","aria-label":"Buscar productos",onBlur:()=>{setTimeout(()=>{o.trim()||u(!1)},200)}}),e.jsxs("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>{c(""),u(!1)},className:"p-2 bg-gray-200 text-gray-600 rounded-lg hover:bg-gray-300 transition-colors","aria-label":"Cerrar búsqueda",children:e.jsx(_,{size:16})}),e.jsx("button",{type:"submit",className:"p-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors","aria-label":"Buscar",children:e.jsx(k,{size:16})})]})]})}):e.jsx("button",{"aria-label":"Buscar productos",onClick:()=>{u(!0),setTimeout(()=>{a.current&&a.current.focus()},100)},className:"flex items-center justify-end w-full px-0 py-3",children:e.jsx(k,{className:"customtext-primary",size:28})})})]})]}),(l==null?void 0:l.mobileSearch)&&!U()&&e.jsx("div",{className:"block md:hidden mt-6 space-y-4",children:e.jsx("div",{className:"w-full ",children:e.jsxs("form",{onSubmit:G,role:"search",className:"relative w-full",children:[e.jsx("input",{type:"search",name:"search",placeholder:"Buscar productos...",value:o,onChange:t=>c(t.target.value),onKeyDown:I,className:"w-full pr-14 py-3 font-normal pl-4 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary focus:border-transparent focus:outline-none bg-gray-50",enterKeyHint:"search",inputMode:"search",autoComplete:"off",role:"searchbox","aria-label":"Buscar productos"}),e.jsx("button",{type:"submit",className:"absolute right-2 top-1/2 transform -translate-y-1/2 p-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors","aria-label":"Buscar",children:e.jsx(k,{size:18})})]})})})]}),e.jsx(P,{children:p&&e.jsx(A.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2},className:"lg:hidden bg-transparent text-textWhite shadow-lg w-full min-h-screen absolute z-10 top-20",children:e.jsx(te,{search:o,setSearch:c,pages:m,items:d,onClose:()=>L(!p)})})}),e.jsx(J,{data:l,cart:C,setCart:S,modalOpen:x,setModalOpen:g}),e.jsx("div",{className:"flex justify-end w-full mx-auto z-[100] relative",children:e.jsx("div",{className:"hidden lg:block fixed bottom-6 sm:bottom-[2rem] lg:bottom-[4rem] z-20 cursor-pointer",children:e.jsx("a",{target:"_blank",id:"whatsapp-toggle",href:`https://api.whatsapp.com/send?phone=${E}&text=${w}`,children:e.jsx("img",{src:"/assets/img/whatsapp.svg",alt:"whatsapp",className:"mr-3 w-16 h-16 md:w-[80px] md:h-[80px] animate-bounce duration-300"})})})})]})};export{De as default};
