import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as d}from"./index-BH53Isel.js";import{A as j}from"./AuthClientRest-CPsUCK_j.js";import{S as p}from"./ProductCard-Ap6bpF1Q.js";import{m as s}from"./proxy-BTYtmp9V.js";import{C}from"./chevron-left-B2s3ZsB7.js";import{S as g}from"./square-pen-BjxMGjQc.js";import{A as b}from"./index-CFtDjG4d.js";import{E as z}from"./eye-CKCH9ORv.js";import{T as E}from"./trash-2-DK1wnsDn.js";import{X as S}from"./x-DBMwyD6F.js";import{C as v}from"./circle-check-big-D6DM3vPb.js";import{C as w}from"./clock-BTrEpQej.js";import{c as k}from"./createLucideIcon-Cy5Ya80P.js";import"./index-yBjzXJbu.js";import"./main-BvVILmTO.js";import"./___vite-browser-external_commonjs-proxy-0zb4Agf2.js";import"./index-CMHsc23u.js";import"./index-rimy3MAc.js";import"./index-fNjTmf9T.js";import"./Global-ErywZRdd.js";/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=k("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),l={container:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,when:"beforeChildren"}}},item:{hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:100,damping:10}},hover:{y:-5,scale:1.03,boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1)",transition:{duration:.2}}},modal:{overlay:{hidden:{opacity:0},visible:{opacity:1},exit:{opacity:0}},content:{hidden:{scale:.9,opacity:0},visible:{scale:1,opacity:1,transition:{type:"spring",damping:25}},exit:{scale:.9,opacity:0}}},button:{hover:{x:-3},tap:{scale:.95}},title:{hidden:{x:-20,opacity:0},visible:{x:0,opacity:1,transition:{duration:.5}}}},T=({proyecto:t,onEdit:n,onView:o,onDelete:u})=>{const[m,x]=d.useState(!1),i=["completed","exported","ordered"].includes(t.status),c=t.status==="draft",h=()=>{switch(t.status){case"completed":case"exported":case"ordered":return e.jsx(v,{className:"text-green-500",size:16});case"draft":return e.jsx(w,{className:"text-yellow-500",size:16});default:return e.jsx(P,{className:"text-gray-500",size:16})}},f=()=>{switch(t.status){case"completed":return"Completado";case"exported":return"Exportado";case"ordered":return"Pedido realizado";case"draft":return"Borrador";default:return"Desconocido"}};return e.jsxs(s.div,{className:"bg-white rounded-3xl overflow-hidden shadow-sm hover:shadow-2xl transition-all cursor-pointer relative",variants:l.item,whileHover:{scale:1.02,boxShadow:"0px 8px 16px rgba(0, 0, 0, 0.2)",transition:{duration:.3}},whileTap:{scale:.98},onHoverStart:()=>x(!0),onHoverEnd:()=>x(!1),children:[e.jsx("div",{className:"absolute top-2 left-2 z-10 flex gap-1",children:e.jsxs(s.span,{className:`text-xs px-2 py-1 rounded-full flex items-center gap-1 font-medium ${i?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,initial:{scale:0},animate:{scale:1},children:[h(),f()]})}),e.jsxs("div",{className:"aspect-square bg-gray-100 relative overflow-hidden",children:[e.jsx(s.img,{src:t.thumbnail||"/assets/img/backgrounds/resources/default-image.png",alt:t.name||"Proyecto sin título",className:"w-full h-full object-cover",initial:{scale:1},animate:{scale:m?1.05:1},transition:{duration:.3},onError:r=>r.target.src="/assets/img/backgrounds/resources/default-image.png"}),e.jsx(b,{children:m&&e.jsxs(s.div,{className:"absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center gap-2",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[e.jsx(s.button,{onClick:r=>{r.stopPropagation(),o(t)},className:"bg-white text-gray-700 rounded-full p-3 shadow-lg hover:bg-gray-50",whileHover:{scale:1.1},whileTap:{scale:.9},title:"Ver proyecto",children:e.jsx(z,{size:20})}),c&&e.jsx(s.button,{onClick:r=>{r.stopPropagation(),n(t)},className:"bg-blue-500 text-white rounded-full p-3 shadow-lg hover:bg-blue-600",whileHover:{scale:1.1},whileTap:{scale:.9},title:"Editar proyecto",children:e.jsx(g,{size:20})}),c&&e.jsx(s.button,{onClick:r=>{r.stopPropagation(),u(t)},className:"bg-red-500 text-white rounded-full p-3 shadow-lg hover:bg-red-600",whileHover:{scale:1.1},whileTap:{scale:.9},title:"Eliminar proyecto",children:e.jsx(E,{size:20})})]})})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-1 line-clamp-1",children:t.name||"Proyecto sin título"}),e.jsx("p",{className:"text-gray-500 text-sm line-clamp-2 mb-2",children:t.description||"Sin descripción"}),e.jsxs("div",{className:"flex justify-between items-center text-xs text-gray-400",children:[e.jsxs("span",{children:["Creado: ",new Date(t.created_at).toLocaleDateString()]}),e.jsxs("span",{children:["Modificado: ",new Date(t.updated_at).toLocaleDateString()]})]})]})]})},H=({proyecto:t,onClose:n})=>{if(!t)return null;const o=["completed","exported","ordered"].includes(t.status);return e.jsx(s.div,{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",variants:l.modal.overlay,initial:"hidden",animate:"visible",exit:"exit",children:e.jsxs(s.div,{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",variants:l.modal.content,children:[e.jsxs("div",{className:"sticky top-0 bg-white p-4 border-b flex justify-between items-center z-10",children:[e.jsx("h2",{className:"text-xl font-bold",children:t.name||"Proyecto sin título"}),e.jsx(s.button,{className:"p-2 rounded-full hover:bg-gray-100",onClick:n,whileHover:{rotate:90,scale:1.1},whileTap:{scale:.9},children:e.jsx(S,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"bg-gray-100 rounded-lg overflow-hidden aspect-square",children:e.jsx("img",{src:t.thumbnail||"/assets/img/backgrounds/resources/default-image.png",alt:t.name||"Proyecto sin título",className:"w-full h-full object-cover"})})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-600 mb-1",children:"Descripción"}),e.jsx("p",{className:"text-gray-800",children:t.description||"Sin descripción"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-600 mb-1",children:"Estado"}),e.jsxs("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm ${o?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:[o?e.jsx(v,{size:14}):e.jsx(w,{size:14}),t.status==="draft"?"Borrador":t.status==="completed"?"Completado":t.status==="exported"?"Exportado":t.status==="ordered"?"Pedido realizado":"Desconocido"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-600 mb-1",children:"Fecha de creación"}),e.jsx("p",{className:"text-gray-800",children:new Date(t.created_at).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-600 mb-1",children:"Última modificación"}),e.jsx("p",{className:"text-gray-800",children:new Date(t.updated_at).toLocaleDateString()})]})]}),e.jsxs("div",{className:"space-y-3 pt-4",children:[!o&&e.jsxs(s.a,{href:`/canva2?project=${t.id}`,className:"w-full bg-blue-500 text-white py-3 rounded-lg font-medium flex items-center justify-center gap-2 hover:bg-blue-600",whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx(g,{size:18}),"Continuar editando"]}),e.jsx(s.button,{onClick:n,className:"w-full border border-gray-300 text-gray-700 py-3 rounded-lg font-medium hover:bg-gray-50",whileHover:{scale:1.02},whileTap:{scale:.98},children:"Cerrar"})]})]})]})})]})})};function te(){const[t,n]=d.useState([]),[o,u]=d.useState(!0),[m,x]=d.useState(null),[i,c]=d.useState("todos");d.useEffect(()=>{h()},[]);const h=async()=>{try{u(!0);const a=await j.get("/api/customer/projects");a.status===200&&n(a.data||[])}catch(a){console.error("Error al cargar proyectos:",a),p.fire({icon:"error",title:"Error",text:"No se pudieron cargar los proyectos"})}finally{u(!1)}},f=a=>{window.location.href=`/canva2?project=${a.id}`},r=a=>{x(a)},N=async a=>{if((await p.fire({title:"¿Estás seguro?",text:"Esta acción no se puede deshacer",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"})).isConfirmed)try{await j.delete(`/api/customer/projects/${a.id}`),await h(),p.fire("¡Eliminado!","El proyecto ha sido eliminado.","success")}catch{p.fire("Error","No se pudo eliminar el proyecto","error")}},y=t.filter(a=>i==="todos"?!0:i==="finalizado"?["completed","exported","ordered"].includes(a.status):i==="en_progreso"?a.status==="draft":!0);return o?e.jsx("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})})}):e.jsxs(s.div,{className:"container mx-auto px-4 py-8 max-w-7xl font-paragraph",initial:"hidden",animate:"visible",variants:l.container,children:[e.jsx("div",{className:"flex justify-between items-center mb-8",children:e.jsxs(s.a,{href:"/",className:"flex items-center customtext-primary",variants:l.button,whileHover:"hover",whileTap:"tap",children:[e.jsx(C,{className:"h-5 w-5"}),e.jsx("span",{className:"ml-1",children:"Regresar"})]})}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4",children:[e.jsx(s.h1,{className:"text-3xl md:text-4xl font-bold",variants:l.title,children:"Mis Proyectos"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(s.button,{onClick:()=>c("todos"),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${i==="todos"?"bg-blue-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,whileHover:{scale:1.05},whileTap:{scale:.95},children:["Todos (",t.length,")"]}),e.jsxs(s.button,{onClick:()=>c("en_progreso"),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${i==="en_progreso"?"bg-yellow-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,whileHover:{scale:1.05},whileTap:{scale:.95},children:["En progreso (",t.filter(a=>a.status==="draft").length,")"]}),e.jsxs(s.button,{onClick:()=>c("finalizado"),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${i==="finalizado"?"bg-green-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,whileHover:{scale:1.05},whileTap:{scale:.95},children:["Finalizados (",t.filter(a=>["completed","exported","ordered"].includes(a.status)).length,")"]})]})]}),e.jsx("div",{className:"mb-8",children:e.jsxs(s.a,{href:"/canva1",className:"inline-flex items-center gap-2 bg-blue-500 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-600",whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx(g,{size:18}),"Crear nuevo proyecto"]})}),y.length===0?e.jsxs(s.div,{className:"text-center py-16",initial:{opacity:0},animate:{opacity:1},children:[e.jsx("h3",{className:"text-xl font-medium text-gray-600 mb-2",children:i==="todos"?"No tienes proyectos aún":`No tienes proyectos ${i==="finalizado"?"finalizados":"en progreso"}`}),e.jsx("p",{className:"text-gray-500 mb-6",children:i==="todos"?"Comienza creando tu primer proyecto":"Cambia el filtro para ver otros proyectos"}),i==="todos"&&e.jsxs(s.a,{href:"/canva1",className:"inline-flex items-center gap-2 bg-blue-500 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-600",whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx(g,{size:18}),"Crear mi primer proyecto"]})]}):e.jsx(s.div,{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",variants:l.container,children:e.jsx(b,{children:y.map(a=>e.jsx(s.div,{variants:l.item,layoutId:`project-${a.id}`,children:e.jsx(T,{proyecto:a,onEdit:f,onView:r,onDelete:N})},a.id))})}),e.jsx(b,{children:m&&e.jsx(H,{proyecto:m,onClose:()=>x(null)})})]})}export{te as default};
