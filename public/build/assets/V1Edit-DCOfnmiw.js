import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as x}from"./index-BH53Isel.js";import"./EditorLayout-CkCvwqGw.js";import"./thumbnailGenerator-B4goYG9Y.js";import"./index-BZYhE2TF.js";import"./TextElement-_pvTHO57.js";import{R as X}from"./PaymentModal-BB1JXzaZ.js";import{H as fe}from"./jspdf.es.min-D3plwuQr.js";import{X as Q}from"./x-DBMwyD6F.js";import{C as be}from"./chevron-left-B2s3ZsB7.js";import{C as xe}from"./chevron-right-Ckt5D2ka.js";import"./index-yBjzXJbu.js";import"./index-rimy3MAc.js";import"./index-fNjTmf9T.js";import"./index-Chjiymov.js";import"./preload-helper-BfFHrpNk.js";import"./typeof-QjJsDpFa.js";import"./createLucideIcon-Cy5Ya80P.js";const q={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",padding:"0",border:"none",background:"none",overflow:"visible"},overlay:{backgroundColor:"rgba(0, 0, 0, 0.8)",zIndex:1e3}},ye=`
    .stf__wrapper {
        margin: 0 !important;
        padding: 0 !important;
    }
    .stf__block {
        margin: 0 !important;
        padding: 0 !important;
    }
    .stf__page {
        margin: 0 !important;
        padding: 0 !important;
        box-shadow: 0 4px 8px rgba(0,0,0,0.15) !important;
    }
    .page-container img {
        display: block;
        margin: 0;
        padding: 0;
        border: none;
        outline: none;
        image-rendering: -webkit-optimize-contrast !important;
        image-rendering: high-quality !important;
        -webkit-backface-visibility: hidden !important;
        backface-visibility: hidden !important;
        -webkit-transform: translateZ(0) !important;
        transform: translateZ(0) !important;
        -ms-interpolation-mode: bicubic !important;
    }
    .page-container {
        -webkit-font-smoothing: subpixel-antialiased !important;
        -moz-osx-font-smoothing: auto !important;
    }
`;X.setAppElement("#app");const Je=({isOpen:l,onRequestClose:y,pages:c,pageThumbnails:j={},addAlbumToCart:I,workspaceDimensions:w={width:800,height:600},layouts:D=[],presetData:R=null,projectData:m=null,itemData:o=null,contentType:S={type:"album",name:"Ãlbum",description:"Vista de Ãlbum",icon:"ðŸ“–"},categorizedPages:ve={cover:[],content:[],final:[]},albumLoadingState:C={isLoading:!1,loadedImages:0,totalImages:0,message:""}})=>{var te;const[z,re]=x.useState(0),[L,Ne]=x.useState(!1),[H,Pe]=x.useState(!1),[oe,$]=x.useState({}),[ie,ee]=x.useState(!1),[je,ne]=x.useState(!1),[ke,Ie]=x.useState(!1),[Ce,Te]=x.useState(0),[A,E]=x.useState({isOpen:!1,message:"Iniciando proceso...",subMessage:"Estamos preparando tu Ã¡lbum",progress:0}),B=x.useRef();function le(s,r,a,t,i,g){const n=r.width,u=r.height,h=i/g,f=n/u;let b=0,k=0,p=n,d=u;h>f?(d=n/h,k=(u-d)/2):(p=u*h,b=(n-p)/2),s.drawImage(r,b,k,p,d,a,t,i,g)}function de(s){const r=s.match(/grid-cols-(\d+)/),a=s.match(/grid-rows-(\d+)/),t=s.match(/gap-(\d+)/);return{cols:r?parseInt(r[1],10):1,rows:a?parseInt(a[1],10):1,gap:t?parseInt(t[1],10)*4:0}}function se(s,r,a=1){const t=s&&s.match(new RegExp(`${r}-span-(\\d+)`));return t?parseInt(t[1],10):a}function ce(s,r,a){const{cols:t,rows:i,gap:g}=de(s.template),n=s.style&&s.style.padding?parseInt(s.style.padding):0,u=r.width-2*n,h=r.height-2*n,f=(u-g*(t-1))/t,b=(h-g*(i-1))/i,k=Array.from({length:i},()=>Array(t).fill(!1)),p={};for(let d=0;d<s.cells;d++){const O=s.cellStyles&&s.cellStyles[d]?s.cellStyles[d]:"",T=se(O,"col",1),F=se(O,"row",1);let U=!1;for(let N=0;N<=i-F&&!U;N++)for(let M=0;M<=t-T&&!U;M++){let J=!0;for(let P=N;P<N+F;P++){for(let _=M;_<M+T;_++)if(k[P][_]){J=!1;break}if(!J)break}if(J){for(let _=N;_<N+F;_++)for(let Y=M;Y<M+T;Y++)k[_][Y]=!0;const P=a&&a[d]?a[d].id:d;p[P]={x:n+M*(f+g),y:n+N*(b+g),width:f*T+g*(T-1),height:b*F+g*(F-1)},console.log(`[GRID-PLACEMENT] cellId:${P} col-span:${T} row-span:${F} => x:${p[P].x} y:${p[P].y} w:${p[P].width} h:${p[P].height}`),U=!0}}if(!U){const N=a&&a[d]?a[d].id:d;console.warn(`[GRID-PLACEMENT] No se pudo ubicar la celda ${N}`),p[N]={x:0,y:0,width:f,height:b}}}return p}x.useCallback(async()=>{if(!c||c.length===0||!l)return;console.log("ðŸš€ Iniciando generaciÃ³n de thumbnails para BookPreview..."),ee(!0),$({});const s={},r=4,a=(n,u,h,f)=>{if(!u||!u.image)return;const b=new Image;b.src=u.image,b.onload=()=>{const k=h.x+u.x*f,p=h.y+u.y*f,d=u.width*f,O=u.height*f;le(n,b,k,p,d,O)}},t=async(n,u)=>{const h=document.createElement("canvas"),f=h.getContext("2d");if(h.width=w.width*r,h.height=w.height*r,R&&R.final_layer_image){const d=new Image;d.src=R.final_layer_image,d.onload=()=>{f.drawImage(d,0,0,h.width,h.height)}}const b=D.find(d=>d.id===n.layoutId);if(!b)return;const k=ce(b,w,n.cells);n.cells.forEach(d=>{const O=k[d.id];O&&d.elements.forEach(T=>{a(f,T,O,r)})});const p=h.toDataURL("image/jpeg",.9);return{[n.id]:p}},i=c.map((n,u)=>t(n)),g=await Promise.all(i);console.log("ðŸ–¼ï¸ [THUMBNAIL-GEN] Thumbnails generados:",{totalThumbnails:g.length,thumbnailKeys:g.map(n=>Object.keys(n)).flat(),pageIds:c.map(n=>n.id),pageTypes:c.map(n=>n.type)}),g.forEach(n=>{Object.assign(s,n)}),console.log("ðŸ–¼ï¸ [THUMBNAIL-GEN] newThumbnails final:",{keys:Object.keys(s),hasAllPages:c.every(n=>s[n.id])}),$(s),ee(!1)},[c,l,w,D,R]);const ge=()=>{var a,t;const s=c.map((i,g)=>({id:i.id||`page-${g}`,index:g})),r={...w,originalWidth:w.originalWidth||((a=o==null?void 0:o.dimensions)!=null&&a.width?parseFloat(o.dimensions.width):297),originalHeight:w.originalHeight||((t=o==null?void 0:o.dimensions)!=null&&t.height?parseFloat(o.dimensions.height):210),width:parseInt(w.width||800),height:parseInt(w.height||600)};return{format:(m==null?void 0:m.format)||"album",quality:"high",pages:s,pages_count:c.length,workspace_dimensions:r,product_dimensions:(o==null?void 0:o.dimensions)||{},use_pdf_thumbnails:!0}},ae=async()=>{var s;if(!(m!=null&&m.id)){console.warn("No hay proyecto cargado para generar PDF automÃ¡ticamente.");return}try{const r=ge();if(console.log("ðŸ”„ [AUTO-PDF] Iniciando generaciÃ³n automÃ¡tica de PDF"),console.log("ðŸ“ [AUTO-PDF] Dimensiones:",r.workspace_dimensions),(await fetch(`/api/customer/projects/${m.id}/generate-pdf`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((s=document.querySelector('meta[name="csrf-token"]'))==null?void 0:s.content)||""},body:JSON.stringify(r)})).ok){console.log("âœ… [AUTO-PDF] PDF generado exitosamente"),ne(!0);try{const t=await fetch(`/api/customer/projects/${m.id}/pdf-info`);if(t.ok){const i=await t.json();console.log("ðŸ“„ [AUTO-PDF] InformaciÃ³n del PDF:",i)}}catch(t){console.warn("âš ï¸ [AUTO-PDF] No se pudo obtener info del PDF:",t.message)}}else console.warn("âš ï¸ [AUTO-PDF] Error al generar PDF automÃ¡ticamente")}catch(r){console.warn("âš ï¸ [AUTO-PDF] Error en generaciÃ³n automÃ¡tica:",r.message)}};x.useEffect(()=>{l&&(console.log("ðŸ“– [BOOK-MODAL] Modal abierto"),console.log("ðŸ“Š [BOOK-MODAL] Thumbnails recibidos:",Object.keys(j).length,"de",c.length,"pÃ¡ginas"),Object.keys(j).length>0?(console.log("âœ… [BOOK-MODAL] Usando thumbnails del Editor"),$(j)):(console.log("â„¹ï¸ [BOOK-MODAL] No se recibieron thumbnails, usando placeholders"),$({})),m!=null&&m.id&&(console.log("ðŸ”„ [BOOK-MODAL] Iniciando generaciÃ³n automÃ¡tica de PDF..."),setTimeout(()=>{ae()},1e3)))},[l,j,m]),x.useEffect(()=>{l||$({})},[l]);const V=Object.keys(j).length>0?j:oe;if(!c||!Array.isArray(c)||c.length===0)return e.jsx(X,{isOpen:l,onRequestClose:y,style:q,contentLabel:"Vista previa del Ã¡lbum",ariaHideApp:!0,shouldCloseOnOverlayClick:!0,shouldCloseOnEsc:!0,role:"dialog","aria-modal":"true","aria-labelledby":"modal-title","aria-describedby":"modal-description",children:e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg max-w-md mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{id:"modal-title",className:"text-xl font-bold",children:"Vista previa del Ã¡lbum"}),e.jsx("button",{onClick:y,className:"text-gray-500 hover:text-gray-700","aria-label":"Cerrar vista previa",children:e.jsx(Q,{size:24})})]}),e.jsx("p",{id:"modal-description",className:"text-gray-600",children:"No hay pÃ¡ginas disponibles para mostrar."})]})});const me=()=>{B.current&&B.current.pageFlip().flipPrev()},ue=()=>{B.current&&B.current.pageFlip().flipNext()},he=w.width/w.height,G=600,W=Math.round(G*he),pe=()=>{const s=(o==null?void 0:o.has_cover_image)===!0||(o==null?void 0:o.has_cover_image)===1,r=(o==null?void 0:o.has_back_cover_image)===!0||(o==null?void 0:o.has_back_cover_image)===1;console.log("ðŸ” [FILTER-PAGES] ConfiguraciÃ³n de pÃ¡ginas:",{has_cover_image:o==null?void 0:o.has_cover_image,has_back_cover_image:o==null?void 0:o.has_back_cover_image,hasCover:s,hasBackCover:r,totalPagesReceived:c.length,pagesReceived:c.map(t=>({id:t.id,type:t.type,pageNumber:t.pageNumber,layoutId:t.layoutId}))});const a=c.filter(t=>t.type==="cover"&&!s?(console.log("ðŸš« [FILTER-PAGES] Eliminando portada (deshabilitada)"),!1):t.type==="final"&&!r?(console.log("ðŸš« [FILTER-PAGES] Eliminando contraportada (deshabilitada)"),!1):!0);return console.log("âœ… [FILTER-PAGES] PÃ¡ginas habilitadas:",{total:a.length,types:a.map(t=>t.type),details:a.map(t=>({id:t.id,type:t.type,pageNumber:t.pageNumber}))}),a},v=(()=>{const s=pe();if(s.length===0)return console.warn("âš ï¸ [BOOK-PAGES] No hay pÃ¡ginas vÃ¡lidas para mostrar"),[];const r=s.map((a,t)=>{let i="";return a.type==="cover"?i="Portada":a.type==="final"?i="Contraportada":a.type==="content"?i=`PÃ¡gina ${a.pageNumber||t+1}`:i=`PÃ¡gina ${t+1}`,{...a,id:`${a.id}-display`,originalId:a.id,displayIndex:t,pageType:a.type,pageTitle:i,originalPageNumber:a.pageNumber}});return console.log("ðŸŽ¯ [BOOK-PAGES] PÃ¡ginas creadas para HTMLFlipBook:",{totalPages:r.length,pageList:r.map(a=>({id:a.id,originalId:a.originalId,type:a.pageType,title:a.pageTitle,displayIndex:a.displayIndex,originalPageNumber:a.originalPageNumber,pageNumber:a.pageNumber})),contentOnlyPages:r.filter(a=>a.pageType==="content").map(a=>({title:a.pageTitle,originalPageNumber:a.originalPageNumber,pageNumber:a.pageNumber}))}),r})(),Z=v.length>0&&((te=v[0])==null?void 0:te.pageType)==="cover",K=v.length>0&&!Z&&!v.some(s=>s.pageType==="final");return console.log("ðŸŽ¯ [FLIPBOOK-CONFIG] ConfiguraciÃ³n del libro:",{totalPages:v.length,hasRealCover:Z,contentOnlyMode:K,pageTypes:v.map(s=>s.pageType)}),v.length===0?e.jsx(X,{isOpen:l,onRequestClose:y,style:q,contentLabel:"Vista previa del Ã¡lbum",ariaHideApp:!0,shouldCloseOnOverlayClick:!0,shouldCloseOnEsc:!0,role:"dialog","aria-modal":"true","aria-labelledby":"modal-title","aria-describedby":"modal-description",children:e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg max-w-md mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h2",{id:"modal-title",className:"text-xl font-bold",children:["Vista previa del ",S.name.toLowerCase()]}),e.jsx("button",{onClick:y,className:"text-gray-500 hover:text-gray-700","aria-label":"Cerrar vista previa",children:e.jsx(Q,{size:24})})]}),e.jsx("p",{id:"modal-description",className:"text-gray-600",children:"No hay pÃ¡ginas habilitadas para mostrar. Verifique la configuraciÃ³n de portada y contraportada."})]})}):e.jsxs(X,{isOpen:l,onRequestClose:y,style:q,contentLabel:`Vista previa del ${S.name.toLowerCase()}`,ariaHideApp:!0,shouldCloseOnOverlayClick:!0,shouldCloseOnEsc:!0,role:"dialog","aria-modal":"true","aria-labelledby":"modal-title","aria-describedby":"modal-description",children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:ye}}),(ie||H||C.isLoading)&&e.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl flex flex-col items-center max-w-md mx-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mb-4"}),C.isLoading?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-gray-700 text-center",children:C.message||"Cargando Ã¡lbum..."}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-3",children:e.jsx("div",{className:"bg-purple-600 h-2 rounded-full transition-all duration-300",style:{width:`${C.totalImages>0?C.loadedImages/C.totalImages*100:0}%`}})}),e.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:[C.loadedImages," de ",C.totalImages," imÃ¡genes"]})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-gray-700",children:H?"Preparando Ã¡lbum...":"Cargando vistas previas..."}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Procesando contenido"})]})]})}),e.jsxs("div",{className:"relative flex flex-col items-center justify-center p-6 bg-white rounded-2xl shadow-2xl",children:[e.jsxs("h2",{id:"modal-title",className:"sr-only",children:["Vista previa del ",S.name.toLowerCase()]}),e.jsxs("p",{id:"modal-description",className:"sr-only",children:["Navegue por las pÃ¡ginas de su ",S.name.toLowerCase()," usando los controles de navegaciÃ³n o teclado. Puede cerrar esta ventana presionando Escape o el botÃ³n de cerrar."]}),e.jsx("button",{onClick:y,className:"absolute top-4 right-4 p-2 rounded-full bg-white/80 hover:bg-white text-gray-700 shadow z-10","aria-label":`Cerrar vista previa del ${S.name.toLowerCase()}`,children:e.jsx(Q,{className:"h-6 w-6"})}),e.jsxs("div",{className:"flex items-center justify-center gap-8 mb-6 mt-2",children:[e.jsx("button",{onClick:me,className:"p-3 rounded-full bg-gray-100 hover:bg-gray-200 text-gray-700 shadow transition-colors","aria-label":"PÃ¡gina anterior",children:e.jsx(be,{className:"h-6 w-6"})}),e.jsx("div",{className:"flex items-center",children:e.jsxs("span",{className:"flex items-center text-gray-700 text-base font-medium px-4 py-2 bg-gray-50 rounded-lg","aria-live":"polite",children:[(()=>{const s=v[z];return s?(console.log("ðŸ“Š [CURRENT-PAGE] Datos de pÃ¡gina actual:",{currentPage:z,pageData:s,pageTitle:s.pageTitle,pageType:s.pageType,originalPageNumber:s.originalPageNumber,pageNumber:s.pageNumber}),s.pageTitle||`PÃ¡gina ${z+1}`):"Cargando..."})(),e.jsx("span",{className:"mx-2 text-gray-400",children:"â€¢"}),z+1," / ",v.length," pÃ¡ginas",K&&e.jsx("span",{className:"ml-2 text-xs text-blue-600 bg-blue-50 px-2 py-1 rounded",children:"Solo contenido"})]})}),e.jsx("button",{onClick:ue,className:"p-3 rounded-full bg-gray-100 hover:bg-gray-200 text-gray-700 shadow transition-colors","aria-label":"PÃ¡gina siguiente",children:e.jsx(xe,{className:"h-6 w-6"})})]}),e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(fe,{ref:B,width:W,height:G,size:"stretch",minWidth:W*.7,maxWidth:W*1.3,minHeight:G*.7,maxHeight:G*1.3,maxShadowOpacity:.3,showCover:Z,mobileScrollSupport:!0,onFlip:s=>re(s.data),className:"shadow-xl",usePortrait:!1,startPage:0,drawShadow:!0,flippingTime:600,useMouseEvents:!0,swipeDistance:50,showPageCorners:!K,disableFlipByClick:!1,autoSize:K,style:{margin:0,padding:0},children:v.map((s,r)=>{const a=s.originalId||s.id,t=!!V[a];return console.log(`ðŸ–¼ï¸ [PAGE-RENDER] PÃ¡gina ${r}:`,{pageId:s.id,originalId:s.originalId,thumbnailKey:a,hasThumbnail:t,pageType:s.pageType,pageTitle:s.pageTitle,availableThumbnailKeys:Object.keys(V)}),e.jsx("div",{id:`page-${s.originalId||s.id}`,className:"page-container",style:{width:W,height:G,margin:0,padding:0,overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#ffffff"},children:e.jsx("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:V[s.originalId||s.id]?e.jsx("img",{src:V[s.originalId||s.id],alt:s.pageTitle||`PÃ¡gina ${r+1}`,style:{width:"100%",height:"100%",objectFit:"contain",margin:0,padding:0,border:"none",imageRendering:"auto",backgroundColor:"#ffffff",WebkitBackfaceVisibility:"hidden",backfaceVisibility:"hidden",WebkitTransform:"translateZ(0)",transform:"translateZ(0)"}}):e.jsx(we,{page:s,pageIdx:r})})},`page-${r}`)})})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mt-6 w-full max-w-2xl mx-auto",children:[e.jsx("button",{className:`flex-1 py-3 px-4 rounded-lg font-semibold shadow transition flex items-center justify-center ${L?"bg-purple-400 text-white cursor-not-allowed":"bg-purple-600 text-white hover:bg-purple-700"}`,onClick:async()=>{var r;if(L)return;E({isOpen:!0,message:"Iniciando proceso...",subMessage:"Estamos preparando tu Ã¡lbum",progress:0});const s=[{progress:20,message:"Verificando proyecto",subMessage:"Validando contenido del Ã¡lbum",delay:800},{progress:40,message:"Preparando tu Ã¡lbum",subMessage:"Organizando pÃ¡ginas y elementos",delay:1200},{progress:60,message:"Agregando al carrito",subMessage:"Configurando tu pedido",delay:1500},{progress:80,message:"Finalizando proceso",subMessage:"Ãšltimos detalles",delay:1e3},{progress:100,message:"Â¡Proceso completado!",subMessage:"Redirigiendo al carrito",delay:800}];try{for(const i of s)await new Promise(g=>setTimeout(g,i.delay)),E({isOpen:!0,message:i.message,subMessage:i.subMessage,progress:i.progress});if(!(m!=null&&m.id)){console.error("âŒ No hay datos del proyecto"),E({isOpen:!1,message:"",subMessage:"",progress:0}),alert("Error: No se encontrÃ³ informaciÃ³n del proyecto.");return}if(typeof I!="function"){console.error("âŒ addAlbumToCart no es una funciÃ³n"),E({isOpen:!1,message:"",subMessage:"",progress:0}),alert("Error: FunciÃ³n de carrito no disponible. IntÃ©ntelo nuevamente.");return}const a=I({project_id:m.id,pages:c,workspace_dimensions:w,quality:"high",format:"album",generate_pdf:!0});let t;if(a&&typeof a.then=="function"?t=await a:t=a,!t){console.error("âŒ No se pudo agregar al carrito"),E({isOpen:!1,message:"",subMessage:"",progress:0}),alert("Error al agregar el Ã¡lbum al carrito. Revise la consola para mÃ¡s detalles.");return}ae().catch(i=>{console.warn("âš ï¸ Error al generar PDF (continuando):",i.message)}),await new Promise(i=>setTimeout(i,1e3)),E({isOpen:!1,message:"",subMessage:"",progress:0}),y(),window.location.href="/cart"}catch(a){console.error("âŒ Error en proceso de compra:",a),E({isOpen:!1,message:"",subMessage:"",progress:0});try{const t=`${((r=window.Global)==null?void 0:r.APP_CORRELATIVE)||"bananalab"}_cart`;if(JSON.parse(localStorage.getItem(t)||"[]").length>0){y(),window.location.href="/cart";return}}catch(t){console.error("âŒ Error en recuperaciÃ³n:",t)}alert(`Error: ${a.message}. Si el Ã¡lbum se agregÃ³, puede ir manualmente al carrito.`)}},disabled:L||H,children:L?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Agregando al carrito..."]}):"Comprar ahora"}),e.jsx("button",{className:"flex-1 py-3 px-4 rounded-lg bg-gray-200 text-gray-700 font-semibold shadow hover:bg-gray-300 transition",onClick:y,disabled:L||H,children:"Continuar editando"})]}),A.isOpen&&e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-[9999] animate-in fade-in duration-500",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl p-8 min-w-96 max-w-96 mx-4 text-center relative overflow-hidden animate-in zoom-in duration-500",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-50 via-blue-50 to-pink-50 opacity-60"}),e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"absolute top-4 left-4 w-2 h-2 bg-purple-300 rounded-full animate-bounce opacity-60",style:{animationDelay:"0s"}}),e.jsx("div",{className:"absolute top-8 right-6 w-1 h-1 bg-blue-300 rounded-full animate-bounce opacity-60",style:{animationDelay:"0.5s"}}),e.jsx("div",{className:"absolute bottom-8 left-8 w-1.5 h-1.5 bg-pink-300 rounded-full animate-bounce opacity-60",style:{animationDelay:"1s"}}),e.jsx("div",{className:"absolute bottom-4 right-4 w-1 h-1 bg-purple-400 rounded-full animate-bounce opacity-60",style:{animationDelay:"1.5s"}})]}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"mb-6 relative",children:[e.jsxs("div",{className:"w-24 h-24 mx-auto bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center shadow-2xl relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-400 to-pink-400 rounded-full animate-ping opacity-20"}),e.jsx("div",{className:"absolute inset-2 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full animate-pulse"}),e.jsx("svg",{className:"w-12 h-12 text-white relative z-10",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})]}),e.jsx("div",{className:"absolute inset-0 w-24 h-24 mx-auto",children:e.jsxs("svg",{className:"w-24 h-24 transform -rotate-90",viewBox:"0 0 96 96",children:[e.jsx("circle",{cx:"48",cy:"48",r:"44",stroke:"currentColor",strokeWidth:"4",fill:"none",className:"text-gray-200"}),e.jsx("circle",{cx:"48",cy:"48",r:"44",stroke:"url(#progressGradient)",strokeWidth:"4",fill:"none",strokeLinecap:"round",strokeDasharray:`${2*Math.PI*44}`,strokeDashoffset:`${2*Math.PI*44*(1-A.progress/100)}`,style:{transition:"stroke-dashoffset 0.5s ease-in-out"}}),e.jsx("defs",{children:e.jsxs("linearGradient",{id:"progressGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",style:{stopColor:"#8b5cf6",stopOpacity:1}}),e.jsx("stop",{offset:"100%",style:{stopColor:"#ec4899",stopOpacity:1}})]})})]})})]}),e.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent mb-3 animate-pulse",children:A.message}),e.jsx("p",{className:"text-gray-600 mb-6 text-base leading-relaxed",children:A.subMessage}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4 mb-4 overflow-hidden shadow-inner",children:e.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 h-4 rounded-full transition-all duration-500 ease-out relative",style:{width:`${A.progress}%`},children:[e.jsx("div",{className:"absolute inset-0 bg-white/30 animate-pulse rounded-full"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent skew-x-12 animate-shimmer"})]})}),e.jsxs("p",{className:"text-lg font-bold text-purple-600 mb-4",children:[A.progress,"%"]})]}),e.jsx("style",{jsx:!0,children:`
                            @keyframes shimmer {
                                0% { transform: translateX(-100%) skewX(-12deg); }
                                100% { transform: translateX(200%) skewX(-12deg); }
                            }
                            .animate-shimmer {
                                animation: shimmer 2s infinite;
                            }
                        `})]})})]})},we=({page:l,pageIdx:y})=>{const c=l.pageTitle||(l.type==="content"?`PÃ¡gina ${l.originalPageNumber||l.pageNumber||y+1}`:l.type==="cover"?"Portada":l.type==="final"?"Contraportada":`PÃ¡gina ${y+1}`),j=l.pageType||l.type||"content";let I="";switch(j){case"cover":I="ðŸ“š";break;case"final":I="ðŸ“–";break;case"content":I="ðŸ“„";break;default:I="ðŸ“„"}return console.log("ðŸŽ¨ [PLACEHOLDER] Creando placeholder:",{pageTitle:c,pageType:j,pageData:{pageTitle:l.pageTitle,originalPageNumber:l.originalPageNumber,pageNumber:l.pageNumber,type:l.type,pageType:l.pageType}}),e.jsxs("div",{className:"flex flex-col items-center justify-center w-full h-full bg-gray-50 border-2 border-gray-200 rounded-lg",style:{minHeight:"400px"},children:[e.jsx("div",{className:"text-6xl mb-4",children:I}),e.jsx("div",{className:"text-lg font-semibold text-gray-700 mb-2",children:c}),e.jsx("div",{className:"text-sm text-gray-500",children:"Vista previa"}),l.layout&&e.jsxs("div",{className:"text-xs text-gray-400 mt-2",children:["Layout: ",l.layout.name||"Personalizado"]}),!1]})};export{Je as B};
