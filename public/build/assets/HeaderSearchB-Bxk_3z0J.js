import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as s}from"./index-BH53Isel.js";import{G as ye}from"./Global-ErywZRdd.js";import{C as je}from"./HeaderSearch-BZ6sxqwg.js";import{L as Z}from"./Logout-TGKOqZqZ.js";import ve from"./MenuSimple-DP7EeDlC.js";import{X as se}from"./x-DBMwyD6F.js";import{S as $}from"./search-TwiiKGP5.js";import{C as we}from"./chevron-left-B2s3ZsB7.js";import{C as ee}from"./chevron-right-Ckt5D2ka.js";import{C as P,D as te}from"./door-closed-Z4GbcMb-.js";import{A as z}from"./index-CmxRu895.js";import{m as q}from"./proxy-F8AlgMSF.js";import{H as xe}from"./house-D_ORqlIe.js";import{S as re}from"./shopping-cart-CZEUxbmv.js";import{U as Ne}from"./user-BvYmyGTY.js";import{S as ke}from"./settings-BSPs3Zt8.js";import"./index-yBjzXJbu.js";import"./PaymentModal-BB1JXzaZ.js";import"./index-fNjTmf9T.js";import"./index-Chjiymov.js";import"./CartItemRow-CLVGv7Ee.js";import"./Number2Currency-e57Tgsuk.js";import"./tippy-react.esm-BWiGTO87.js";import"./index-rimy3MAc.js";import"./trash-2-DK1wnsDn.js";import"./createLucideIcon-Cy5Ya80P.js";import"./plus-Bot15Khs.js";import"./main-6DCdASTx.js";import"./___vite-browser-external_commonjs-proxy-0zb4Agf2.js";import"./MobileMenu-Dd0wmaCf.js";import"./BasicRest-C4m6wu80.js";import"./index-BZYhE2TF.js";import"./tag-BY9rARtP.js";import"./chevron-up-D78jyEhP.js";import"./chevron-down-DS-mdh9v.js";function Se({search:m,setSearch:d,pages:R,items:E,onClose:i}){const[h,M]=s.useState("main"),[f,N]=s.useState(null),[I,L]=s.useState(null),[x,k]=s.useState([]),[w,A]=s.useState("right"),S=s.useRef(null),b=n=>{if(n.preventDefault(),m.trim()){const o=m.trim();window.location.href=`/catalogo?search=${encodeURIComponent(o)}`}return!1},l=n=>{if(n.key==="Enter"&&(n.preventDefault(),m.trim())){const o=m.trim();window.location.href=`/catalogo?search=${encodeURIComponent(o)}`}},g=(n,o="right",c=null)=>{A(o),c&&N(c),setTimeout(()=>{M(n)},50)},D=n=>{L(n.name),k([...x,{level:h,name:"Categorías"}]),g("subcategories","right",n.name)},p=()=>{if(x.length>0){const n=x[x.length-1];g(n.level,"left"),k(x.slice(0,-1))}else h==="subcategories"?g("categories","left"):h==="categories"&&g("main","left")},G=n=>{g("categories","right")},K=()=>"Menú principal",y=()=>{if(h==="main")return e.jsxs("div",{className:"animate-fade animate-duration-300",children:[e.jsxs("button",{className:"px-4 py-2 mb-3 w-full flex justify-between items-center hover:bg-gray-50 active:bg-primary transition-all  rounded-xl",onClick:()=>G(),children:[e.jsx("div",{className:"flex items-center",children:e.jsx("span",{className:"font-medium",children:"Categorías"})}),e.jsx(ee,{className:"h-5 w-5 customtext-neutral-light"})]}),e.jsx("div",{className:"space-y-2",children:R.map((n,o)=>n.menuable&&e.jsx("a",{href:n.path,className:"p-4 py-2 flex justify-between items-center w-full hover:bg-gray-50 active:bg-primary transition-all  rounded-xl",children:e.jsx("span",{className:"font-medium",children:n.name})},o))})]});if(h==="categories"){const n=[...E].sort((o,c)=>o.name.localeCompare(c.name,"es",{sensitivity:"base"}));return e.jsx("div",{className:w==="right"?"animate-fade-left animate-duration-300":"animate-fade-right animate-duration-300",children:e.jsx("div",{className:"space-y-2",children:n.map(o=>e.jsxs("div",{className:"px-4 py-2  rounded-xl flex justify-between items-center cursor-pointer hover:bg-gray-50 active:bg-primary transition-all",onClick:()=>D(o),children:[e.jsx("span",{className:"font-medium",children:o.name}),e.jsx(ee,{className:"h-5 w-5 customtext-neutral-light"})]},o.id))})})}else if(h==="subcategories"&&f){const n=E.find(c=>c.name===f),o=n.subcategories?[...n.subcategories].sort((c,C)=>c.name.localeCompare(C.name,"es",{sensitivity:"base"})):[];return e.jsx("div",{className:w==="right"?"animate-fade-left animate-duration-300":"animate-fade-right animate-duration-300",children:e.jsx("div",{className:"space-y-2",children:o.map((c,C)=>e.jsxs("a",{href:`/catalogo?subcategory=${c.slug}`,className:"flex w-full px-4  py-2 rounded-xl justify-between items-center hover:bg-gray-50 active:bg-primary transition-all",children:[e.jsx("span",{className:"font-medium",children:c.name}),e.jsx(ee,{className:"h-5 w-5 customtext-neutral-light"})]},C))})})}};return s.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[]),s.useEffect(()=>{const n=o=>{o.key==="Escape"&&(m.trim()?d(""):i())};return document.addEventListener("keydown",n),()=>{document.removeEventListener("keydown",n)}},[m,i,d]),e.jsxs("div",{className:"fixed inset-0 z-[99999] flex flex-col touch-none overscroll-none",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:i}),e.jsx("div",{className:"relative w-full md:w-[400px] md:mx-auto flex flex-col h-[100dvh]  ",children:e.jsxs("div",{className:"mt-auto bg-white  shadow-xl flex flex-col max-h-[80vh] rounded-t-2xl overflow-hidden",children:[e.jsxs("div",{className:"p-4 bg-white flex justify-between items-center border-b border-gray-200 sticky top-0 z-[9999]",children:[e.jsx("h1",{className:"text-lg font-bold",children:K()}),e.jsx("button",{className:"p-2 rounded-full hover:bg-gray-100",onClick:i,children:e.jsx(se,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"overflow-y-auto flex-1 p-4 overscroll-contain",children:[e.jsx("div",{className:"mb-5",children:e.jsxs("form",{onSubmit:b,role:"search",className:"relative w-full",children:[e.jsx("input",{ref:S,type:"search",name:"search",placeholder:"Buscar productos",value:m,onChange:n=>d(n.target.value),onKeyDown:l,className:"w-full pr-12 py-3 pl-4 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-primary/20 focus:outline-none",enterKeyHint:"search",inputMode:"search",autoComplete:"off",role:"searchbox","aria-label":"Buscar productos"}),e.jsx("button",{type:"submit",className:"absolute right-3 top-1/2 transform -translate-y-1/2 p-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors","aria-label":"Buscar",children:e.jsx($,{className:"h-4 w-4"})})]})}),h!=="main"&&e.jsxs("button",{onClick:p,className:"flex items-center customtext-primary mb-4 font-medium",children:[e.jsx(we,{className:"h-5 w-5 mr-1"}),e.jsx("span",{children:h==="categories"?"Categorías":f})]}),e.jsx("div",{className:"pb-16",children:y()}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0  flex justify-center",children:e.jsx(ve,{visible:!0})})]})]})})]})}const ge=({uuid:m,name:d,lastname:R,className:E})=>{const[i,h]=s.useState(!1),[M,f]=s.useState(!1),[N,I]=s.useState("");return s.useEffect(()=>{if(!m){h(!0);return}(async()=>{try{const x=`/api/profile/thumbnail/${m}?v=${new Date().getTime()}`;(await fetch(x,{method:"HEAD"})).headers.get("content-type").includes("svg")?f(!1):(I(x),f(!0))}catch{f(!1)}finally{h(!0)}})()},[m]),i?e.jsx(e.Fragment,{children:M?e.jsx("img",{src:N,alt:`${d} ${R}`,className:E,onError:()=>f(!1)}):e.jsx(P,{className:" !w-7 !h-7 customtext-primary border-primary rounded-full ring-secondary transition-all duration-300"})}):e.jsx("div",{className:"!w-7 !h-7  bg-secondary rounded-full animate-pulse flex items-center justify-center",children:e.jsx("div",{className:"w-3 h-3 bg-primary rounded-full"})})},lt=({items:m,data:d,cart:R,setCart:E,isUser:i,pages:h,generals:M=[]})=>{const f=M.find(t=>t.correlative==="phone_whatsapp"),N=M.find(t=>t.correlative==="message_whatsapp"),I=(f==null?void 0:f.description)??null,L=(N==null?void 0:N.description)??null,[x,k]=s.useState(!1),[w,A]=s.useState(!1),[S,b]=s.useState(!1),[l,g]=s.useState(""),[D,p]=s.useState(!1),[G,K]=s.useState(!1),[y,n]=s.useState([]),[o,c]=s.useState(!1),[C,ae]=s.useState(!1),[j,_]=s.useState(-1),ne=s.useRef([]),O=s.useRef(null),oe=s.useRef(null),W=s.useRef(null),ie=s.useRef(null),B=s.useRef(null),H=s.useRef(null),le=s.useRef([]),ce=R.reduce((t,r)=>Number(t)+Number(r.quantity),0),be=()=>{try{const t=window.location.pathname||"";return["/cart","/checkout"].some(a=>t.includes(a))}catch(t){return console.warn("Error checking path:",t),!1}},V=async t=>{if(!t.trim()||t.length<2){n([]),c(!1);return}ae(!0);try{const r=await fetch("/api/items/paginate",{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({take:8,skip:0,filter:[["name","contains",t],"or",["summary","contains",t],"or",["description","contains",t]],sort:[{selector:"name",desc:!1}],requireTotalCount:!1,with:"category,brand"})});if(!r.ok)throw new Error("Error en la búsqueda");const a=await r.json();a.status===200&&Array.isArray(a.data)?(n(a.data),c(a.data.length>0)):(n([]),c(!1))}catch(r){console.error("Error fetching search suggestions:",r),n([]),c(!1)}finally{ae(!1)}},J=t=>{g(t),_(-1),H.current&&clearTimeout(H.current),H.current=setTimeout(()=>{V(t)},300)},F=()=>{c(!1),n([]),_(-1)},X=t=>{if(!t)return;c(!1),b(!1);const r=t.slug?`/product/${t.slug}`:`/catalogo?search=${encodeURIComponent(t.name)}`;window.location.href=r};s.useEffect(()=>{function t(r){var a,v;O.current&&!O.current.contains(r.target)&&p(!1),oe.current&&!oe.current.contains(r.target)&&(l.trim()||b(!1)),B.current&&!B.current.contains(r.target)&&!((a=ie.current)!=null&&a.contains(r.target))&&!((v=W.current)!=null&&v.contains(r.target))&&F()}return document.addEventListener("mousedown",t),document.addEventListener("touchstart",t),()=>{document.removeEventListener("mousedown",t),document.removeEventListener("touchstart",t)}},[l]),s.useEffect(()=>{const t=()=>{window.scrollY>0?K(!0):K(!1)};return window.addEventListener("scroll",t),()=>window.removeEventListener("scroll",t)},[]),s.useEffect(()=>{const t=r=>{r.key==="Escape"&&(o?F():S&&(b(!1),g("")))};return(S||o)&&document.addEventListener("keydown",t),()=>{document.removeEventListener("keydown",t)}},[S,o]),s.useEffect(()=>()=>{H.current&&clearTimeout(H.current)},[]),s.useEffect(()=>{j>=0&&le.current[j]&&B.current&&le.current[j].scrollIntoView({block:"nearest",behavior:"smooth"})},[j]);const de={hidden:{opacity:0,y:-10,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{type:"spring",stiffness:400,damping:25}},exit:{opacity:0,y:-10,scale:.95,transition:{duration:.15}}},ue=[{icon:e.jsx(Ne,{size:16}),label:"Mi Perfil",href:"/profile"},{icon:e.jsx(re,{size:16}),label:"Mis Pedidos",href:"/customer/dashboard"},{icon:e.jsx(ke,{size:16}),label:"Configuración",href:"/account"},{icon:e.jsx(te,{size:16}),label:"Cerrar Sesión",onClick:Z}],me=t=>{if(t.preventDefault(),F(),l.trim()){const r=l.trim();window.location.href=`/catalogo?search=${encodeURIComponent(r)}`}return!1},he=t=>{if(t.preventDefault(),F(),l.trim()){const r=l.trim();b(!1),window.location.href=`/catalogo?search=${encodeURIComponent(r)}`}return!1};function pe(t){const r=B.current,a=ne.current[t];if(!r||!a)return;const v=r.getBoundingClientRect(),u=a.getBoundingClientRect();u.top<v.top?r.scrollTop-=v.top-u.top:u.bottom>v.bottom&&(r.scrollTop+=u.bottom-v.bottom)}const U=t=>{if(!(!o||y.length===0))switch(t.key){case"ArrowDown":t.preventDefault(),_(r=>{const a=r<y.length-1?r+1:r;return setTimeout(()=>pe(a),0),a});break;case"ArrowUp":t.preventDefault(),_(r=>{const a=r>0?r-1:0;return setTimeout(()=>pe(a),0),a});break;case"Enter":t.preventDefault(),j>=0&&j<y.length?X(y[j]):l.trim()&&me(t);break;case"Escape":c(!1);break}},Y=({suggestions:t,isLoading:r,onSelect:a,selectedIndex:v})=>o?e.jsx(q.div,{ref:B,initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute top-full left-0 right-0 bg-white border border-gray-200 rounded-lg shadow-lg z-[60] max-h-80 overflow-y-auto mt-1",children:r?e.jsx("div",{className:"p-4 text-center customtext-neutral-dark",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-primary border-t-transparent rounded-full animate-spin"}),"Buscando..."]})}):t.length>0?e.jsx("ul",{className:"py-2",children:t.map((u,fe)=>e.jsx("li",{ref:T=>ne.current[fe]=T,children:e.jsxs("button",{"data-suggestion-button":!0,onMouseDown:T=>{T.preventDefault(),T.stopPropagation(),setTimeout(()=>a(u),0)},className:`w-full px-4 py-3 text-left hover:bg-gray-50 transition-colors duration-200 flex items-center gap-3 ${fe===v?"bg-primary/10 border-l-4 border-primary":""}`,type:"button",children:[e.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-gray-100 rounded-lg overflow-hidden",children:u.image?e.jsx("img",{src:`/api/items/media/${u.image}`,alt:u.name,className:"w-full h-full object-cover",onError:T=>{T.target.style.display="none"}}):e.jsx("div",{className:"w-full h-full flex items-center justify-center customtext-neutral-dark",children:e.jsx($,{size:16})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium customtext-neutral-dark truncate",children:u.name}),u.category&&e.jsx("div",{className:"text-sm customtext-neutral-dark truncate",children:u.category.name}),u.final_price&&e.jsxs("div",{className:"text-sm font-semibold customtext-primary",children:["S/ ",parseFloat(u.final_price).toFixed(2)]})]})]})},u.id))}):e.jsx("div",{className:"p-4 text-center customtext-neutral-dark",children:"No se encontraron productos"})}):null;console.log(i);let Q=!1;if(i&&Array.isArray(i.roles)){const t=i.roles.map(r=>{var a;return(a=r.name)==null?void 0:a.toLowerCase()});Q=!t.includes("admin")&&!t.includes("root")}return e.jsxs("header",{className:`w-full top-0 left-0 z-50 transition-all duration-300 ${G?"fixed bg-white shadow-lg":"relative bg-white"}`,children:[e.jsxs("div",{className:"px-primary  bg-white 2xl:px-0 2xl:max-w-7xl mx-auto py-4 font-font-secondary text-base font-semibold",children:[e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsx("a",{href:"/",className:"flex items-center gap-2 z-[51]",children:e.jsx("img",{src:`/assets/resources/logo.png?v=${crypto.randomUUID()}`,alt:ye.APP_NAME,className:"h-14 object-contain object-center",onError:t=>{t.target.onerror=null,t.target.src="/assets/img/logo-bk.svg"}})}),(d==null?void 0:d.showLoginCart)&&e.jsxs("div",{className:"flex gap-8 lg:hidden",children:[e.jsxs("div",{className:`${S?"hidden":"flex"} items-center gap-4`,children:[i?e.jsxs("div",{ref:O,className:"relative",children:[e.jsx("button",{"aria-label":"user",className:"flex items-center gap-2 hover:customtext-primary transition-all duration-300 relative group",onClick:()=>p(!D),children:e.jsx("div",{className:"relative transform group-hover:scale-105 transition-transform duration-200",children:i.uuid?e.jsxs("div",{className:"relative",children:[e.jsx(ge,{uuid:i.uuid,name:i.name,lastname:i.lastname,className:"!w-6 !h-6 rounded-full object-cover border-2 border-primary ring-secondary transition-all duration-300"}),e.jsx("div",{className:"relative",style:{display:"none"},children:e.jsx(P,{className:"customtext-primary  border-primary rounded-full   ring-secondary transition-all duration-300",width:"1.5rem"})}),e.jsxs("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-primary border-2 border-white rounded-full animate-pulse",children:[e.jsx("div",{className:"w-full h-full bg-primary rounded-full animate-ping opacity-75 absolute"}),e.jsx("div",{className:"w-full h-full bg-primary rounded-full"})]})]}):e.jsxs("div",{className:"relative",children:[e.jsx(P,{className:"customtext-primary border-2 border-primary rounded-full  ring-secondary  transition-all duration-300",width:"1.5rem"}),e.jsxs("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-primary border-2 border-white rounded-full animate-pulse",children:[e.jsx("div",{className:"w-full h-full bg-primary rounded-full animate-ping opacity-75 absolute"}),e.jsx("div",{className:"w-full h-full bg-primary rounded-full"})]})]})})}),e.jsx(z,{children:D&&e.jsx(q.div,{initial:"hidden",animate:"visible",exit:"exit",variants:de,className:"absolute z-50 top-full -left-20 bg-white shadow-xl border-t rounded-xl w-48 mt-2",children:e.jsx("div",{className:"p-4",children:e.jsx("ul",{className:"space-y-3",children:Q?ue.map((t,r)=>e.jsx("li",{children:t.onClick?e.jsxs("button",{"aria-label":"menu-items",onClick:a=>{a.preventDefault(),a.stopPropagation(),p(!1),setTimeout(()=>{t.onClick()},150)},className:"flex w-full items-center gap-3 customtext-neutral-dark text-sm hover:customtext-primary hover:bg-gray-50 transition-all duration-300 p-2 rounded-lg",children:[t.icon,e.jsx("span",{children:t.label})]}):e.jsxs("a",{href:t.href,onClick:a=>{a.stopPropagation(),p(!1)},className:"flex items-center gap-3 customtext-neutral-dark text-sm hover:customtext-primary hover:bg-gray-50 transition-all duration-300 p-2 rounded-lg",children:[t.icon,e.jsx("span",{children:t.label})]})},r)):e.jsxs(e.Fragment,{children:[e.jsx("li",{children:e.jsxs("a",{href:"/admin/home",onClick:t=>{t.stopPropagation(),p(!1)},className:"flex items-center gap-3 customtext-neutral-dark text-sm hover:customtext-primary hover:bg-gray-50 transition-all duration-300 p-2 rounded-lg",children:[e.jsx(xe,{size:16}),e.jsx("span",{children:"Dashboard"})]})}),e.jsx("li",{children:e.jsxs("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),p(!1),setTimeout(()=>{Z()},150)},className:"flex w-full items-center gap-3 customtext-neutral-dark text-sm hover:customtext-primary hover:bg-gray-50 transition-all duration-300 p-2 rounded-lg",children:[e.jsx(te,{size:16}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})})})})})]}):e.jsx("a",{href:"/iniciar-sesion",className:"flex items-center",children:e.jsx(P,{className:"customtext-primary",width:"1.5rem"})}),e.jsxs("button",{"aria-label":"",onClick:()=>k(!0),className:"flex items-center relative",children:[e.jsx(re,{className:"customtext-primary",width:"1.5rem"}),e.jsx("span",{className:"absolute -right-2 -top-2 inline-flex items-center justify-center w-4 h-4 bg-primary text-white rounded-full text-[8px]",children:ce})]})]}),e.jsx("button",{"aria-label":"Menú",onClick:()=>A(!w),className:"flex md:hidden items-center justify-center bg-primary rounded-lg w-auto h-auto p-2 text-white fill-white transition-all duration-300 ",children:w?e.jsx(se,{}):e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("path",{d:"M10 5H20",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M4 12H20",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M4 19H14",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})})]}),e.jsxs("div",{className:"hidden md:block relative w-full max-w-xl mx-auto",children:[e.jsxs("form",{onSubmit:me,role:"search",children:[e.jsx("input",{ref:ie,type:"search",name:"search",placeholder:"Estoy buscando...",value:l,onChange:t=>J(t.target.value),onKeyDown:U,onFocus:()=>{l.trim().length>=2&&V(l)},className:"w-full pr-14 py-4 pl-4 border rounded-full font-normal focus:ring-0 customtext-neutral-dark placeholder:customtext-neutral-dark focus:outline-none bg-white",enterKeyHint:"search",inputMode:"search",autoComplete:"on",role:"searchbox","aria-label":"Estoy buscando..."}),e.jsx("button",{type:"submit",className:"absolute right-3 top-1/2 transform -translate-y-1/2 p-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors","aria-label":"Buscar",children:e.jsx($,{})})]}),e.jsx(z,{children:e.jsx(Y,{suggestions:y,isLoading:C,onSelect:X})})]}),d!=null&&d.showLoginCart?e.jsxs("div",{className:"hidden md:flex items-center gap-4 relative text-sm",children:[e.jsxs("div",{ref:O,children:[i?e.jsxs("button",{"aria-label":"user",className:"customtext-neutral-dark flex items-center gap-2 hover:customtext-primary pr-6 transition-all duration-300 relative group",onClick:()=>p(!D),children:[e.jsx("div",{className:"relative transform group-hover:scale-105 transition-transform duration-200",children:i.uuid?e.jsxs("div",{className:"relative",children:[e.jsx(ge,{uuid:i.uuid,name:i.name,lastname:i.lastname,className:"w-8 h-8 rounded-full object-cover border-2 border-primary ring-secondary transition-all duration-300"}),e.jsxs("div",{className:"absolute -bottom-[-0.115rem] -right-0.5 w-3.5 h-3.5 bg-primary border-2 border-white rounded-full animate-pulse",children:[e.jsx("div",{className:"w-full h-full bg-primary rounded-full animate-ping opacity-75 absolute"}),e.jsx("div",{className:"w-full h-full bg-primary rounded-full"})]})]}):e.jsxs("div",{className:"relative",children:[e.jsx(P,{className:"customtext-primary border-2 border-primary rounded-full  ring-secondary group-hover:ring-green-300 transition-all duration-300"}),e.jsxs("div",{className:"absolute -bottom-0.5 -right-0.5 w-3.5 h-3.5 bg-primary border-2 border-white rounded-full animate-pulse",children:[e.jsx("div",{className:"w-full h-full bg-primary rounded-full animate-ping opacity-75 absolute"}),e.jsx("div",{className:"w-full h-full bg-primary rounded-full"})]})]})}),e.jsx("span",{className:"hidden md:inline",children:i.name})]}):e.jsxs("a",{href:"/iniciar-sesion",className:"flex items-center gap-2 text-sm hover:customtext-primary transition-colors duration-300",children:[e.jsx(P,{className:"customtext-primary"}),e.jsx("span",{className:"hidden md:inline",children:"Iniciar Sesión"})]}),e.jsx(z,{children:D&&e.jsx(q.div,{initial:"hidden",animate:"visible",exit:"exit",variants:de,className:"absolute z-50 top-full left-0 bg-white shadow-xl border-t rounded-xl w-48 mt-2",children:e.jsx("div",{className:"p-4",children:e.jsx("ul",{className:"space-y-4",children:Q?ue.map((t,r)=>e.jsx("li",{children:t.onClick?e.jsxs("button",{"aria-label":"menu-items",onClick:a=>{a.preventDefault(),a.stopPropagation(),p(!1),setTimeout(()=>{t.onClick()},150)},className:"flex w-full items-center gap-3 customtext-neutral-dark text-sm hover:customtext-primary hover:bg-gray-50 transition-all duration-300 p-2 rounded-lg",children:[t.icon,e.jsx("span",{children:t.label})]}):e.jsxs("a",{href:t.href,onClick:a=>{a.stopPropagation(),p(!1)},className:"flex items-center gap-3 customtext-neutral-dark text-sm hover:customtext-primary hover:bg-gray-50 transition-all duration-300 p-2 rounded-lg",children:[t.icon,e.jsx("span",{children:t.label})]})},r)):e.jsxs(e.Fragment,{children:[e.jsx("li",{children:e.jsxs("a",{href:"/admin/home",onClick:t=>{t.stopPropagation(),p(!1)},className:"flex items-center gap-3 customtext-neutral-dark text-sm hover:customtext-primary hover:bg-gray-50 transition-all duration-300 p-2 rounded-lg",children:[e.jsx(xe,{size:16}),e.jsx("span",{children:"Dashboard"})]})}),e.jsx("li",{children:e.jsxs("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),p(!1),setTimeout(()=>{Z()},150)},className:"flex w-full items-center gap-3 customtext-neutral-dark text-sm hover:customtext-primary hover:bg-gray-50 transition-all duration-300 p-2 rounded-lg",children:[e.jsx(te,{size:16}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})})})})})]}),e.jsxs("button",{"aria-label":"cart",onClick:()=>k(!0),className:"flex items-center gap-2 text-sm relative hover:customtext-primary transition-colors duration-300",children:[e.jsx("div",{className:"customtext-primary",children:e.jsx(re,{})}),e.jsx("span",{className:"hidden md:inline",children:"Mi Carrito"}),e.jsx("span",{className:"absolute -right-6 -top-2 inline-flex items-center justify-center w-5 h-5 text-xs bg-primary text-white rounded-full",children:ce})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("a",{"aria-label":"primary-button",className:`${d.class?d.class:"bg-primary"} hidden lg:block px-6 py-2.5 text-white font-medium rounded-3xl hover:brightness-125 transition-colors duration-300`,target:"_blank",rel:"noopener noreferrer",href:I&&L?`https://api.whatsapp.com/send?phone=${encodeURIComponent(I)}&text=${encodeURIComponent(L)}`:"#",children:"Haz tu pedido"}),e.jsx("div",{className:"md:hidden relative w-full max-w-xl mx-auto",children:S?e.jsxs("div",{className:"relative w-full",children:[e.jsxs("form",{onSubmit:he,role:"search",children:[e.jsx("input",{ref:W,type:"search",name:"search",placeholder:"Buscar productos",value:l,onChange:t=>J(t.target.value),onKeyDown:U,onFocus:()=>{l.trim().length>=2&&V(l)},className:"w-full pr-14 py-4 pl-4 border rounded-full focus:ring-0 focus:outline-none",autoFocus:!0,enterKeyHint:"search",inputMode:"search",autoComplete:"off",role:"searchbox","aria-label":"Buscar productos",onBlur:()=>{setTimeout(()=>{!l.trim()&&!o&&b(!1)},200)}}),e.jsxs("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>{g(""),F(),b(!1)},className:"p-2 bg-gray-200 text-gray-600 rounded-lg hover:bg-gray-300 transition-colors","aria-label":"Cerrar búsqueda",children:e.jsx(se,{size:16})}),e.jsx("button",{type:"submit",className:"p-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors","aria-label":"Buscar",children:e.jsx($,{size:16})})]})]}),e.jsx(z,{children:e.jsx(Y,{suggestions:y,isLoading:C,onSelect:X,selectedIndex:j})})]}):e.jsx("button",{"aria-label":"Buscar productos",onClick:()=>{b(!0),setTimeout(()=>{W.current&&W.current.focus()},100)},className:"flex items-center justify-end w-full px-0 py-3",children:e.jsx($,{className:"customtext-primary",size:28})})})]})]}),(d==null?void 0:d.mobileSearch)&&!be()&&e.jsx("div",{className:"block md:hidden mt-6 space-y-4",children:e.jsxs("div",{className:"w-full relative",children:[e.jsxs("form",{onSubmit:he,role:"search",className:"relative w-full",children:[e.jsx("input",{type:"search",name:"search",placeholder:"Buscar productos...",value:l,onChange:t=>J(t.target.value),onKeyDown:U,onFocus:()=>{l.trim().length>=2&&V(l)},className:"w-full pr-14 py-3 font-normal pl-4 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary focus:border-transparent focus:outline-none bg-gray-50",enterKeyHint:"search",inputMode:"search",autoComplete:"off",role:"searchbox","aria-label":"Buscar productos"}),e.jsx("button",{type:"submit",className:"absolute right-2 top-1/2 transform -translate-y-1/2 p-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors","aria-label":"Buscar",children:e.jsx($,{size:18})})]}),e.jsx(z,{children:e.jsx(Y,{suggestions:y,isLoading:C,onSelect:X,selectedIndex:j})})]})})]}),e.jsx(z,{children:w&&e.jsx(q.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2},className:"lg:hidden bg-transparent text-textWhite shadow-lg w-full min-h-screen absolute z-10 top-20",children:e.jsx(Se,{search:l,setSearch:g,pages:h,items:m,onClose:()=>A(!w)})})}),e.jsx(je,{data:d,cart:R,setCart:E,modalOpen:x,setModalOpen:k}),e.jsx("div",{className:"flex justify-end w-full mx-auto z-[100] relative",children:e.jsx("div",{className:"block fixed bottom-6 sm:bottom-[2rem] lg:bottom-[4rem] z-20 cursor-pointer",children:e.jsx("a",{target:"_blank",id:"whatsapp-toggle",href:`https://api.whatsapp.com/send?phone=${I}&text=${L}`,children:e.jsx("img",{src:"/assets/img/whatsapp.svg",alt:"whatsapp",className:"mr-3 w-12 h-12 md:w-[60px] md:h-[60px] animate-bounce duration-300"})})})})]})};export{lt as default};
