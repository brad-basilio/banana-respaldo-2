import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as a}from"./index-BH53Isel.js";import{G as te}from"./Global-D6eBBAMK.js";import"./HeaderSearch-BLPm48RP.js";import"./main-Byrjfx4U.js";import{L as D}from"./Logout-DXm-w6is.js";import{C as ge}from"./CartModalBananaLab-D1KFXrRb.js";import{P as re,M as be}from"./ProfileImage-Bq5hrAId.js";import{m as i}from"./proxy-BdCOtp7i.js";import{c as ne}from"./createLucideIcon-Cy5Ya80P.js";import{X as se}from"./x-DBMwyD6F.js";import{C as k,D as H}from"./door-closed-Z4GbcMb-.js";import{A as S}from"./index-CDbJJs-a.js";import{H as ae}from"./house-D_ORqlIe.js";import{S as L}from"./shopping-cart-CZEUxbmv.js";import{S as ie}from"./search-TwiiKGP5.js";import{U as je}from"./user-BvYmyGTY.js";import{S as ye}from"./settings-BSPs3Zt8.js";import"./index-yBjzXJbu.js";import"./PaymentModal-lELjrGc2.js";import"./index-B6ujFmsw.js";import"./index-Chjiymov.js";import"./CartItemRow-aLzOG3-9.js";import"./Number2Currency-e57Tgsuk.js";import"./tippy-react.esm-_w2ZiBvC.js";import"./index-fRpqIG3j.js";import"./trash-2-DK1wnsDn.js";import"./plus-Bot15Khs.js";import"./___vite-browser-external_commonjs-proxy-0zb4Agf2.js";/* empty css              */import"./shopping-bag-CoWGrL8C.js";import"./arrow-right-DR00rP9v.js";import"./MenuSimple-B6W4Qa_d.js";import"./MobileMenu-CWbk-3V9.js";import"./BasicRest-DByHAxxD.js";import"./index-BJa4kPFi.js";import"./tag-BY9rARtP.js";import"./chevron-up-D78jyEhP.js";import"./chevron-down-DS-mdh9v.js";import"./chevron-left-B2s3ZsB7.js";import"./chevron-right-Ckt5D2ka.js";/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=ne("BookHeart",[["path",{d:"M16 8.2A2.22 2.22 0 0 0 13.8 6c-.8 0-1.4.3-1.8.9-.4-.6-1-.9-1.8-.9A2.22 2.22 0 0 0 8 8.2c0 .6.3 1.2.7 1.6A226.652 226.652 0 0 0 12 13a404 404 0 0 0 3.3-3.1 2.413 2.413 0 0 0 .7-1.7",key:"1t75a8"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=ne("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),ut=({items:le,data:oe,cart:C,setCart:ce,isUser:l,pages:Ne,generals:B=[]})=>{const _={hidden:{opacity:0,y:-10,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{type:"spring",stiffness:400,damping:25}},exit:{opacity:0,y:-10,scale:.95,transition:{duration:.15}}},$=[{icon:e.jsx(je,{size:16}),label:"Mi Perfil",href:"/profile"},{icon:e.jsx(L,{size:16}),label:"Mis Pedidos",href:"/customer/dashboard"},{icon:e.jsx(ve,{size:16}),label:"Mis Projectos",href:"/customer/albums"},{icon:e.jsx(ye,{size:16}),label:"Configuración",href:"/account"},{icon:e.jsx(H,{size:16}),label:"Cerrar Sesión",onClick:D}],R=B.find(t=>t.correlative==="phone_whatsapp"),E=B.find(t=>t.correlative==="message_whatsapp");R==null||R.description,E==null||E.description;const[de,T]=a.useState(!1),[M,p]=a.useState(!1),[y,z]=a.useState(!1),[o,I]=a.useState(""),[v,u]=a.useState(!1),[O,K]=a.useState(!1),[x,f]=a.useState([]),[g,m]=a.useState(!1),[ue,X]=a.useState(!1),[d,w]=a.useState(-1),q=a.useRef([]),P=a.useRef(null),N=a.useRef(null),G=a.useRef(null),me=a.useRef(null),V=a.useRef(null),b=a.useRef(null),j=a.useRef(null),J=a.useRef([]),F=C.reduce((t,r)=>Number(t)+Number(r.quantity),0),he=C.reduce((t,r)=>{const s=r.discount?r.discount:r.price;return t+Number(r.quantity)*s},0),Y=async t=>{if(!t.trim()||t.length<2){f([]),m(!1);return}X(!0);try{const r=await fetch("/api/items/paginate",{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({take:8,skip:0,filter:[["name","contains",t],"or",["summary","contains",t],"or",["description","contains",t]],sort:[{selector:"name",desc:!1}],requireTotalCount:!1,with:"category,brand"})});if(!r.ok)throw new Error("Error en la búsqueda");const s=await r.json();s.status===200&&Array.isArray(s.data)?(f(s.data),m(s.data.length>0)):(f([]),m(!1))}catch(r){console.error("Error fetching search suggestions:",r),f([]),m(!1)}finally{X(!1)}},pe=t=>{I(t),w(-1),j.current&&clearTimeout(j.current),j.current=setTimeout(()=>{Y(t)},300)},A=()=>{m(!1),f([]),w(-1)},Q=t=>{if(!t)return;m(!1),z(!1);const r=t.slug?`/product/${t.slug}`:`/catalogo?search=${encodeURIComponent(t.name)}`;window.location.href=r};a.useEffect(()=>{function t(r){var s,c;P.current&&!P.current.contains(r.target)&&p(!1),N.current&&!N.current.contains(r.target)&&u(!1),G.current&&!G.current.contains(r.target)&&(o.trim()||z(!1)),b.current&&!b.current.contains(r.target)&&!((s=V.current)!=null&&s.contains(r.target))&&!((c=me.current)!=null&&c.contains(r.target))&&A()}return document.addEventListener("mousedown",t),document.addEventListener("touchstart",t),()=>{document.removeEventListener("mousedown",t),document.removeEventListener("touchstart",t)}},[o]),a.useEffect(()=>{const t=()=>{window.scrollY>10?K(!0):K(!1)};return t(),window.addEventListener("scroll",t,{passive:!0}),()=>window.removeEventListener("scroll",t)},[]),a.useEffect(()=>{const t=r=>{r.key==="Escape"&&(g?A():y&&(z(!1),I("")))};return(y||g)&&document.addEventListener("keydown",t),()=>{document.removeEventListener("keydown",t)}},[y,g]),a.useEffect(()=>()=>{j.current&&clearTimeout(j.current)},[]),a.useEffect(()=>{d>=0&&J.current[d]&&b.current&&J.current[d].scrollIntoView({block:"nearest",behavior:"smooth"})},[d]);const Z=l&&Array.isArray(l.roles)&&l.roles.some(t=>t.name==="Customer"),W=t=>{if(t.preventDefault(),A(),o.trim()){const r=o.trim();window.location.href=`/catalogo?search=${encodeURIComponent(r)}`}return!1};function U(t){const r=b.current,s=q.current[t];if(!r||!s)return;const c=r.getBoundingClientRect(),n=s.getBoundingClientRect();n.top<c.top?r.scrollTop-=c.top-n.top:n.bottom>c.bottom&&(r.scrollTop+=n.bottom-c.bottom)}const xe=t=>{if(!(!g||x.length===0))switch(t.key){case"ArrowDown":t.preventDefault(),w(r=>{const s=r<x.length-1?r+1:r;return setTimeout(()=>U(s),0),s});break;case"ArrowUp":t.preventDefault(),w(r=>{const s=r>0?r-1:0;return setTimeout(()=>U(s),0),s});break;case"Enter":t.preventDefault(),d>=0&&d<x.length?Q(x[d]):o.trim()&&W(t);break;case"Escape":m(!1);break}},fe=({suggestions:t,isLoading:r,onSelect:s,selectedIndex:c})=>g?e.jsx(i.div,{ref:b,initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute top-full left-0 right-0 bg-white border border-gray-200 rounded-lg shadow-lg z-[60] max-h-80 overflow-y-auto mt-1",children:r?e.jsx("div",{className:"p-4 text-center customtext-neutral-dark",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-primary border-t-transparent rounded-full animate-spin"}),"Buscando..."]})}):t.length>0?e.jsx("ul",{className:"py-2",children:t.map((n,ee)=>e.jsx("li",{ref:h=>q.current[ee]=h,children:e.jsxs("button",{"data-suggestion-button":!0,onMouseDown:h=>{h.preventDefault(),h.stopPropagation(),setTimeout(()=>s(n),0)},className:`w-full px-4 py-3 text-left hover:bg-gray-50 transition-colors duration-200 flex items-center gap-3 ${ee===c?"bg-primary/10 border-l-4 border-primary":""}`,type:"button",children:[e.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-gray-100 rounded-lg overflow-hidden",children:n.image?e.jsx("img",{src:`/api/items/media/${n.image}`,alt:n.name,className:"w-full h-full object-cover",onError:h=>{h.target.style.display="none"}}):e.jsx("div",{className:"w-full h-full flex items-center justify-center customtext-neutral-dark",children:e.jsx(ie,{size:16})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium customtext-neutral-dark truncate",children:n.name}),n.category&&e.jsx("div",{className:"text-sm customtext-neutral-dark truncate",children:n.category.name}),n.final_price&&e.jsxs("div",{className:"text-sm font-semibold customtext-primary",children:["S/ ",parseFloat(n.final_price).toFixed(2)]})]})]})},n.id))}):e.jsx("div",{className:"p-4 text-center customtext-neutral-dark",children:"No se encontraron productos"})}):null;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-20 lg:h-16 w-full"}),e.jsxs(i.nav,{className:"bg-[#F8F9FA] shadow-md fonts-paragraph w-full fixed top-0 left-0 z-[99]",style:{boxShadow:O?"0 2px 4px rgba(0,0,0,0.1)":"none"},initial:!1,animate:{boxShadow:O?"0 2px 8px rgba(0,0,0,0.1)":"none"},transition:{duration:.2},children:[e.jsx("div",{className:"max-w-7xl mx-auto px-primary lg:px-0",children:e.jsxs("div",{className:"flex w-full items-center justify-between h-20 lg:h-16",children:[e.jsx("div",{className:"flex md:hidden",children:e.jsx(i.button,{"aria-label":"Menú",onClick:()=>p(!M),className:"flex  md:hidden items-center justify-center bg-primary rounded-lg w-auto h-auto p-2 text-white fill-white transition-all duration-300",whileTap:{scale:.9},children:M?e.jsx(se,{className:"h-6 w-6"}):e.jsx(we,{className:"h-6 w-6"})})}),e.jsx(i.a,{href:"/",className:"flex-shrink-0",whileHover:{scale:1.03},whileTap:{scale:.97},children:e.jsx("img",{className:"h-6 lg:h-8 w-auto",src:`/assets/resources/logo.png?v=${crypto.randomUUID()}`,alt:te.APP_NAME,onError:t=>t.target.src="/api/thumbnail/null"})}),e.jsx("div",{className:"md:hidden ",children:e.jsxs("div",{className:`${y?"hidden":"flex"} items-center gap-4`,children:[l?e.jsxs("div",{ref:N,className:"relative",children:[e.jsx(i.button,{"aria-label":"user",className:"flex items-center gap-2 hover:customtext-primary transition-all duration-300 relative group",onClick:()=>u(!v),whileTap:{scale:.9},children:e.jsx("div",{className:"relative transform group-hover:scale-105 transition-transform duration-200",children:l.uuid?e.jsxs("div",{className:"relative",children:[e.jsx(re,{uuid:l.uuid,name:l.name,lastname:l.lastname,className:"!w-6 !h-6 rounded-full object-cover border-2 border-primary ring-secondary transition-all duration-300"}),e.jsxs("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-primary border-2 border-white rounded-full animate-pulse",children:[e.jsx("div",{className:"w-full h-full bg-primary rounded-full animate-ping opacity-75 absolute"}),e.jsx("div",{className:"w-full h-full bg-primary rounded-full"})]})]}):e.jsxs("div",{className:"relative",children:[e.jsx(k,{className:"customtext-primary border-2 border-primary rounded-full ring-secondary transition-all duration-300",width:"1.5rem"}),e.jsxs("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-primary border-2 border-white rounded-full animate-pulse",children:[e.jsx("div",{className:"w-full h-full bg-primary rounded-full animate-ping opacity-75 absolute"}),e.jsx("div",{className:"w-full h-full bg-primary rounded-full"})]})]})})}),e.jsx(S,{children:v&&e.jsx(i.div,{initial:"hidden",animate:"visible",exit:"exit",variants:_,className:"absolute z-50 top-full -left-20 bg-white shadow-xl border-t rounded-xl w-48 mt-2",children:e.jsx("div",{className:"p-4",children:e.jsx("ul",{className:"space-y-3",children:Z?$.map((t,r)=>e.jsx("li",{children:t.onClick?e.jsxs("button",{"aria-label":"menu-items",onClick:s=>{s.preventDefault(),s.stopPropagation(),u(!1),setTimeout(()=>{t.onClick()},150)},className:"flex w-full items-center gap-3 customtext-neutral-dark text-sm hover:customtext-primary hover:bg-gray-50 transition-all duration-300 p-2 rounded-lg",children:[t.icon,e.jsx("span",{children:t.label})]}):e.jsxs("a",{href:t.href,onClick:s=>{s.stopPropagation(),u(!1)},className:"flex items-center gap-3 customtext-neutral-dark text-sm hover:customtext-primary hover:bg-gray-50 transition-all duration-300 p-2 rounded-lg",children:[t.icon,e.jsx("span",{children:t.label})]})},r)):e.jsxs(e.Fragment,{children:[e.jsx("li",{children:e.jsxs("a",{href:"/admin/home",onClick:t=>{t.stopPropagation(),u(!1)},className:"flex items-center gap-3 customtext-neutral-dark text-sm hover:customtext-primary hover:bg-gray-50 transition-all duration-300 p-2 rounded-lg",children:[e.jsx(ae,{size:16}),e.jsx("span",{children:"Dashboard"})]})}),e.jsx("li",{children:e.jsxs("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),u(!1),setTimeout(()=>{D()},150)},className:"flex w-full items-center gap-3 customtext-neutral-dark text-sm hover:customtext-primary hover:bg-gray-50 transition-all duration-300 p-2 rounded-lg",children:[e.jsx(H,{size:16}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})})})})})]}):e.jsx("a",{href:"/iniciar-sesion",className:"flex items-center",children:e.jsx(k,{className:"customtext-primary",width:"1.5rem"})}),e.jsxs(i.button,{"aria-label":"cart",onClick:()=>T(!0),className:"flex items-center relative",whileTap:{scale:.9},children:[e.jsx(L,{className:"customtext-primary",width:"1.5rem"}),e.jsx("span",{className:"absolute -right-2 -top-2 inline-flex items-center justify-center w-4 h-4 bg-secondary text-white rounded-full text-[8px]",children:F})]})]})}),e.jsx("div",{className:"hidden md:block",children:e.jsx("div",{className:"ml-10 flex items-baseline space-x-4",children:e.jsxs(i.div,{className:"relative w-[450px] mx-auto",whileHover:{scale:1.01},children:[e.jsxs("form",{onSubmit:W,role:"search",children:[e.jsx("input",{ref:V,type:"search",name:"search",placeholder:"Buscar productos",value:o,onChange:t=>pe(t.target.value),onKeyDown:xe,onFocus:()=>{o.trim().length>=2&&Y(o)},className:"w-full pr-14 py-3 pl-4 border-0 rounded-full focus:ring-0 focus:outline-none ring-0 bg-sections-color",enterKeyHint:"search",inputMode:"search",autoComplete:"on",role:"searchbox","aria-label":"Buscar productos"}),e.jsx(i.button,{type:"submit",className:"absolute right-3 top-1/2 transform -translate-y-1/2 p-2 customtext-neutral-dark rounded-lg hover:customtext-primary transition-colors","aria-label":"Buscar",whileTap:{scale:.9},children:e.jsx(ie,{})})]}),e.jsx(S,{children:e.jsx(fe,{suggestions:x,isLoading:ue,onSelect:Q,selectedIndex:d})})]})})}),e.jsxs("div",{className:"hidden md:flex items-center space-x-4",children:[e.jsxs("div",{className:"relative",ref:N,children:[l?e.jsxs(i.button,{className:"customtext-neutral-light flex gap-2 hover:customtext-primary transition-colors duration-200 relative group",onClick:()=>u(!v),whileHover:{scale:1.03},whileTap:{scale:.97},children:[e.jsx("div",{className:"relative transform group-hover:scale-105 transition-transform duration-200",children:l.uuid?e.jsxs("div",{className:"relative",children:[e.jsx(re,{uuid:l.uuid,name:l.name,lastname:l.lastname,className:"w-8 h-8 rounded-full object-cover border-2 border-primary ring-secondary transition-all duration-300"}),e.jsxs("div",{className:"absolute -bottom-[-0.115rem] -right-0.5 w-3.5 h-3.5 bg-primary border-2 border-white rounded-full animate-pulse",children:[e.jsx("div",{className:"w-full h-full bg-primary rounded-full animate-ping opacity-75 absolute"}),e.jsx("div",{className:"w-full h-full bg-primary rounded-full"})]})]}):e.jsxs("div",{className:"relative",children:[e.jsx(k,{className:"customtext-primary border-2 border-primary rounded-full ring-secondary group-hover:ring-green-300 transition-all duration-300"}),e.jsxs("div",{className:"absolute -bottom-0.5 -right-0.5 w-3.5 h-3.5 bg-primary border-2 border-white rounded-full animate-pulse",children:[e.jsx("div",{className:"w-full h-full bg-primary rounded-full animate-ping opacity-75 absolute"}),e.jsx("div",{className:"w-full h-full bg-primary rounded-full"})]})]})}),e.jsx("span",{className:"hidden md:inline",children:l.name})]}):e.jsxs(i.a,{href:"/iniciar-sesion",className:"customtext-neutral-light hover:customtext-primary transition-colors duration-200 flex items-center gap-2",whileHover:{scale:1.03},whileTap:{scale:.97},children:[e.jsx(k,{className:"h-5 w-5"}),e.jsx("span",{className:"hidden md:inline",children:"Iniciar Sesión"})]}),e.jsx(S,{children:v&&e.jsx(i.div,{initial:"hidden",animate:"visible",exit:"exit",variants:_,className:"absolute z-50 top-full right-0 bg-white shadow-xl border-t rounded-xl w-48 mt-2",children:e.jsx("div",{className:"p-4",children:e.jsx("ul",{className:"space-y-3",children:Z?$.map((t,r)=>e.jsx("li",{children:t.onClick?e.jsxs("button",{"aria-label":"menu-items",onClick:t.onClick,className:"flex w-full items-center gap-3 customtext-neutral-dark text-sm hover:customtext-primary transition-colors duration-300",children:[t.icon,e.jsx("span",{children:t.label})]}):e.jsxs("a",{href:t.href,className:"flex items-center gap-3 customtext-neutral-dark text-sm hover:customtext-primary transition-colors duration-300",children:[t.icon,e.jsx("span",{children:t.label})]})},r)):e.jsxs(e.Fragment,{children:[e.jsx("li",{children:e.jsxs("a",{href:"/admin/home",className:"flex items-center gap-3 customtext-neutral-dark text-sm hover:customtext-primary transition-colors duration-300",children:[e.jsx(ae,{size:16}),e.jsx("span",{children:"Dashboard"})]})}),e.jsx("li",{children:e.jsxs("a",{href:"#",onClick:D,className:"flex items-center gap-3 customtext-neutral-dark text-sm hover:customtext-primary transition-colors duration-300",children:[e.jsx(H,{size:16}),e.jsx("span",{children:"Cerrar Sesión"})]})})]})})})})})]}),e.jsxs(i.button,{onClick:()=>T(!0),className:"relative customtext-neutral-light hover:customtext-primary transition-colors duration-200",whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsx(L,{className:"h-5 w-5"}),e.jsx(i.span,{className:"h-3 w-3 bg-secondary absolute -top-1 -right-2 text-[10px] flex items-center justify-center text-white rounded-full",animate:F>0?{scale:[1,1.2,1]}:{},transition:{repeat:1/0,duration:1.5},children:F})]}),e.jsxs("div",{className:"hidden md:block ml-2 text-left",children:[e.jsx("p",{className:"text-xs font-medium",children:"Tu carrito"}),e.jsxs("p",{className:"text-sm font-bold",children:["S/ ",he.toFixed(2)]})]})]})]})}),e.jsx(S,{children:M&&e.jsxs(e.Fragment,{children:[e.jsx(i.div,{initial:{opacity:0,backdropFilter:"blur(0px)"},animate:{opacity:1,backdropFilter:"blur(8px)"},exit:{opacity:0,backdropFilter:"blur(0px)"},transition:{duration:.3},className:"fixed inset-0 bg-black/20 backdrop-blur-lg z-[998]",onClick:()=>p(!1)}),e.jsxs(i.div,{initial:{x:"-100%",opacity:0},animate:{x:0,opacity:1},exit:{x:"-100%",opacity:0},transition:{type:"spring",damping:25,stiffness:200,mass:1},className:"md:hidden bg-white w-[90%] max-w-md h-screen fixed left-0 top-0 z-[999] shadow-[0_0_50px_rgba(0,0,0,0.1)] rounded-r-[1.5rem]",ref:P,children:[e.jsxs("div",{className:"h-24 flex items-center justify-between px-6",children:[e.jsxs(i.a,{href:"/",className:"flex-shrink-0 relative",whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsx("div",{className:"relative z-10",children:e.jsx("img",{className:"h-7 w-auto",src:`/assets/resources/logo.png?v=${crypto.randomUUID()}`,alt:te.APP_NAME,onError:t=>t.target.src="/api/thumbnail/null"})}),e.jsx("div",{className:"absolute inset-0 bg-primary/5 rounded-full transform rotate-6 scale-110"})]}),e.jsx(i.button,{whileHover:{scale:1.1,rotate:90},whileTap:{scale:.9},onClick:()=>p(!1),className:"p-0 rounded-xl bg-gray-50 hover:bg-gray-100 transition-all duration-300",children:e.jsx(se,{className:"h-6 w-6 text-gray-600"})})]}),e.jsx("div",{className:"overflow-y-auto h-[calc(100vh-5rem)] pb-safe",children:e.jsx(be,{search:o,setSearch:I,pages:[],items:le,onClose:()=>p(!1),startFromCategories:!0})})]})]})}),e.jsx(ge,{data:oe,cart:C,setCart:ce,modalOpen:de,setModalOpen:T})]})]})};export{ut as default};
