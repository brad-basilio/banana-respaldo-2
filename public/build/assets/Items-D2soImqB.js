import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{B as _e}from"./Base-B2AngFVl.js";import{S as A}from"./SwitchFormGroup-CGYpv_4Q.js";import{T as Pe}from"./TextareaFormGroup-DVzYJtLM.js";import{r as a}from"./index-BH53Isel.js";import{c as De}from"./ReactAppend-DTVVXReZ.js";import{s as G}from"./server.browser-Bf4gQIc7.js";import{S as Te}from"./ProductCard-CRhBSmWZ.js";import{I as ue}from"./ItemsRest-BaxsCjQO.js";import{C as $e}from"./CanvasPresetsRest-CiIj_si8.js";import{M as le}from"./Modal-B6PZ5H4-.js";import{T as Ee}from"./Table-DitbKwtZ.js";import{I as V}from"./ImageFormGroup-BPR9pDAU.js";import{I}from"./InputFormGroup-D5I6zpZc.js";import{Q as Ae}from"./QuillFormGroup-D8zDHSfJ.js";import{S as ie}from"./SelectAPIFormGroup-q_4mmuE_.js";import{S as ne}from"./SelectFormGroup-BmhC2uob.js";import{D as oe}from"./DxButton-DV0H-ZcL.js";import{C as Ge}from"./CreateReactScript-DERNRfBB.js";import{N as me}from"./Number2Currency-e57Tgsuk.js";import{R as k}from"./ReactAppend-D7S498fx.js";import{S as de}from"./SetSelectValue-UxyCmHse.js";import"./main-6DCdASTx.js";import{t as Be}from"./index-BZYhE2TF.js";import"./index-yBjzXJbu.js";import"./Global-D6eBBAMK.js";import"./tippy-react.esm-BWiGTO87.js";import"./index-rimy3MAc.js";import"./index-fNjTmf9T.js";/* empty css              */import"./Logout-TGKOqZqZ.js";import"./MenuItemContainer-CY0sLPNq.js";import"./index.esm-POOiSFi2.js";import"./index-Dq7h7Pqt.js";import"./___vite-browser-external_commonjs-proxy-0zb4Agf2.js";import"./BasicRest-C4m6wu80.js";/* empty css               */import"./General-BmbBKdsB.js";import"./LaravelSession-Dz9cpV3l.js";const Oe=({label:N,structure:f,value:y=[],onChange:h,typeOptions:C=[]})=>{const[x,g]=a.useState([]),b=typeof f=="object"&&!Array.isArray(f);a.useEffect(()=>{g(b?y.map(i=>{var m,d;return{...i,type:((m=i.type)==null?void 0:m.charAt(0).toUpperCase())+((d=i.type)==null?void 0:d.slice(1).toLowerCase())}}):y.map(i=>typeof i=="object"?i.feature||"":i))},[y]);const S=()=>{const i=b?{...f}:"",m=[...x,i];g(m),h(m)},u=i=>{const m=x.filter((d,o)=>o!==i);g(m),h(m)},j=(i,m,d)=>{const o=[...x];b?o[i][m]=m==="type"?d.charAt(0).toUpperCase()+d.slice(1).toLowerCase():d:o[i]=d,g(o),h(o)},R=(i,m)=>i==="title"&&m==="Icono"?"Url de icono":i;return e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:N}),x.map((i,m)=>e.jsx("div",{className:"row g-2 mb-2",children:b?e.jsxs(e.Fragment,{children:[Object.keys(f).map(d=>e.jsx("div",{className:"col",children:d==="type"?e.jsxs("select",{className:"form-select",value:i[d]||"",onChange:o=>j(m,d,o.target.value),children:[e.jsx("option",{value:"",children:"Seleccionar..."}),C.map(o=>e.jsx("option",{value:o,children:o},o))]}):e.jsx("input",{type:"text",className:"form-control",value:i[d]||"",onChange:o=>j(m,d,o.target.value),placeholder:R(d,i.type)})},d)),e.jsx("div",{className:"col-auto",children:e.jsx("button",{type:"button",className:"btn btn-danger",onClick:()=>u(m),children:"X"})})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"col",children:e.jsx("input",{type:"text",className:"form-control",value:i,onChange:d=>j(m,null,d.target.value),placeholder:"Característica"})}),e.jsx("div",{className:"col-auto",children:e.jsx("button",{type:"button",className:"btn btn-danger",onClick:()=>u(m),children:"X"})})]})},m)),e.jsx("button",{type:"button",className:"btn btn-primary mt-2 d-block ",onClick:S,children:"+ Agregar"})]})},Me=new ue,Le=({gridRef:N,modalRef:f})=>{const[y,h]=a.useState(null),[C,x]=a.useState(!1),[g,b]=a.useState(""),[S,u]=a.useState(!1),j=i=>{h(i.target.files[0])},R=async()=>{var m,d;if(!y){b("Por favor, selecciona un archivo."),u(!0);return}const i=new FormData;i.append("file",y),x(!0);try{const o=await Me.importData(i);if(console.log(o),o.error){const F=Array.isArray(o.error)?o.error.join(`
`):o.error;b(`Error en la importación:
${F}`),u(!0)}else b(o.message),u(!1),$(N.current).dxDataGrid("instance").refresh(),$(f.current).modal("hide"),Be.success("Importacion completada con exito",{description:"Todos tus productos han sido importados correctamente.",duration:3e3,position:"bottom-center",richColors:!0})}catch(o){b("Error al importar: "+(((d=(m=o.response)==null?void 0:m.data)==null?void 0:d.error)||o.message)),u(!0)}x(!1)};return e.jsx("div",{className:"bg-white",children:e.jsxs("div",{className:"modal-content",children:[e.jsx("div",{className:"mb-1",children:e.jsx("a",{href:"/assets/img/salafabulosa/formato_import_products.xlsx",download:!0,children:"Descargar formato .xlsx"})}),e.jsx("div",{children:e.jsx("input",{className:"form-control",type:"file",accept:".xlsx",onChange:j})}),e.jsx("button",{onClick:R,disabled:C,className:"btn btn-primary mt-2",type:"button",children:C?"Subiendo...":"Subir Archivo"}),g&&e.jsx("div",{className:`alert ${S?"alert-danger":"alert-success"} mt-2`,role:"alert",children:e.jsx("div",{className:"alert-message",children:g})})]})})},B=new ue,He=new $e,Ue=({categories:N,brands:f,collections:y})=>{//!FALTA EDIT AND DELETEDE GALERIA
const[h,C]=a.useState([]),[x,g]=a.useState([]),[b,S]=a.useState(null),u=a.useRef(),j=a.useRef(),R=a.useRef(),i=a.useRef(),m=a.useRef(),d=a.useRef(),o=a.useRef(),F=a.useRef(),q=a.useRef(),z=a.useRef(),O=a.useRef(),J=a.useRef(),W=a.useRef();a.useRef();const Q=a.useRef(),_=a.useRef(),M=a.useRef(),L=a.useRef(),H=a.useRef(),X=a.useRef(),pe=a.useRef([]),[fe,se]=a.useState(!1),[he,xe]=a.useState(null),[Ve,qe]=a.useState(null),[ze,ge]=a.useState(""),[w,v]=a.useState([]),re=a.useRef(),be=s=>{const c=Array.from(s.target.files).map(t=>({file:t,url:URL.createObjectURL(t)}));v(t=>[...t,...c])},je=s=>{s.preventDefault();const c=Array.from(s.dataTransfer.files).map(t=>({file:t,url:URL.createObjectURL(t)}));v(t=>[...t,...c])},ve=s=>{s.preventDefault()},Ne=(s,r)=>{s.preventDefault(),w[r].id?v(t=>t.map((l,p)=>p===r?{...l,toDelete:!0}:l)):v(t=>t.filter((l,p)=>p!==r))};a.useEffect(()=>{(async()=>{try{const r=await He.paginate({take:100,skip:0});r!=null&&r.data&&g(r.data)}catch(r){console.error("Error cargando presets:",r)}})()},[]),a.useEffect(()=>{if(h&&h.images){const s=h.images.map(r=>({id:r.id,url:`/storage/images/item/${r.url}`}));v(s)}},[h]);const ae=s=>{var r,c,t;if(C(s||null),s!=null&&s.id?se(!0):se(!1),ge(s!=null&&s.pdf?`/storage/images/item/${s.pdf}`:""),R.current.value=(s==null?void 0:s.id)||"",$(i.current).val((s==null?void 0:s.category_id)||null).trigger("change"),de(m.current,(r=s==null?void 0:s.subcategory)==null?void 0:r.id,(c=s==null?void 0:s.subcategory)==null?void 0:c.name),d.current.value=(s==null?void 0:s.name)||"",W.current.value=(s==null?void 0:s.sku)||"",o.current.value=(s==null?void 0:s.summary)||"",F.current.value=(s==null?void 0:s.price)||0,q.current.value=(s==null?void 0:s.discount)||0,$(Q.current).val((s==null?void 0:s.canvas_preset_id)||null).trigger("change"),_.current.value=(s==null?void 0:s.pages)||1,de(z.current,(s==null?void 0:s.tags)??[],"id","name"),O.current.value=null,M.current.value=null,L.current.value=null,H.current.value=null,O.image.src=`/storage/images/item/${(s==null?void 0:s.image)??"undefined"}`,M.image.src=`/storage/images/item/${(s==null?void 0:s.cover_image)??"undefined"}`,L.image.src=`/storage/images/item/${(s==null?void 0:s.content_image)??"undefined"}`,H.image.src=`/storage/images/item/${(s==null?void 0:s.back_cover_image)??"undefined"}`,Y(!!(s!=null&&s.cover_image)),Z(!!(s!=null&&s.back_cover_image)),J.editor.root.innerHTML=(s==null?void 0:s.description)??"",s!=null&&s.images){const l=s.images.map(p=>({id:p.id,url:`/storage/images/item/${p.url}`}));v(l)}else v([]);s!=null&&s.specifications?K(s.specifications.map(l=>({type:l.type,title:l.title,description:l.description,image:l.image||""}))):K([]),Ie(((t=s==null?void 0:s.features)==null?void 0:t.map(l=>typeof l=="object"?l:{feature:l}))||[]),X.current.value=s==null?void 0:s.stock,s!=null&&s.id||(Y(!1),Z(!1)),$(j.current).modal("show")},ye=async s=>{s.preventDefault();const r=Ce.filter(n=>{var E;return typeof n=="string"?n.trim()!=="":typeof n=="object"?((E=n.feature)==null?void 0:E.trim())!=="":!1}),c=te.filter(n=>n.title&&n.title.trim()!==""||n.description&&n.description.trim()!==""),t={id:R.current.value||void 0,category_id:i.current.value,subcategory_id:m.current.value,name:d.current.value,sku:W.current.value,summary:o.current.value,price:F.current.value,discount:q.current.value,tags:$(z.current).val(),description:J.current.value,stock:X.current.value,canvas_preset_id:Q.current.value||null,pages:_.current.value,features:r,specifications:c,linkvideo:"",has_cover_image:P,has_back_cover_image:D},l=new FormData;for(const n in t)n==="features"||n==="specifications"?l.append(n,JSON.stringify(t[n])):l.append(n,t[n]);const p=O.current.files[0];p&&l.append("image",p);const T=L.current.files[0];if(T&&l.append("content_image",T),P){const n=M.current.files[0];n&&l.append("cover_image",n)}if(D){const n=H.current.files[0];n&&l.append("back_cover_image",n)}w.forEach((n,E)=>{n.toDelete||(n.file?l.append(`gallery[${E}]`,n.file):l.append(`gallery_ids[${E}]`,n.id))});const ce=w.filter(n=>n.toDelete).map(n=>parseInt(n.id,10));ce.length>0&&l.append("deleted_images",JSON.stringify(ce)),console.log(l),await B.save(l)&&($(u.current).dxDataGrid("instance").refresh(),$(j.current).modal("hide"),v([]))},Re=async({id:s,value:r})=>{await B.boolean({id:s,field:"visible",value:r})&&$(u.current).dxDataGrid("instance").refresh()},U=async({id:s,field:r,value:c})=>{await B.boolean({id:s,field:r,value:c})&&$(u.current).dxDataGrid("instance").refresh()},we=async s=>{const{isConfirmed:r}=await Te.fire({title:"Eliminar curso",text:"¿Estás seguro de eliminar este curso?",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"});!r||!await B.delete(s)||$(u.current).dxDataGrid("instance").refresh()},[Ce,Ie]=a.useState([]),[te,K]=a.useState([]),[P,Y]=a.useState(!1),[D,Z]=a.useState(!1),ke=["Principal","General","Icono"],[Je,We]=a.useState(!1),ee=a.useRef(),Se=s=>{const r=x.find(c=>c.id===s);S(r),r&&_.current&&(_.current.value=r.pages||1)},Fe=()=>{$(ee.current).modal("show")};return e.jsxs(e.Fragment,{children:[e.jsx(Ee,{gridRef:u,title:"Items",rest:B,toolBar:s=>{s.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(u.current).dxDataGrid("instance").refresh()}}),s.unshift({widget:"dxButton",location:"after",options:{icon:"plus",text:"Agregar",hint:"Agregar",onClick:()=>ae()}}),s.unshift({widget:"dxButton",location:"after",options:{icon:"upload",text:"Importar Datos",hint:"Importar Datos",onClick:()=>Fe()}})},exportable:!0,exportableName:"Items",columns:[{dataField:"id",caption:"ID",visible:!1},{dataField:"category.name",caption:"Categoría",width:"120px",cellTemplate:(s,{data:r})=>{var c,t,l;s.html(G.renderToString(e.jsxs(e.Fragment,{children:[e.jsx("b",{className:"d-block fst-italic text-muted",children:(c=r.collection)==null?void 0:c.name}),e.jsx("b",{className:"d-block",children:(t=r.category)==null?void 0:t.name}),e.jsx("small",{className:"text-muted",children:(l=r.subcategory)==null?void 0:l.name})]})))}},{dataField:"subcategory.name",caption:"Subcategoría",visible:!1},{dataField:"canvas_preset.name",caption:"Preset",width:"140px",cellTemplate:(s,{data:r})=>{r.canvas_preset?s.html(G.renderToString(e.jsxs(e.Fragment,{children:[e.jsx("b",{className:"d-block",children:r.canvas_preset.name}),e.jsxs("small",{className:"text-muted",children:[r.canvas_preset.width,"x",r.canvas_preset.height,"cm",r.pages&&` • ${r.pages}p`]})]}))):s.html(G.renderToString(e.jsx("i",{className:"text-muted",children:"Sin preset"})))}},{dataField:"name",caption:"Nombre",minWidth:"300px",cellTemplate:(s,{data:r})=>{const t=((l,p)=>{if(!l)return"";const T=l.split(" ");return T.length>p?T.slice(0,p).join(" ")+"...":l})(r.summary,12);s.html(G.renderToString(e.jsxs(e.Fragment,{children:[e.jsx("b",{children:r.name}),e.jsx("br",{}),e.jsx("span",{children:t})]})))}},{dataField:"final_price",caption:"Precio",dataType:"number",width:"75px",cellTemplate:(s,{data:r})=>{s.html(G.renderToString(e.jsxs(e.Fragment,{children:[r.discount>0&&e.jsxs("small",{className:"d-block text-muted",style:{textDecoration:"line-through"},children:["S/.",me(r.price)]}),e.jsxs("span",{children:["S/.",me(r.discount>0?r.discount:r.price)]})]})))}},{dataField:"image",caption:"Imagen",width:"90px",allowFiltering:!1,cellTemplate:(s,{data:r})=>{console.log("data.image",r.image),k(s,e.jsx("img",{src:`/storage/images/item/${r.image}`,style:{width:"80px",height:"48px",objectFit:"cover",objectPosition:"center",borderRadius:"4px"},onError:c=>c.target.src="/api/cover/thumbnail/null"}))}},{dataField:"is_new",caption:"Nuevo",dataType:"boolean",width:"80px",cellTemplate:(s,{data:r})=>{const c=r.is_new===1||r.is_new==="1"||r.is_new===!0;k(s,e.jsx(A,{checked:c,onChange:t=>U({id:r.id,field:"is_new",value:t.target.checked?1:0})}))}},{dataField:"offering",caption:"En oferta",dataType:"boolean",width:"80px",cellTemplate:(s,{data:r})=>{const c=r.offering===1||r.offering==="1"||r.offering===!0;k(s,e.jsx(A,{checked:c,onChange:t=>U({id:r.id,field:"offering",value:t.target.checked?1:0})}))}},{dataField:"recommended",caption:"Recomendado",dataType:"boolean",width:"80px",cellTemplate:(s,{data:r})=>{const c=r.recommended===1||r.recommended==="1"||r.recommended===!0;k(s,e.jsx(A,{checked:c,onChange:t=>U({id:r.id,field:"recommended",value:t.target.checked?1:0})}))}},{dataField:"featured",caption:"Destacado",dataType:"boolean",width:"80px",cellTemplate:(s,{data:r})=>{const c=r.featured===1||r.featured==="1"||r.featured===!0;k(s,e.jsx(A,{checked:c,onChange:t=>U({id:r.id,field:"featured",value:t.target.checked?1:0})}))}},{dataField:"visible",caption:"Visible",dataType:"boolean",width:"80px",cellTemplate:(s,{data:r})=>{k(s,e.jsx(A,{checked:r.visible,onChange:c=>Re({id:r.id,value:c.target.checked})}))}},{caption:"Acciones",width:"100px",cellTemplate:(s,{data:r})=>{s.css("text-overflow","unset"),s.append(oe({className:"btn btn-xs btn-soft-primary",title:"Editar",icon:"fa fa-pen",onClick:()=>ae(r)})),s.append(oe({className:"btn btn-xs btn-soft-danger",title:"Eliminar",icon:"fa fa-trash",onClick:()=>we(r.id)}))},allowFiltering:!1,allowExporting:!1}]}),e.jsx(le,{modalRef:j,title:fe?"Editar item":"Agregar item",onSubmit:ye,size:"xl",children:e.jsxs("div",{className:"container-fluid",id:"principal-container",children:[e.jsx("input",{ref:R,type:"hidden"}),e.jsxs("div",{className:"card mb-4",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h6",{className:"card-title mb-0",children:[e.jsx("i",{className:"fa fa-info-circle me-2"}),"Información Básica"]})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-4",children:e.jsx(I,{eRef:W,label:"SKU",required:!0})}),e.jsx("div",{className:"col-md-8",children:e.jsx(I,{eRef:d,label:"Nombre del Producto",required:!0})})]}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-md-12",children:e.jsx(Pe,{eRef:o,label:"Resumen",rows:3})})})]})]}),e.jsxs("div",{className:"card mb-4",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h6",{className:"card-title mb-0",children:[e.jsx("i",{className:"fa fa-tags me-2"}),"Categorización"]})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(ne,{eRef:i,label:"Categoría",required:!0,dropdownParent:"#principal-container",onChange:s=>xe(s.target.value),children:N.map((s,r)=>e.jsx("option",{value:s.id,children:s.name},r))})}),e.jsx("div",{className:"col-md-6",children:e.jsx(ie,{eRef:m,label:"Subcategoría",searchAPI:"/api/admin/subcategories/paginate",searchBy:"name",filter:["category_id","=",he],dropdownParent:"#principal-container"})})]}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-md-12",children:e.jsx(ie,{id:"tags",eRef:z,searchAPI:"/api/admin/tags/paginate",searchBy:"name",label:"Tags",dropdownParent:"#principal-container",tags:!0,multiple:!0})})})]})]}),e.jsxs("div",{className:"card mb-4",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h6",{className:"card-title mb-0",children:[e.jsx("i",{className:"fa fa-cog me-2"}),"Configuración de Canvas y Producto"]})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs(ne,{eRef:Q,label:"Preset de Canvas",dropdownParent:"#principal-container",onChange:s=>Se(s.target.value),children:[e.jsx("option",{value:"",children:"Seleccionar preset..."}),x.map(s=>e.jsxs("option",{value:s.id,children:[s.name," (",s.width,"x",s.height,"cm, ",s.pages,"p)"]},s.id))]})}),e.jsx("div",{className:"col-md-3",children:e.jsx(I,{eRef:_,label:"Número de Páginas",type:"number",min:"1",defaultValue:"1"})}),e.jsx("div",{className:"col-md-3",children:e.jsx(I,{label:"Stock",eRef:X,type:"number"})})]})})]}),e.jsxs("div",{className:"card mb-4",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h6",{className:"card-title mb-0",children:[e.jsx("i",{className:"fa fa-dollar-sign me-2"}),"Precios"]})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(I,{eRef:F,label:"Precio Regular",type:"number",step:"0.01",required:!0})}),e.jsx("div",{className:"col-md-6",children:e.jsx(I,{eRef:q,label:"Precio con Descuento",type:"number",step:"0.01"})})]})})]}),e.jsxs("div",{className:"card mb-4",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h6",{className:"card-title mb-0",children:[e.jsx("i",{className:"fa fa-images me-2"}),"Imágenes del Producto"]})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"row mb-4",children:[e.jsx("div",{className:"col-12",children:e.jsxs("h6",{className:"text-primary mb-3",children:[e.jsx("i",{className:"fa fa-star me-2"}),"Imagen Principal"]})}),e.jsx("div",{className:"col-md-3",children:e.jsx(V,{eRef:O,label:"Imagen Principal",aspect:1,col:"col-12"})})]}),e.jsxs("div",{className:"row mb-4",children:[e.jsx("div",{className:"col-12",children:e.jsxs("h6",{className:"text-info mb-3",children:[e.jsx("i",{className:"fa fa-layer-group me-2"}),"Imágenes Específicas del Producto"]})}),e.jsxs("div",{className:"col-md-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx("span",{className:"badge bg-success",children:"Obligatoria"})}),e.jsx(V,{eRef:L,label:"Imagen de Contenido *",aspect:1,col:"col-12"})]}),e.jsxs("div",{className:"col-md-4",children:[e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"form-check",children:[e.jsx("input",{className:"form-check-input",type:"checkbox",id:"hasCoverImage",checked:P,onChange:s=>Y(s.target.checked)}),e.jsx("label",{className:"form-check-label fw-bold",htmlFor:"hasCoverImage",children:"Incluir Imagen de Portada"})]}),e.jsx("small",{className:"text-muted",children:"Opcional para productos como tazas, etc."})]}),P&&e.jsx(V,{eRef:M,label:"Imagen de Portada",aspect:1,col:"col-12"}),!P&&e.jsxs("div",{className:"border-2 border-dashed p-4 text-center",style:{borderColor:"#dee2e6",backgroundColor:"#f8f9fa",borderRadius:"8px",minHeight:"120px"},children:[e.jsx("i",{className:"fa fa-image fa-2x text-muted mb-2"}),e.jsx("p",{className:"text-muted mb-0",children:"Imagen de portada deshabilitada"}),e.jsx("small",{className:"text-muted",children:"Activa el checkbox para habilitar"})]})]}),e.jsxs("div",{className:"col-md-4",children:[e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"form-check",children:[e.jsx("input",{className:"form-check-input",type:"checkbox",id:"hasBackCoverImage",checked:D,onChange:s=>Z(s.target.checked)}),e.jsx("label",{className:"form-check-label fw-bold",htmlFor:"hasBackCoverImage",children:"Incluir Imagen de Contraportada"})]}),e.jsx("small",{className:"text-muted",children:"Opcional para productos como tazas, etc."})]}),D&&e.jsx(V,{eRef:H,label:"Imagen de Contraportada",aspect:1,col:"col-12"}),!D&&e.jsxs("div",{className:"border-2 border-dashed p-4 text-center",style:{borderColor:"#dee2e6",backgroundColor:"#f8f9fa",borderRadius:"8px",minHeight:"120px"},children:[e.jsx("i",{className:"fa fa-image fa-2x text-muted mb-2"}),e.jsx("p",{className:"text-muted mb-0",children:"Imagen de contraportada deshabilitada"}),e.jsx("small",{className:"text-muted",children:"Activa el checkbox para habilitar"})]})]})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12",children:e.jsxs("h6",{className:"text-success mb-3",children:[e.jsx("i",{className:"fa fa-images me-2"}),"Galería de Imágenes Adicionales"]})}),e.jsx("div",{className:"col-md-5",children:e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label fw-bold",children:"Subir Nuevas Imágenes"}),e.jsx("input",{id:"input-item-gallery",ref:re,type:"file",multiple:!0,accept:"image/*",hidden:!0,onChange:be}),e.jsx("div",{className:"border-2 border-dashed p-4 text-center position-relative",style:{borderColor:"#28a745",backgroundColor:"#f8fff9",cursor:"pointer",borderRadius:"12px",minHeight:"180px",transition:"all 0.3s ease"},onClick:()=>re.current.click(),onDrop:je,onDragOver:ve,onMouseEnter:s=>{s.target.style.borderColor="#20c997",s.target.style.backgroundColor="#f0fff4"},onMouseLeave:s=>{s.target.style.borderColor="#28a745",s.target.style.backgroundColor="#f8fff9"},children:e.jsxs("div",{className:"d-flex flex-column align-items-center justify-content-center h-100",children:[e.jsx("i",{className:"fa fa-cloud-upload-alt fa-3x text-success mb-3"}),e.jsx("h6",{className:"text-success mb-2",children:"Agregar Imágenes"}),e.jsxs("p",{className:"text-muted mb-0 small",children:["Arrastra y suelta archivos aquí",e.jsx("br",{}),"o haz clic para seleccionar"]}),e.jsx("small",{className:"text-muted mt-2",children:"Formatos: JPG, PNG, WebP"})]})})]})}),e.jsx("div",{className:"col-md-7",children:e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{className:"form-label fw-bold",children:["Imágenes de la Galería",w.length>0&&e.jsx("span",{className:"badge bg-primary ms-2",children:w.length})]}),e.jsx("div",{className:"border rounded p-3",style:{minHeight:"180px",backgroundColor:"#f8f9fa",overflowY:"auto",maxHeight:"300px"},children:w.length===0?e.jsx("div",{className:"h-100 d-flex align-items-center justify-content-center",children:e.jsxs("div",{className:"text-center text-muted",children:[e.jsx("i",{className:"fa fa-image fa-2x mb-2 opacity-50"}),e.jsx("p",{className:"mb-0",children:"No hay imágenes en la galería"}),e.jsx("small",{children:"Las imágenes aparecerán aquí después de subirlas"})]})}):e.jsx("div",{className:"d-flex flex-wrap gap-3",children:w.map((s,r)=>e.jsxs("div",{className:"position-relative",style:{width:"90px",height:"90px"},children:[e.jsx("img",{src:`${s.url}`,alt:`Imagen ${r+1}`,className:"shadow-sm",style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"8px",border:"2px solid #e9ecef"}}),e.jsx("button",{type:"button",className:"btn btn-danger btn-sm position-absolute shadow",style:{top:"-8px",right:"-8px",width:"24px",height:"24px",padding:"0",borderRadius:"50%",fontSize:"12px",lineHeight:"1",display:"flex",alignItems:"center",justifyContent:"center"},onClick:c=>Ne(c,r),title:"Eliminar imagen",children:e.jsx("i",{className:"fa fa-times"})})]},r))})})]})})]})]})]}),e.jsxs("div",{className:"card mb-4",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h6",{className:"card-title mb-0",children:[e.jsx("i",{className:"fa fa-list me-2"}),"Características y Especificaciones"]})}),e.jsx("div",{className:"card-body",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-md-12",children:e.jsx(Oe,{ref:pe,label:"Especificaciones",structure:{type:"",title:"",description:""},value:te,onChange:K,typeOptions:ke})})})})]}),e.jsxs("div",{className:"card mb-4",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h6",{className:"card-title mb-0",children:[e.jsx("i",{className:"fa fa-align-left me-2"}),"Descripción Detallada"]})}),e.jsx("div",{className:"card-body",children:e.jsx(Ae,{eRef:J,label:"Descripción"})})]})]})}),e.jsx(le,{modalRef:ee,title:"Importar Datos",size:"sm",children:e.jsx(Le,{gridRef:u,modalRef:ee})})]})};Ge((N,f)=>{De.createRoot(N).render(e.jsx(_e,{...f,title:"Items",children:e.jsx(Ue,{...f})}))});
