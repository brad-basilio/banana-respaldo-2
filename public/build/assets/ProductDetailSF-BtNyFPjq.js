import{j as s}from"./AboutSimple-Cf8x2fCZ.js";import{r as o}from"./index-BH53Isel.js";import{I as Y}from"./ItemsRest-DNMnCrXV.js";import{S as Z}from"./ProductCard-C2H10lUi.js";import"./main-BSEyQEJW.js";import"./BlogCarousel-DpjB9swg.js";/* empty css               */import"./BlogCarrusel-BQQNSm4R.js";import"./ProductMakita-GdszJgiY.js";import"./ProductNavigation-CMzafqaW.js";import{C as V}from"./HeaderSearch-DXZLURpX.js";import{i as ss}from"./tippy-react.esm-BWiGTO87.js";/* empty css              */import es from"./ProductNavigationSwiper-BWGidimb.js";import{C as as}from"./circle-check-CPWcvHtC.js";import{C as ts}from"./chevron-up-D78jyEhP.js";import{C as rs}from"./chevron-down-DS-mdh9v.js";import"./index-yBjzXJbu.js";import"./BasicRest-B7R7ttyn.js";import"./index-CMHsc23u.js";import"./index-rimy3MAc.js";import"./index-fNjTmf9T.js";import"./___vite-browser-external_commonjs-proxy-0zb4Agf2.js";import"./proxy-BTYtmp9V.js";import"./eye-CKCH9ORv.js";import"./createLucideIcon-Cy5Ya80P.js";import"./PaymentModal-BB1JXzaZ.js";import"./index-Chjiymov.js";import"./CartItemRow-4VUVjpPz.js";import"./Number2Currency-e57Tgsuk.js";import"./trash-2-DK1wnsDn.js";import"./plus-Bot15Khs.js";import"./index-CFtDjG4d.js";import"./adjustTextColor-DJKJvkxA.js";import"./ProductCardColors-u_a58mHj.js";import"./navigation-CLaRFmip.js";import"./create-element-if-not-defined-BzEE3aGu.js";import"./arrow-left-DT1uGo8v.js";import"./arrow-right-DR00rP9v.js";function Ls({item:e,data:I,setCart:p,cart:c,textstatic:F,contacts:E}){var y,w,k,S,C,$;const d=new Y,[h,g]=o.useState(!1),[i,m]=o.useState({url:e==null?void 0:e.image,type:"main"}),[b,_]=o.useState(1),[j,N]=o.useState(e==null?void 0:e.slug),[r,T]=o.useState(e),q=a=>{let t=parseInt(a.target.value,10);(isNaN(t)||t<1)&&(t=1),t>10&&(t=10),_(t)},z=a=>{var t;return((t=E.find(l=>l.correlative===a))==null?void 0:t.description)||""};(y=F.find(a=>a.correlative=="detailproduct-relation-title"))==null||y.title;const[A,ls]=o.useState(!1),B=a=>{const t=f.find(x=>x.slug===j)||r||a,l=structuredClone(c),n=l.findIndex(x=>x.id==t.id);n==-1?l.push({...t,quantity:b}):l[n].quantity++,p(l),Z.fire({title:"Producto agregado",text:`Se agregó ${r.name||a.name} al carrito`,icon:"success",showCancelButton:!0,confirmButtonText:"Abrir mini carrito",cancelButtonText:"Seguir comprando",reverseButtons:!0,timer:5e3}).then(x=>{x.isConfirmed&&g(!h)})},[M,R]=o.useState([]),[v,P]=o.useState([]),[D,O]=o.useState([]),[f,U]=o.useState([]);c==null||c.find(a=>a.id==(e==null?void 0:e.id)),o.useEffect(()=>{e!=null&&e.id&&(W(e),Q(e),L(e),G(e),J(e),N(e.slug))},[e]);const H=a=>{const t=f.find(l=>l.slug===a)||e;T(t),N(a),window.history.pushState({},"",`/item/${a}`)},K=(a,t)=>!a||a<=t?0:Math.round((a-t)/a*100),L=async a=>{try{const t={id:a==null?void 0:a.id};if(console.log(t),!await d.updateViews(t))return}catch{return}},Q=async a=>{try{const t={id:a==null?void 0:a.id},l=await d.verifyCombo(t);if(!l)return;const n=l[0].associated_items;R(Object.values(n))}catch{return}},W=async a=>{try{const t={id:a==null?void 0:a.id},l=await d.productsRelations(t);if(!l)return;P(Object.values(l))}catch{return}},G=async a=>{try{const t={slug:a==null?void 0:a.slug},l=await d.getVariations(t);if(!l)return;O(l.variants)}catch{return}},J=async a=>{try{const t={slug:a==null?void 0:a.slug},l=await d.getSizes(t);if(!l)return;U(l)}catch{return}};M.reduce((a,t)=>a+parseFloat(t.final_price),0);const[u,X]=o.useState(!1);return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"px-primary mx-auto pb-4 md:pb-6 xl:pb-8 bg-white",children:[s.jsx("div",{className:"bg-white rounded-xl p-4 md:p-8",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 xl:gap-20 2xl:gap-32",children:[s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{className:"flex flex-col gap-6",children:[s.jsx("div",{className:"flex-1",children:s.jsx("img",{src:i.type==="main"?`/storage/images/item/${i.url}`:`/storage/images/item/${i.url}`,onError:a=>a.target.src="/api/cover/thumbnail/null",alt:"Product main",className:"w-full h-auto object-contain"})}),s.jsxs("div",{className:"flex flex-row gap-2",children:[s.jsx("button",{onClick:()=>m({url:e==null?void 0:e.image,type:"main"}),className:`w-16 h-16  rounded-lg p-1 border-2 ${i.url===(e==null?void 0:e.image)?"border-primary ":"border-gray-200"}`,children:s.jsx("img",{src:`/storage/images/item/${e==null?void 0:e.image}`,alt:"Main Thumbnail",className:"w-full h-full object-cover",onError:a=>a.target.src="/api/cover/thumbnail/null"})}),e==null?void 0:e.images.map((a,t)=>s.jsx("button",{onClick:()=>m({url:a.url,type:"gallery"}),className:`w-16 h-16 border-2 rounded-lg p-1 ${i.url===a.url?"border-primary":"border-gray-200"}`,children:s.jsx("img",{src:`/storage/images/item/${a.url}`||"/api/cover/thumbnail/null",alt:`Thumbnail ${t+1}`,className:"w-full h-full object-cover",onError:l=>l.target.src="/api/cover/thumbnail/null"})},t))]})]})}),s.jsxs("div",{className:"flex flex-col gap-3",children:[s.jsxs("div",{className:"font-font-general",children:[(e==null?void 0:e.brand)&&s.jsxs("p",{className:"customtext-neutral-light text-sm 2xl:text-lg",children:["Marca:"," ",s.jsx("span",{className:"customtext-neutral-dark",children:e==null?void 0:e.brand.name})]}),s.jsx("h1",{className:"customtext-neutral-dark text-3xl lg:text-4xl 2xl:text-5xl font-bold mt-2",children:e==null?void 0:e.name})]}),s.jsxs("div",{className:"flex flex-wrap customtext-neutral-light items-center gap-y-2 gap-x-8 text-sm font-font-general",children:[s.jsxs("span",{className:"customtext-neutral-dark text-base 2xl:text-lg",children:["SKU:"," ",s.jsx("span",{className:"customtext-neutral-dark font-bold",children:e==null?void 0:e.sku})]}),s.jsxs("span",{className:"customtext-neutral-dark text-base 2xl:text-lg",children:["Disponibilidad:"," ",s.jsx("span",{className:"customtext-neutral-dark font-bold",children:(r==null?void 0:r.stock)>0?"En stock":"Agotado"})]})]}),s.jsxs("div",{className:"flex flex-col w-full xl:w-1/2 font-font-general max-w-xl mt-5",children:[s.jsxs("p",{className:"text-base 2xl:text-lg customtext-neutral-dark opacity-70 font-medium",children:["Precio:"," ",s.jsxs("span",{className:"line-through",children:["S/ ",r==null?void 0:r.price]})]}),s.jsxs("div",{className:"flex flex-row items-center gap-4 relative",children:[s.jsxs("span",{className:"text-[40px] font-bold customtext-neutral-dark",children:["S/ ",r==null?void 0:r.final_price]}),s.jsxs("span",{className:"bg-[#F93232] text-white font-bold px-3 py-2 rounded-xl text-base",children:["-",K(r==null?void 0:r.price,r==null?void 0:r.final_price),"%"]})]})]}),(e==null?void 0:e.summary)&&s.jsx("div",{className:"flex flex-col customtext-neutral-dark font-font-general text-base 2xl:text-lg my-3",children:s.jsx("p",{children:e==null?void 0:e.summary})}),s.jsxs("div",{className:"variants-color flex flex-col gap-3",children:[s.jsx("h3",{className:"w-full block opacity-85 customtext-neutral-dark text-base 2xl:text-lg",children:"Colores"}),s.jsx("div",{className:"flex gap-3 items-center justify-start w-full flex-wrap",children:D.map(a=>s.jsx(ss,{content:a.color,children:s.jsx("a",{href:`/item/${a.slug}`,className:`variant-option rounded-full object-fit-cover ${a.color===e.color?"active p-[2px] border-[1.5px] border-neutral-dark":""}`,children:s.jsx("img",{className:"color-box rounded-full h-9 w-9 object-fit-cover ",src:`/storage/images/item/${a.texture||a.image}`})},a.slug)}))})]}),s.jsxs("div",{className:"variants-color flex flex-col gap-3",children:[s.jsx("h3",{className:"w-full block opacity-85 customtext-neutral-dark text-base 2xl:text-lg",children:"Tallas"}),s.jsx("div",{className:"flex gap-3 items-center justify-start w-full flex-wrap",children:f.map(a=>s.jsx("button",{onClick:()=>H(a.slug),className:`variant-option rounded-md w-9 h-9 flex flex-col justify-center items-center text-center bg-slate-200 ${j===a.slug?"active p-[2px] border-[1.5px] border-neutral-dark":""}`,children:a.size},a.slug))})]}),s.jsx("div",{className:"flex flex-col mt-8",children:s.jsx("div",{className:"flex items-center gap-4 mb-2",children:s.jsxs("div",{className:"flex items-center space-x-4 customtext-neutral-dark text-base 2xl:text-lg",children:[s.jsx("span",{className:"opacity-85",children:"Cantidad"}),s.jsx("div",{className:"relative flex items-center border rounded-md px-2 py-1",children:s.jsx("input",{type:"number",value:b,onChange:q,min:"1",max:"10",className:"w-10 py-1 customtext-neutral-dark text-center bg-transparent outline-none appearance-none"})})]})})}),s.jsx("button",{onClick:()=>{B(e)},disabled:(r==null?void 0:r.stock)<=0,className:`w-full font-font-general text-base 2xl:text-lg py-3 font-semibold rounded-3xl transition-all duration-300 mt-3 ${(r==null?void 0:r.stock)>0?"bg-primary text-white hover:opacity-90":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:(r==null?void 0:r.stock)>0?"Agregar al carrito":"Producto agotado"}),((w=e==null?void 0:e.specifications)==null?void 0:w.length)>0&&s.jsx("div",{className:"flex-1 w-full mt-5 2xl:mt-8",children:s.jsxs("div",{className:"bg-[#F7F9FB] rounded-xl p-6",children:[s.jsx("h3",{className:"font-semibold text-lg xl:text-xl 2xl:text-2xl mb-4 customtext-neutral-dark font-font-general",children:"Especificaciones principales"}),s.jsx("ul",{className:`space-y-1  customtext-neutral-light  mb-4 list-disc transition-all duration-300 ${u?"max-h-full":"max-h-20 overflow-hidden"}`,style:{listStyleType:"disc"},children:e==null?void 0:e.specifications.map((a,t)=>a.type==="principal"&&s.jsxs("li",{className:"gap-2 customtext-primary opacity-85 flex flex-row items-center",children:[s.jsx(as,{className:"customtext-primary w-4 h-4"}),a.description]},t))}),s.jsxs("button",{className:"font-semibold flex flex-row gap-2 items-center text-base xl:text-[17px] 2xl:text-xl mb-4 customtext-neutral-dark font-font-general pb-2 border-b border-neutral-dark",onClick:()=>X(!u),children:[u?"Ver menos":"Ver más especificaciones",u?s.jsx(ts,{className:"w-4 h-4"}):s.jsx(rs,{className:"w-4 h-4"})]})]})}),s.jsx("div",{className:"w-full mt-5",children:s.jsx("a",{href:`https://api.whatsapp.com/send?phone=${z("phone_whatsapp")}&text=${encodeURIComponent(`Hola, deseo mayor información acerca del producto: ${e==null?void 0:e.name}`)}`,target:"_blank",children:s.jsxs("div",{className:"bg-[#F7F9FB] flex flex-row rounded-xl p-5 gap-3",children:[s.jsx("img",{src:"/assets/img/salafabulosa/whatsapp.png",onError:a=>a.target.src="assets/img/noimage/no_imagen_circular.png",className:"w-12 h-12 object-contain",loading:"lazy"}),s.jsx("div",{className:"customtext-neutral-dark font-font-general text-base  2xl:text-xl font-semibold",children:s.jsxs("p",{children:["¿Tienes dudas sobre este producto? Haz",s.jsx("span",{className:"underline"}),"clic aquí y chatea con nosotros por WhatsApp"]})})]})})})]})]})}),s.jsxs("div",{className:"grid gap-10 lg:gap-20 md:grid-cols-2 bg-white rounded-xl p-4 sm:p-8 font-font-general",children:[((k=e==null?void 0:e.specifications)==null?void 0:k.length)>0&&s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold customtext-neutral-dark mb-4 border-b pb-3",children:"Especificaciones"}),s.jsx("div",{className:"space-y-1",children:e.specifications.map((a,t)=>a.type==="general"&&s.jsxs("div",{className:`grid grid-cols-2 gap-4 p-3 ${t%2===0?"bg-[#F7F9FB]":"bg-white"}`,children:[s.jsx("div",{className:"customtext-neutral-dark ",children:a.title}),s.jsx("div",{className:"customtext-neutral-dark opacity-75",children:a.description})]},t))})]}),s.jsxs("div",{className:"font-font-general",children:[((S=e==null?void 0:e.description)==null?void 0:S.replace(/<[^>]+>/g,""))&&s.jsx("h2",{className:"text-2xl font-bold customtext-neutral-dark mb-4 border-b pb-3",children:"Información adicional"}),s.jsxs("div",{className:`space-y-2 ${A?"":"max-h-none overflow-hidden"}`,children:[((C=e==null?void 0:e.description)==null?void 0:C.replace(/<[^>]+>/g,""))&&s.jsxs(s.Fragment,{children:[s.jsx("h3",{className:"text-xl font-semibold customtext-neutral-dark mb-4",children:"Acerca de este artículo"}),s.jsx("div",{className:"customtext-neutral-dark",dangerouslySetInnerHTML:{__html:e==null?void 0:e.description}})]}),(($=e==null?void 0:e.features)==null?void 0:$.length)>0&&s.jsx("div",{className:"pl-10",children:s.jsx("ul",{className:"list-disc pl-5 space-y-2",children:e==null?void 0:e.features.map((a,t)=>s.jsx("li",{className:"customtext-neutral-dark",children:a.feature},t))})})]})]})]})]}),v.length>0&&s.jsx("div",{className:"-mt-10 mb-10 p-4",children:s.jsx(es,{data:{title:"Productos relacionados",link_catalog:"/catalogo"},items:v,cart:c,setCart:p})}),s.jsx(V,{cart:c,data:I,setCart:p,modalOpen:h,setModalOpen:g})]})}export{Ls as default};
