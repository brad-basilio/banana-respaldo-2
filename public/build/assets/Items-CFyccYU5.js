import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{B as qe}from"./Base-DlUcAFv5.js";import{S as M}from"./SwitchFormGroup-CGYpv_4Q.js";import{T as He}from"./TextareaFormGroup-DVzYJtLM.js";import{r as t}from"./index-BH53Isel.js";import{c as ze}from"./ReactAppend-QR5TrZfj.js";import{s as O}from"./server.browser-Bf4gQIc7.js";import{S as Je}from"./ProductCard-B4Ag8Mdr.js";import{I as Ie}from"./ItemsRest-CDLriOPv.js";import{C as We}from"./CanvasPresetsRest-C7tex7wE.js";import{M as ve}from"./Modal-B6PZ5H4-.js";import{T as Qe}from"./Table-DitbKwtZ.js";import{I as W}from"./ImageFormGroup-BPR9pDAU.js";import{I as T}from"./InputFormGroup-D5I6zpZc.js";import{Q as Xe}from"./QuillFormGroup-D8zDHSfJ.js";import{S as Ne}from"./SelectAPIFormGroup-BYepMiHu.js";import{S as ye}from"./SelectFormGroup-BmhC2uob.js";import{D as we}from"./DxButton-DV0H-ZcL.js";import{C as Ke}from"./CreateReactScript-CLZ4wiPb.js";import{N as Re}from"./Number2Currency-e57Tgsuk.js";import{R as E}from"./ReactAppend-Vm5G2nof.js";import{S as Ce}from"./SetSelectValue-UxyCmHse.js";import"./main-Byrjfx4U.js";import{t as Ye}from"./index-BJa4kPFi.js";import"./index-yBjzXJbu.js";import"./Global-D6eBBAMK.js";import"./tippy-react.esm-_w2ZiBvC.js";import"./index-fRpqIG3j.js";import"./index-B6ujFmsw.js";/* empty css              */import"./Logout-DXm-w6is.js";import"./MenuItemContainer-TZamybjX.js";import"./index.esm-BjZvalV8.js";import"./index-NIGUFBhG.js";import"./___vite-browser-external_commonjs-proxy-0zb4Agf2.js";import"./BasicRest-DByHAxxD.js";/* empty css               */import"./General-BmbBKdsB.js";import"./LaravelSession-Dz9cpV3l.js";const Ze=({label:y,structure:p,value:w=[],onChange:h,typeOptions:C=[]})=>{const[g,x]=t.useState([]),j=typeof p=="object"&&!Array.isArray(p);t.useEffect(()=>{x(j?w.map(l=>{var o,m;return{...l,type:((o=l.type)==null?void 0:o.charAt(0).toUpperCase())+((m=l.type)==null?void 0:m.slice(1).toLowerCase())}}):w.map(l=>typeof l=="object"?l.feature||"":l))},[w]);const A=()=>{const l=j?{...p}:"",o=[...g,l];x(o),h(o)},u=l=>{const o=g.filter((m,n)=>n!==l);x(o),h(o)},b=(l,o,m)=>{const n=[...g];j?n[l][o]=o==="type"?m.charAt(0).toUpperCase()+m.slice(1).toLowerCase():m:n[l]=m,x(n),h(n)},v=(l,o)=>l==="title"&&o==="Icono"?"Url de icono":l;return e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:y}),g.map((l,o)=>e.jsx("div",{className:"row g-2 mb-2",children:j?e.jsxs(e.Fragment,{children:[Object.keys(p).map(m=>e.jsx("div",{className:"col",children:m==="type"?e.jsxs("select",{className:"form-select",value:l[m]||"",onChange:n=>b(o,m,n.target.value),children:[e.jsx("option",{value:"",children:"Seleccionar..."}),C.map(n=>e.jsx("option",{value:n,children:n},n))]}):e.jsx("input",{type:"text",className:"form-control",value:l[m]||"",onChange:n=>b(o,m,n.target.value),placeholder:v(m,l.type)})},m)),e.jsx("div",{className:"col-auto",children:e.jsx("button",{type:"button",className:"btn btn-danger",onClick:()=>u(o),children:"X"})})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"col",children:e.jsx("input",{type:"text",className:"form-control",value:l,onChange:m=>b(o,null,m.target.value),placeholder:"Característica"})}),e.jsx("div",{className:"col-auto",children:e.jsx("button",{type:"button",className:"btn btn-danger",onClick:()=>u(o),children:"X"})})]})},o)),e.jsx("button",{type:"button",className:"btn btn-primary mt-2 d-block ",onClick:A,children:"+ Agregar"})]})},es=new Ie,ss=({gridRef:y,modalRef:p})=>{const[w,h]=t.useState(null),[C,g]=t.useState(!1),[x,j]=t.useState(""),[A,u]=t.useState(!1),b=l=>{h(l.target.files[0])},v=async()=>{var o,m;if(!w){j("Por favor, selecciona un archivo."),u(!0);return}const l=new FormData;l.append("file",w),g(!0);try{const n=await es.importData(l);if(console.log(n),n.error){const I=Array.isArray(n.error)?n.error.join(`
`):n.error;j(`Error en la importación:
${I}`),u(!0)}else j(n.message),u(!1),$(y.current).dxDataGrid("instance").refresh(),$(p.current).modal("hide"),Ye.success("Importacion completada con exito",{description:"Todos tus productos han sido importados correctamente.",duration:3e3,position:"bottom-center",richColors:!0})}catch(n){j("Error al importar: "+(((m=(o=n.response)==null?void 0:o.data)==null?void 0:m.error)||n.message)),u(!0)}g(!1)};return e.jsx("div",{className:"bg-white",children:e.jsxs("div",{className:"modal-content",children:[e.jsx("div",{className:"mb-1",children:e.jsx("a",{href:"/assets/img/salafabulosa/formato_import_products.xlsx",download:!0,children:"Descargar formato .xlsx"})}),e.jsx("div",{children:e.jsx("input",{className:"form-control",type:"file",accept:".xlsx",onChange:b})}),e.jsx("button",{onClick:v,disabled:C,className:"btn btn-primary mt-2",type:"button",children:C?"Subiendo...":"Subir Archivo"}),x&&e.jsx("div",{className:`alert ${A?"alert-danger":"alert-success"} mt-2`,role:"alert",children:e.jsx("div",{className:"alert-message",children:x})})]})})},L=new Ie,rs=new We,ts=({categories:y,brands:p,collections:w})=>{//!FALTA EDIT AND DELETEDE GALERIA
const[h,C]=t.useState([]),[g,x]=t.useState([]),[j,A]=t.useState(null),u=t.useRef(),b=t.useRef(),v=t.useRef(),l=t.useRef(),o=t.useRef(),m=t.useRef(),n=t.useRef(),I=t.useRef(),U=t.useRef(),V=t.useRef(),S=t.useRef(),k=t.useRef(),q=t.useRef();t.useRef();const H=t.useRef(),_=t.useRef(),F=t.useRef(),P=t.useRef(),D=t.useRef(),z=t.useRef(),Se=t.useRef([]),[ke,se]=t.useState(!1),[_e,Fe]=t.useState(null),[cs,is]=t.useState(null),[as,Pe]=t.useState(""),[R,N]=t.useState([]),re=t.useRef(),De=s=>{const i=Array.from(s.target.files).map(c=>({file:c,url:URL.createObjectURL(c)}));N(c=>[...c,...i])},Te=s=>{s.preventDefault();const i=Array.from(s.dataTransfer.files).map(c=>({file:c,url:URL.createObjectURL(c)}));N(c=>[...c,...i])},$e=s=>{s.preventDefault()},Ee=(s,r)=>{s.preventDefault(),R[r].id?N(c=>c.map((a,f)=>f===r?{...a,toDelete:!0}:a)):N(c=>c.filter((a,f)=>f!==r))};t.useEffect(()=>{(async()=>{try{const r=await rs.paginate({take:100,skip:0});r!=null&&r.data&&x(r.data)}catch(r){console.error("Error cargando presets:",r)}})()},[]),t.useEffect(()=>{if(h&&h.images){const s=h.images.map(r=>({id:r.id,url:`/storage/images/item/${r.url}`}));N(s)}},[h]);const te=s=>{var r,i,c;if(C(s||null),s!=null&&s.id?se(!0):se(!1),Pe(s!=null&&s.pdf?`/storage/images/item/${s.pdf}`:""),v.current&&(v.current.value=(s==null?void 0:s.id)||""),m.current&&(m.current.value=(s==null?void 0:s.name)||""),q.current&&(q.current.value=(s==null?void 0:s.sku)||""),n.current&&(n.current.value=(s==null?void 0:s.summary)||""),I.current&&(I.current.value=(s==null?void 0:s.price)||0),U.current&&(U.current.value=(s==null?void 0:s.discount)||0),_.current&&(_.current.value=(s==null?void 0:s.pages)||1),l.current&&$(l.current).val((s==null?void 0:s.category_id)||null).trigger("change"),o.current&&Ce(o.current,(r=s==null?void 0:s.subcategory)==null?void 0:r.id,(i=s==null?void 0:s.subcategory)==null?void 0:i.name),H.current&&$(H.current).val((s==null?void 0:s.canvas_preset_id)||null).trigger("change"),V.current&&Ce(V.current,(s==null?void 0:s.tags)??[],"id","name"),S.current&&(S.current.value=null,S.image&&(S.image.src=`/storage/images/item/${(s==null?void 0:s.image)??"undefined"}`)),F.current&&(F.current.value=null,F.image&&(F.image.src=`/storage/images/item/${(s==null?void 0:s.cover_image)??"undefined"}`)),P.current&&(P.current.value=null,P.image&&(P.image.src=`/storage/images/item/${(s==null?void 0:s.content_image)??"undefined"}`)),D.current&&(D.current.value=null,D.image&&(D.image.src=`/storage/images/item/${(s==null?void 0:s.back_cover_image)??"undefined"}`)),K((s==null?void 0:s.has_cover_image)===1||(s==null?void 0:s.has_cover_image)===!0),Z((s==null?void 0:s.has_back_cover_image)===1||(s==null?void 0:s.has_back_cover_image)===!0),k.current&&k.editor&&k.editor.root&&(k.editor.root.innerHTML=(s==null?void 0:s.description)??""),s!=null&&s.images){const a=s.images.map(f=>({id:f.id,url:`/storage/images/item/${f.url}`}));N(a)}else N([]);s!=null&&s.specifications?Q(s.specifications.map(a=>({type:a.type,title:a.title,description:a.description,image:a.image||""}))):Q([]),Oe(((c=s==null?void 0:s.features)==null?void 0:c.map(a=>typeof a=="object"?a:{feature:a}))||[]),z.current&&(z.current.value=(s==null?void 0:s.stock)||""),s!=null&&s.id||(K(!1),Z(!1)),$(b.current).modal("show")},Ae=async s=>{var ne,oe,me,de,ue,fe,pe,he,ge,xe,je,be;s.preventDefault();const r=Me.filter(d=>{var B;return typeof d=="string"?d.trim()!=="":typeof d=="object"?((B=d.feature)==null?void 0:B.trim())!=="":!1}),i=ce.filter(d=>d.title&&d.title.trim()!==""||d.description&&d.description.trim()!==""),c={id:((ne=v.current)==null?void 0:ne.value)||void 0,category_id:(oe=l.current)==null?void 0:oe.value,subcategory_id:(me=o.current)==null?void 0:me.value,name:(de=m.current)==null?void 0:de.value,sku:(ue=q.current)==null?void 0:ue.value,summary:(fe=n.current)==null?void 0:fe.value,price:(pe=I.current)==null?void 0:pe.value,discount:(he=U.current)==null?void 0:he.value,tags:$(V.current).val(),description:(ge=k.current)==null?void 0:ge.value,stock:((xe=z.current)==null?void 0:xe.value)||"",canvas_preset_id:((je=H.current)==null?void 0:je.value)||null,pages:(be=_.current)==null?void 0:be.value,features:r,specifications:i,linkvideo:"",has_cover_image:X?1:0,has_back_cover_image:Y?1:0},a=new FormData;for(const d in c)d==="features"||d==="specifications"?a.append(d,JSON.stringify(c[d])):a.append(d,c[d]);const f=S.current.files[0];f&&a.append("image",f);const G=P.current.files[0];G&&a.append("content_image",G);const ie=F.current.files[0];ie&&a.append("cover_image",ie);const ae=D.current.files[0];ae&&a.append("back_cover_image",ae),R.forEach((d,B)=>{d.toDelete||(d.file?a.append(`gallery[${B}]`,d.file):a.append(`gallery_ids[${B}]`,d.id))});const le=R.filter(d=>d.toDelete).map(d=>parseInt(d.id,10));le.length>0&&a.append("deleted_images",JSON.stringify(le)),console.log(a),await L.save(a)&&($(u.current).dxDataGrid("instance").refresh(),$(b.current).modal("hide"),N([]))},Ge=async({id:s,value:r})=>{await L.boolean({id:s,field:"visible",value:r})&&$(u.current).dxDataGrid("instance").refresh()},J=async({id:s,field:r,value:i})=>{await L.boolean({id:s,field:r,value:i})&&$(u.current).dxDataGrid("instance").refresh()},Be=async s=>{const{isConfirmed:r}=await Je.fire({title:"Eliminar curso",text:"¿Estás seguro de eliminar este curso?",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"});!r||!await L.delete(s)||$(u.current).dxDataGrid("instance").refresh()},[Me,Oe]=t.useState([]),[ce,Q]=t.useState([]),[X,K]=t.useState(!1),[Y,Z]=t.useState(!1),Le=["Principal","General","Icono"],[ls,ns]=t.useState(!1),ee=t.useRef(),Ue=s=>{const r=g.find(i=>i.id===s);A(r),r&&_.current&&(_.current.value=r.pages||1)},Ve=()=>{$(ee.current).modal("show")};return e.jsxs(e.Fragment,{children:[e.jsx(Qe,{gridRef:u,title:"Items",rest:L,toolBar:s=>{s.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(u.current).dxDataGrid("instance").refresh()}}),s.unshift({widget:"dxButton",location:"after",options:{icon:"plus",text:"Agregar",hint:"Agregar",onClick:()=>te()}}),s.unshift({widget:"dxButton",location:"after",options:{icon:"upload",text:"Importar Datos",hint:"Importar Datos",onClick:()=>Ve()}})},exportable:!0,exportableName:"Items",columns:[{dataField:"id",caption:"ID",visible:!1},{dataField:"category.name",caption:"Categoría",width:"120px",cellTemplate:(s,{data:r})=>{var i,c,a;s.html(O.renderToString(e.jsxs(e.Fragment,{children:[e.jsx("b",{className:"d-block fst-italic text-muted",children:(i=r.collection)==null?void 0:i.name}),e.jsx("b",{className:"d-block",children:(c=r.category)==null?void 0:c.name}),e.jsx("small",{className:"text-muted",children:(a=r.subcategory)==null?void 0:a.name})]})))}},{dataField:"subcategory.name",caption:"Subcategoría",visible:!1},{dataField:"canvas_preset.name",caption:"Preset",width:"140px",cellTemplate:(s,{data:r})=>{r.canvas_preset?s.html(O.renderToString(e.jsxs(e.Fragment,{children:[e.jsx("b",{className:"d-block",children:r.canvas_preset.name}),e.jsxs("small",{className:"text-muted",children:[r.canvas_preset.width,"x",r.canvas_preset.height,"mm",r.pages&&` • ${r.pages}p`]})]}))):s.html(O.renderToString(e.jsx("i",{className:"text-muted",children:"Sin preset"})))}},{dataField:"name",caption:"Nombre",minWidth:"300px",cellTemplate:(s,{data:r})=>{const c=((a,f)=>{if(!a)return"";const G=a.split(" ");return G.length>f?G.slice(0,f).join(" ")+"...":a})(r.summary,12);s.html(O.renderToString(e.jsxs(e.Fragment,{children:[e.jsx("b",{children:r.name}),e.jsx("br",{}),e.jsx("span",{children:c})]})))}},{dataField:"final_price",caption:"Precio",dataType:"number",width:"75px",cellTemplate:(s,{data:r})=>{s.html(O.renderToString(e.jsxs(e.Fragment,{children:[r.discount>0&&e.jsxs("small",{className:"d-block text-muted",style:{textDecoration:"line-through"},children:["S/.",Re(r.price)]}),e.jsxs("span",{children:["S/.",Re(r.discount>0?r.discount:r.price)]})]})))}},{dataField:"image",caption:"Imagen",width:"90px",allowFiltering:!1,cellTemplate:(s,{data:r})=>{console.log("data.image",r.image),E(s,e.jsx("img",{src:`/storage/images/item/${r.image}`,style:{width:"80px",height:"48px",objectFit:"cover",objectPosition:"center",borderRadius:"4px"},onError:i=>i.target.src="/api/cover/thumbnail/null"}))}},{dataField:"is_new",caption:"Nuevo",dataType:"boolean",width:"80px",cellTemplate:(s,{data:r})=>{const i=r.is_new===1||r.is_new==="1"||r.is_new===!0;E(s,e.jsx(M,{checked:i,onChange:c=>J({id:r.id,field:"is_new",value:c.target.checked?1:0})}))}},{dataField:"offering",caption:"En oferta",dataType:"boolean",width:"80px",cellTemplate:(s,{data:r})=>{const i=r.offering===1||r.offering==="1"||r.offering===!0;E(s,e.jsx(M,{checked:i,onChange:c=>J({id:r.id,field:"offering",value:c.target.checked?1:0})}))}},{dataField:"recommended",caption:"Recomendado",dataType:"boolean",width:"80px",cellTemplate:(s,{data:r})=>{const i=r.recommended===1||r.recommended==="1"||r.recommended===!0;E(s,e.jsx(M,{checked:i,onChange:c=>J({id:r.id,field:"recommended",value:c.target.checked?1:0})}))}},{dataField:"featured",caption:"Destacado",dataType:"boolean",width:"80px",cellTemplate:(s,{data:r})=>{const i=r.featured===1||r.featured==="1"||r.featured===!0;E(s,e.jsx(M,{checked:i,onChange:c=>J({id:r.id,field:"featured",value:c.target.checked?1:0})}))}},{dataField:"visible",caption:"Visible",dataType:"boolean",width:"80px",cellTemplate:(s,{data:r})=>{E(s,e.jsx(M,{checked:r.visible,onChange:i=>Ge({id:r.id,value:i.target.checked})}))}},{caption:"Acciones",width:"100px",cellTemplate:(s,{data:r})=>{s.css("text-overflow","unset"),s.append(we({className:"btn btn-xs btn-soft-primary",title:"Editar",icon:"fa fa-pen",onClick:()=>te(r)})),s.append(we({className:"btn btn-xs btn-soft-danger",title:"Eliminar",icon:"fa fa-trash",onClick:()=>Be(r.id)}))},allowFiltering:!1,allowExporting:!1}]}),e.jsx(ve,{modalRef:b,title:ke?"Editar item":"Agregar item",onSubmit:Ae,size:"xl",children:e.jsxs("div",{className:"container-fluid",id:"principal-container",children:[e.jsx("input",{ref:v,type:"hidden"}),e.jsxs("div",{className:"card mb-4",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h6",{className:"card-title mb-0",children:[e.jsx("i",{className:"fa fa-info-circle me-2"}),"Información Básica"]})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-4",children:e.jsx(T,{eRef:q,label:"SKU",required:!0})}),e.jsx("div",{className:"col-md-8",children:e.jsx(T,{eRef:m,label:"Nombre del Producto",required:!0})})]}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-md-12",children:e.jsx(He,{eRef:n,label:"Resumen",rows:3})})})]})]}),e.jsxs("div",{className:"card mb-4",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h6",{className:"card-title mb-0",children:[e.jsx("i",{className:"fa fa-tags me-2"}),"Categorización"]})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(ye,{eRef:l,label:"Categoría",required:!0,dropdownParent:"#principal-container",onChange:s=>Fe(s.target.value),children:y.map((s,r)=>e.jsx("option",{value:s.id,children:s.name},r))})}),e.jsx("div",{className:"col-md-6",children:e.jsx(Ne,{eRef:o,label:"Subcategoría",searchAPI:"/api/admin/subcategories/paginate",searchBy:"name",filter:["category_id","=",_e],dropdownParent:"#principal-container"})})]}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-md-12",children:e.jsx(Ne,{id:"tags",eRef:V,searchAPI:"/api/admin/tags/paginate",searchBy:"name",label:"Tags",dropdownParent:"#principal-container",tags:!0,multiple:!0})})})]})]}),e.jsxs("div",{className:"card mb-4",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h6",{className:"card-title mb-0",children:[e.jsx("i",{className:"fa fa-cog me-2"}),"Configuración de Canvas y Producto"]})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs(ye,{eRef:H,label:"Preset de Canvas",dropdownParent:"#principal-container",onChange:s=>Ue(s.target.value),children:[e.jsx("option",{value:"",children:"Seleccionar preset..."}),g.map(s=>e.jsxs("option",{value:s.id,children:[s.name," (",s.width,"x",s.height,"mm, ",s.pages,"p)"]},s.id))]})}),e.jsx("div",{className:"col-md-3",children:e.jsx(T,{eRef:_,label:"Número de Páginas",type:"number",min:"1",defaultValue:"1"})}),e.jsx("div",{className:"col-md-3",children:e.jsx(T,{label:"Stock",eRef:z,type:"number"})})]})})]}),e.jsxs("div",{className:"card mb-4",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h6",{className:"card-title mb-0",children:[e.jsx("i",{className:"fa fa-dollar-sign me-2"}),"Precios"]})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(T,{eRef:I,label:"Precio Regular",type:"number",step:"0.01",required:!0})}),e.jsx("div",{className:"col-md-6",children:e.jsx(T,{eRef:U,label:"Precio con Descuento",type:"number",step:"0.01"})})]})})]}),e.jsxs("div",{className:"card mb-4",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h6",{className:"card-title mb-0",children:[e.jsx("i",{className:"fa fa-images me-2"}),"Imágenes del Producto"]})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"row mb-4",children:[e.jsx("div",{className:"col-12",children:e.jsxs("h6",{className:"text-primary mb-3",children:[e.jsx("i",{className:"fa fa-star me-2"}),"Imagen Principal"]})}),e.jsx("div",{className:"col-md-3",children:e.jsx(W,{eRef:S,label:"Imagen Principal",aspect:1,col:"col-12"})})]}),e.jsxs("div",{className:"row mb-4",children:[e.jsx("div",{className:"col-12",children:e.jsxs("h6",{className:"text-info mb-3",children:[e.jsx("i",{className:"fa fa-layer-group me-2"}),"Imágenes Específicas del Producto"]})}),e.jsxs("div",{className:"col-md-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx("span",{className:"badge bg-success",children:"Obligatoria"})}),e.jsx(W,{eRef:P,label:"Imagen de Contenido *",aspect:1,col:"col-12"})]}),e.jsxs("div",{className:"col-md-4",children:[e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"form-check",children:[e.jsx("input",{className:"form-check-input",type:"checkbox",id:"hasCoverImage",checked:X,onChange:s=>K(s.target.checked)}),e.jsx("label",{className:"form-check-label fw-bold",htmlFor:"hasCoverImage",children:"Incluir Imagen de Portada"})]}),e.jsx("small",{className:"text-muted",children:"Controla si se usa en el diseño (la imagen siempre se guarda)"})]}),e.jsx(W,{eRef:F,label:"Imagen de Portada",aspect:1,col:"col-12"}),!X&&e.jsx("div",{className:"alert alert-warning p-2 mt-2",children:e.jsx("small",{children:"⚠️ Imagen no se usará en el diseño (pero se guardará)"})})]}),e.jsxs("div",{className:"col-md-4",children:[e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"form-check",children:[e.jsx("input",{className:"form-check-input",type:"checkbox",id:"hasBackCoverImage",checked:Y,onChange:s=>Z(s.target.checked)}),e.jsx("label",{className:"form-check-label fw-bold",htmlFor:"hasBackCoverImage",children:"Incluir Imagen de Contraportada"})]}),e.jsx("small",{className:"text-muted",children:"Controla si se usa en el diseño (la imagen siempre se guarda)"})]}),e.jsx(W,{eRef:D,label:"Imagen de Contraportada",aspect:1,col:"col-12"}),!Y&&e.jsx("div",{className:"alert alert-warning p-2 mt-2",children:e.jsx("small",{children:"⚠️ Imagen no se usará en el diseño (pero se guardará)"})})]})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12",children:e.jsxs("h6",{className:"text-success mb-3",children:[e.jsx("i",{className:"fa fa-images me-2"}),"Galería de Imágenes Adicionales"]})}),e.jsx("div",{className:"col-md-5",children:e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label fw-bold",children:"Subir Nuevas Imágenes"}),e.jsx("input",{id:"input-item-gallery",ref:re,type:"file",multiple:!0,accept:"image/*",hidden:!0,onChange:De}),e.jsx("div",{className:"border-2 border-dashed p-4 text-center position-relative",style:{borderColor:"#28a745",backgroundColor:"#f8fff9",cursor:"pointer",borderRadius:"12px",minHeight:"180px",transition:"all 0.3s ease"},onClick:()=>re.current.click(),onDrop:Te,onDragOver:$e,onMouseEnter:s=>{s.target.style.borderColor="#20c997",s.target.style.backgroundColor="#f0fff4"},onMouseLeave:s=>{s.target.style.borderColor="#28a745",s.target.style.backgroundColor="#f8fff9"},children:e.jsxs("div",{className:"d-flex flex-column align-items-center justify-content-center h-100",children:[e.jsx("i",{className:"fa fa-cloud-upload-alt fa-3x text-success mb-3"}),e.jsx("h6",{className:"text-success mb-2",children:"Agregar Imágenes"}),e.jsxs("p",{className:"text-muted mb-0 small",children:["Arrastra y suelta archivos aquí",e.jsx("br",{}),"o haz clic para seleccionar"]}),e.jsx("small",{className:"text-muted mt-2",children:"Formatos: JPG, PNG, WebP"})]})})]})}),e.jsx("div",{className:"col-md-7",children:e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{className:"form-label fw-bold",children:["Imágenes de la Galería",R.length>0&&e.jsx("span",{className:"badge bg-primary ms-2",children:R.length})]}),e.jsx("div",{className:"border rounded p-3",style:{minHeight:"180px",backgroundColor:"#f8f9fa",overflowY:"auto",maxHeight:"300px"},children:R.length===0?e.jsx("div",{className:"h-100 d-flex align-items-center justify-content-center",children:e.jsxs("div",{className:"text-center text-muted",children:[e.jsx("i",{className:"fa fa-image fa-2x mb-2 opacity-50"}),e.jsx("p",{className:"mb-0",children:"No hay imágenes en la galería"}),e.jsx("small",{children:"Las imágenes aparecerán aquí después de subirlas"})]})}):e.jsx("div",{className:"d-flex flex-wrap gap-3",children:R.map((s,r)=>e.jsxs("div",{className:"position-relative",style:{width:"90px",height:"90px"},children:[e.jsx("img",{src:`${s.url}`,alt:`Imagen ${r+1}`,className:"shadow-sm",style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"8px",border:"2px solid #e9ecef"}}),e.jsx("button",{type:"button",className:"btn btn-danger btn-sm position-absolute shadow",style:{top:"-8px",right:"-8px",width:"24px",height:"24px",padding:"0",borderRadius:"50%",fontSize:"12px",lineHeight:"1",display:"flex",alignItems:"center",justifyContent:"center"},onClick:i=>Ee(i,r),title:"Eliminar imagen",children:e.jsx("i",{className:"fa fa-times"})})]},r))})})]})})]})]})]}),e.jsxs("div",{className:"card mb-4",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h6",{className:"card-title mb-0",children:[e.jsx("i",{className:"fa fa-list me-2"}),"Características y Especificaciones"]})}),e.jsx("div",{className:"card-body",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-md-12",children:e.jsx(Ze,{ref:Se,label:"Especificaciones",structure:{type:"",title:"",description:""},value:ce,onChange:Q,typeOptions:Le})})})})]}),e.jsxs("div",{className:"card mb-4",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h6",{className:"card-title mb-0",children:[e.jsx("i",{className:"fa fa-align-left me-2"}),"Descripción Detallada"]})}),e.jsx("div",{className:"card-body",children:e.jsx(Xe,{eRef:k,label:"Descripción"})})]})]})}),e.jsx(ve,{modalRef:ee,title:"Importar Datos",size:"sm",children:e.jsx(ss,{gridRef:u,modalRef:ee})})]})};Ke((y,p)=>{ze.createRoot(y).render(e.jsx(qe,{...p,title:"Items",children:e.jsx(ts,{...p})}))});
