import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{R as o,r as c}from"./index-BH53Isel.js";import"./thumbnailGenerator-B4goYG9Y.js";import"./EditorLayout-CkCvwqGw.js";import"./jspdf.es.min-D3plwuQr.js";import"./index-BZYhE2TF.js";import"./main-6DCdASTx.js";import"./TextElement-_pvTHO57.js";import"./V1Edit-CNtDxOEt.js";import"./dom-to-image-more.min-BAoslaO8.js";import{I as m}from"./image-BEA0kkBS.js";import{P as f}from"./plus-Bot15Khs.js";import{u as j}from"./useDrag-BaORhKlM.js";import"./index-yBjzXJbu.js";import"./preload-helper-BfFHrpNk.js";import"./typeof-QjJsDpFa.js";import"./index-rimy3MAc.js";import"./index-fNjTmf9T.js";import"./___vite-browser-external_commonjs-proxy-0zb4Agf2.js";import"./PaymentModal-Bxx5p2o_.js";import"./index-Chjiymov.js";import"./Global-ErywZRdd.js";import"./x-DBMwyD6F.js";import"./createLucideIcon-Cy5Ya80P.js";import"./chevron-left-B2s3ZsB7.js";import"./chevron-right-Ckt5D2ka.js";import"./download-Dh5rRDOT.js";import"./index-BSWw-p5k.js";o.memo(({pageId:a,thumbnail:s,altText:i,type:l})=>s?e.jsx("img",{src:s,alt:i,className:"w-full h-full object-contain",loading:"lazy",style:{transition:"opacity 0.2s ease-in-out",imageRendering:"optimizeQuality"}}):e.jsx("div",{className:"w-full h-full flex items-center justify-center"}));o.memo(({images:a,onImageSelect:s,isLoading:i})=>{const l=o.memo(({image:t})=>{const[r,d]=c.useState(!1),[n,p]=c.useState(!1),[{isDragging:u},g]=j(()=>({type:"PROJECT_IMAGE",item:{type:"PROJECT_IMAGE",imageUrl:t.url},collect:y=>({isDragging:!!y.isDragging()})})),x=t.thumbnail_url||t.url,h=t.url;return e.jsxs("div",{ref:g,className:`relative group cursor-pointer bg-gray-50 rounded-lg overflow-hidden border-2 border-transparent hover:border-[#af5cb8] transition-all duration-200 ${u?"opacity-50 scale-95":""}`,onClick:()=>s(h),children:[e.jsxs("div",{className:"aspect-square relative",children:[!r&&!n&&e.jsx("div",{className:"absolute inset-0 bg-gray-100 animate-pulse flex items-center justify-center",children:e.jsx("div",{className:"w-6 h-6 border-2 border-[#af5cb8] border-t-transparent rounded-full animate-spin"})}),n?e.jsx("div",{className:"absolute inset-0 bg-gray-100 flex items-center justify-center",children:e.jsxs("div",{className:"text-center text-gray-500",children:[e.jsx(m,{className:"h-6 w-6 mx-auto mb-1"}),e.jsx("p",{className:"text-xs",children:"Error al cargar"})]})}):e.jsx("img",{src:x,alt:t.filename||"Project image",className:`w-full h-full object-cover transition-opacity duration-300 ${r?"opacity-100":"opacity-0"}`,loading:"lazy",onLoad:()=>d(!0),onError:()=>p(!0)})]}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-all duration-200 flex items-center justify-center",children:e.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:e.jsx("div",{className:"bg-white rounded-full p-2 shadow-md",children:e.jsx(f,{className:"h-4 w-4 text-[#af5cb8]"})})})}),e.jsx("div",{className:"absolute top-2 right-2 bg-black bg-opacity-50 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:t.has_thumbnail?"Optimizada":"Arrastra o haz clic"}),t.has_thumbnail&&e.jsx("div",{className:"absolute top-2 left-2 bg-green-500 rounded-full w-2 h-2"})]})});return i?e.jsx("div",{className:"grid grid-cols-2 gap-3",children:Array.from({length:6}).map((t,r)=>e.jsx("div",{className:"aspect-square bg-gray-100 rounded-lg animate-pulse"},r))}):a.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(m,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"No hay imágenes en este proyecto"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Sube una imagen para empezar"})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"grid grid-cols-2 gap-3",children:a.map((t,r)=>e.jsx(l,{image:t},`${t.id||t.url}-${r}`))}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-xs text-gray-500",children:[a.filter(t=>t.has_thumbnail).length," de ",a.length," imágenes optimizadas"]})})]})});
