import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as n}from"./index-BH53Isel.js";import R from"./MenuSimple-B4Et5IBk.js";import{S as $}from"./search-TwiiKGP5.js";import{C as T}from"./chevron-left-B2s3ZsB7.js";import{C as v}from"./chevron-right-Ckt5D2ka.js";import{C as L}from"./door-closed-Z4GbcMb-.js";function Q({search:r,setSearch:m,pages:d,items:f,onClose:p,startFromCategories:l=!1}){const[i,o]=n.useState(l?"categories":"main"),[g,x]=n.useState(null),[w,u]=n.useState(null),[c,b]=n.useState([]),[j,N]=n.useState("right"),S=n.useRef(null),C=s=>{if(s.preventDefault(),r.trim()){const a=r.trim();window.location.href=`/catalogo?search=${encodeURIComponent(a)}`}return!1},I=s=>{if(s.key==="Enter"&&(s.preventDefault(),r.trim())){const a=r.trim();window.location.href=`/catalogo?search=${encodeURIComponent(a)}`}},h=(s,a="right",t=null)=>{N(a),t&&x(t),setTimeout(()=>{o(s)},50)},k=s=>{s.subcategories&&s.subcategories.length>0?(u(s.name),b([...c,{level:i,name:"Categorías"}]),h("subcategories","right",s.name)):window.location.href=`/catalogo?category=${s.slug}`},M=()=>{if(c.length>0){const s=c[c.length-1];h(s.level,"left"),b(c.slice(0,-1))}else i==="subcategories"?h("categories","left"):i==="categories"&&!l&&h("main","left")},E=s=>{h("categories","right")},D=()=>{if(i==="main")return e.jsxs("div",{className:"animate-fade animate-duration-300",children:[e.jsxs("button",{className:"px-4 py-2 mb-3 w-full flex justify-between items-center hover:bg-gray-50 active:bg-primary transition-all  rounded-xl",onClick:()=>E(),children:[e.jsx("div",{className:"flex items-center",children:e.jsx("span",{className:"font-medium",children:"Categorías"})}),e.jsx(v,{className:"h-5 w-5 customtext-neutral-light"})]}),d&&d.length>0&&e.jsx("div",{className:"space-y-2",children:d.map((s,a)=>s.menuable&&e.jsx("a",{href:s.path,className:"p-4 py-2 flex justify-between items-center w-full hover:bg-gray-50 active:bg-primary transition-all  rounded-xl",children:e.jsx("span",{className:"font-medium",children:s.name})},a))})]});if(i==="categories"){const s=[...f].sort((a,t)=>a.name.localeCompare(t.name,"es",{sensitivity:"base"}));return e.jsx("div",{className:j==="right"?"animate-fade-left animate-duration-300":"animate-fade-right animate-duration-300",children:e.jsx("div",{className:"space-y-2",children:s.map(a=>{const t=a.subcategories&&a.subcategories.length>0;return e.jsxs("div",{className:"px-4 py-2 rounded-xl flex justify-between items-center cursor-pointer hover:bg-gray-50 transition-all",onClick:()=>k(a),children:[e.jsx("div",{className:"flex flex-col",children:e.jsx("span",{className:"font-medium",children:a.name})}),t?e.jsx(v,{className:"h-5 w-5 customtext-neutral-light"}):e.jsx(e.Fragment,{})]},a.id)})})})}else if(i==="subcategories"&&g){const s=f.find(t=>t.name===g),a=s.subcategories?[...s.subcategories].sort((t,y)=>t.name.localeCompare(y.name,"es",{sensitivity:"base"})):[];return e.jsx("div",{className:j==="right"?"animate-fade-left animate-duration-300":"animate-fade-right animate-duration-300",children:e.jsx("div",{className:"space-y-2",children:a.map((t,y)=>e.jsxs("a",{href:`/catalogo?subcategory=${t.slug}`,className:"flex w-full px-4  py-2 rounded-xl justify-between items-center hover:bg-gray-50 active:bg-primary transition-all",children:[e.jsx("span",{className:"font-medium",children:t.name}),e.jsx(v,{className:"h-5 w-5 customtext-neutral-light"})]},y))})})}};return n.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[]),n.useEffect(()=>{const s=a=>{a.key==="Escape"&&(r.trim()?m(""):p())};return document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s)}},[r,p,m]),e.jsxs("div",{className:"flex flex-col h-full bg-white",children:[e.jsx("div",{className:"px-6 pt-8 pb-4",children:e.jsx("div",{className:"relative",children:e.jsxs("form",{onSubmit:C,role:"search",className:"relative w-full",children:[e.jsx("input",{ref:S,type:"search",name:"search",placeholder:"¿Qué estás buscando hoy?",value:r,onChange:s=>m(s.target.value),onKeyDown:I,className:"w-full pr-12 py-4 pl-5 bg-gray-50/80 shadow-sm border-0 rounded-2xl focus:ring-4 focus:ring-primary/10 focus:outline-none text-base",enterKeyHint:"search",inputMode:"search",autoComplete:"off",role:"searchbox","aria-label":"Buscar productos"}),e.jsx("button",{type:"submit",className:"absolute right-3 top-1/2 transform -translate-y-1/2 p-3 bg-primary text-white rounded-xl hover:bg-primary/90 transition-all duration-300 shadow-md hover:shadow-lg","aria-label":"Buscar",children:e.jsx($,{className:"h-4 w-4"})})]})})}),e.jsxs("div",{className:"flex-1 overflow-hidden",children:[i!=="main"&&!l||l&&i==="subcategories"?e.jsx("div",{className:"px-6 mb-4",children:e.jsxs("button",{onClick:M,className:"flex items-center space-x-2 text-primary font-medium bg-primary/5 px-4 py-2 rounded-xl transition-all duration-300 hover:bg-primary/10",children:[e.jsx(T,{className:"h-5 w-5"}),e.jsx("span",{children:i==="categories"?"Menú principal":"Categorías"})]})}):null,e.jsx("div",{className:"h-full overflow-y-auto px-6 pb-6 hide-scrollbar",children:e.jsx("div",{className:"space-y-3",children:D()})})]}),e.jsx("div",{className:"mt-auto border-t border-gray-100",children:e.jsx("div",{className:"px-6 py-4 bg-gray-50/50 backdrop-blur-sm rounded-t-3xl",children:e.jsx(R,{visible:!0})})})]})}const q=({uuid:r,name:m,lastname:d,className:f})=>{const[p,l]=n.useState(!1),[i,o]=n.useState(!1),[g,x]=n.useState("");return n.useEffect(()=>{if(!r){l(!0);return}(async()=>{try{const u=`/api/profile/thumbnail/${r}?v=${new Date().getTime()}`;(await fetch(u,{method:"HEAD"})).headers.get("content-type").includes("svg")?o(!1):(x(u),o(!0))}catch{o(!1)}finally{l(!0)}})()},[r]),p?e.jsx(e.Fragment,{children:i?e.jsx("img",{src:g,alt:`${m} ${d}`,className:f,onError:()=>o(!1)}):e.jsx(L,{className:" !w-7 !h-7 customtext-primary border-primary rounded-full ring-secondary transition-all duration-300"})}):e.jsx("div",{className:"!w-7 !h-7  bg-secondary rounded-full animate-pulse flex items-center justify-center",children:e.jsx("div",{className:"w-3 h-3 bg-primary rounded-full"})})};export{Q as M,q as P};
