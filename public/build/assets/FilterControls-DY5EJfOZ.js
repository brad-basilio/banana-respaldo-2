import{c as G}from"./createLucideIcon-Cy5Ya80P.js";import{j as c}from"./AboutSimple-Cf8x2fCZ.js";import{r as S}from"./index-BH53Isel.js";import{a as f,D as Se}from"./EditorMain-iD8VdMfn.js";import{S as Oe}from"./sparkles-DeLUn6av.js";import{S as Ne}from"./sliders-vertical-C5ts4taK.js";import{P as Ce}from"./palette-DV_Vpyg9.js";import{S as Ie}from"./settings-BSPs3Zt8.js";import{C as M}from"./chevron-up-D78jyEhP.js";import{C as k}from"./chevron-down-DS-mdh9v.js";/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wr=G("Redo2",[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13",key:"6uklza"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=G("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xr=G("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]]);function H({children:t,onClick:e,className:r="",variant:n="default",size:s="default",disabled:i=!1,icon:o=null}){const a="inline-flex items-center justify-center rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",d={default:"bg-purple-600 text-white hover:bg-primary",outline:"border border-input hover:bg-primary hover:text-white",ghost:"hover:bg-primary hover:text-white",secondary:"bg-gray-100 text-gray-800 hover:bg-gray-200"},g={default:"h-10 py-2 px-4",sm:"py-1 px-3 rounded-md text-sm",lg:"h-11 px-8 rounded-md",icon:"h-10 w-10","icon-sm":"h-8 w-8"};return c.jsxs("button",{className:`${a} ${d[n]} ${g[s]} ${r} gap-2`,onClick:e,disabled:i,children:[o&&c.jsx("span",{className:"w-4 h-4",children:o}),t]})}const D=({value:t=50,min:e=0,max:r=100,step:n=1,onChange:s,onValueChange:i,label:o,unit:a="%"})=>{const[d,g]=S.useState(t);S.useEffect(()=>{g(t)},[t]);const p=m=>{const l=Number.parseFloat(m.target.value);g(l),s&&s(l),i&&i([l])};return c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:o}),c.jsxs("span",{className:"text-sm text-gray-500",children:[d,a]})]}),c.jsx("div",{className:"relative flex w-full touch-none select-none items-center",children:c.jsx("input",{type:"range",min:e,max:r,step:n,value:d,onChange:p,className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-purple-600 slider-thumb",style:{background:`linear-gradient(to right, #9333ea 0%, #9333ea ${(d-e)/(r-e)*100}%, #e5e7eb ${(d-e)/(r-e)*100}%, #e5e7eb 100%)`}})})]})},Er=[{id:"layout-1",name:"Básico - Una Celda",description:"Layout básico con una sola celda que ocupa toda la página",category:"basic",template:"grid-cols-1 grid-rows-1",cells:1,style:{gap:"0px",padding:"0px"},cellStyles:{0:"rounded-lg overflow-hidden shadow-lg"},maskCategories:[{name:"Básico",masks:["none","rounded","soft-rounded"]}]},{id:"layout-2",name:"Básico - Dos Celdas",description:"Layout básico con dos celdas horizontales",category:"basic",template:"grid-cols-2 grid-rows-1",cells:2,style:{gap:"16px",padding:"16px"},cellStyles:{0:"rounded-lg overflow-hidden shadow-lg",1:"rounded-lg overflow-hidden shadow-lg"},maskCategories:[{name:"Básico",masks:["none","rounded","soft-rounded"]}]},{id:"layout-3",name:"Básico - Tres Celdas",description:"Layout básico con tres celdas",category:"basic",template:"grid-cols-3 grid-rows-1",cells:3,style:{gap:"12px",padding:"16px"},cellStyles:{0:"rounded-lg overflow-hidden shadow-lg",1:"rounded-lg overflow-hidden shadow-lg",2:"rounded-lg overflow-hidden shadow-lg"},maskCategories:[{name:"Básico",masks:["none","rounded","soft-rounded"]}]},{id:"layout-4",name:"Básico - Cuatro Celdas",description:"Layout básico con cuatro celdas en cuadrícula",category:"basic",template:"grid-cols-2 grid-rows-2",cells:4,style:{gap:"12px",padding:"16px"},cellStyles:{0:"rounded-lg overflow-hidden shadow-lg",1:"rounded-lg overflow-hidden shadow-lg",2:"rounded-lg overflow-hidden shadow-lg",3:"rounded-lg overflow-hidden shadow-lg"},maskCategories:[{name:"Básico",masks:["none","rounded","soft-rounded"]}]},{id:"hero-fullpage",name:"Hero - Página Completa",description:"Una imagen protagonista que ocupa toda la página",category:"hero",template:"grid-cols-1 grid-rows-1",cells:1,style:{gap:"0px",padding:"0px"},cellStyles:{0:"rounded-lg overflow-hidden shadow-2xl"},maskCategories:[{name:"Editorial",masks:["none","soft-vignette","magazine-crop","editorial-frame"]},{name:"Artístico",masks:["film-grain","vintage-border","polaroid-large"]}]},{id:"hero-split",name:"Hero - División Dramática",description:"Dos imágenes grandes con división vertical elegante",category:"hero",template:"grid-cols-2 grid-rows-1 gap-4",cells:2,style:{gap:"10px"},cellStyles:{0:"rounded-lg overflow-hidden",1:"rounded-lg overflow-hidden"},maskCategories:[{name:"Minimalista",masks:["none","soft-rounded","subtle-shadow"]}]},{id:"magazine-asymmetric",name:"Magazine - Asimétrico",description:"Layout editorial con jerarquía visual moderna",category:"editorial",template:"grid-cols-5 grid-rows-3 gap-2",cells:4,style:{gap:"6px"},cellStyles:{0:"col-span-3 row-span-2 rounded-lg overflow-hidden shadow-lg",1:"col-span-2 row-span-1 rounded-md overflow-hidden shadow-md",2:"col-span-2 row-span-1 rounded-md overflow-hidden shadow-md",3:"col-span-5 row-span-1 rounded-md overflow-hidden shadow-sm"},maskCategories:[{name:"Editorial",masks:["none","magazine-crop","editorial-frame","soft-vignette"]},{name:"Moderno",masks:["geometric-crop","minimal-frame","clean-border"]}]},{id:"magazine-grid",name:"Magazine - Grid Moderno",description:"Grid uniforme con espaciado editorial elegante",category:"editorial",template:"grid-cols-3 grid-rows-2 gap-3",cells:6,style:{gap:"8px",padding:"4px"},cellStyles:{0:"rounded-lg overflow-hidden shadow-md hover:shadow-xl transition-shadow",1:"rounded-lg overflow-hidden shadow-md hover:shadow-xl transition-shadow",2:"rounded-lg overflow-hidden shadow-md hover:shadow-xl transition-shadow",3:"rounded-lg overflow-hidden shadow-md hover:shadow-xl transition-shadow",4:"rounded-lg overflow-hidden shadow-md hover:shadow-xl transition-shadow",5:"rounded-lg overflow-hidden shadow-md hover:shadow-xl transition-shadow"},maskCategories:[{name:"Uniformes",masks:["none","rounded","soft-rounded","minimal-frame"]}]},{id:"minimal-duo",name:"Minimal - Dúo Elegante",description:"Dos imágenes con mucho espacio blanco",category:"minimal",template:"grid-cols-1 grid-rows-2 gap-8",cells:2,style:{gap:"32px",padding:"24px"},cellStyles:{0:"rounded-xl overflow-hidden shadow-2xl",1:"rounded-xl overflow-hidden shadow-2xl"},maskCategories:[{name:"Limpio",masks:["none","clean-border","minimal-frame","soft-shadow"]}]},{id:"classic-quad",name:"Clásico - Cuadrícula Premium",description:"Cuatro imágenes con estilo editorial premium",category:"classic",template:"grid-cols-2 grid-rows-2 gap-4",cells:4,style:{gap:"12px",padding:"8px"},cellStyles:{0:"rounded-xl overflow-hidden shadow-xl hover:shadow-2xl transition-all duration-300",1:"rounded-xl overflow-hidden shadow-xl hover:shadow-2xl transition-all duration-300",2:"rounded-xl overflow-hidden shadow-xl hover:shadow-2xl transition-all duration-300",3:"rounded-xl overflow-hidden shadow-xl hover:shadow-2xl transition-all duration-300"},maskCategories:[{name:"Premium",masks:["none","rounded","soft-rounded","premium-frame","elegant-border","classic-shadow","editorial-crop"]},{name:"Artístico",masks:["vintage","film-grain","classic-vignette","sepia-tone","black-white-frame","retro-border"]}]},{id:"classic-portrait",name:"Clásico - Retrato Elegante",description:"Layout perfecto para retratos y fotos verticales",category:"classic",template:"grid-cols-3 grid-rows-2 gap-3",cells:3,style:{gap:"10px"},cellStyles:{0:"col-span-2 row-span-2 rounded-2xl overflow-hidden shadow-2xl",1:"col-span-1 row-span-1 rounded-lg overflow-hidden shadow-lg",2:"col-span-1 row-span-1 rounded-lg overflow-hidden shadow-lg"},maskCategories:[{name:"Retrato",masks:["none","portrait-frame","elegant-oval","classic-border"]}]}];function x(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var Z=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),K=function(){return Math.random().toString(36).substring(7).split("").join(".")},ee={INIT:"@@redux/INIT"+K(),REPLACE:"@@redux/REPLACE"+K()};function je(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function de(t,e,r){var n;if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(x(0));if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(x(1));return r(de)(t,e)}if(typeof t!="function")throw new Error(x(2));var s=t,i=e,o=[],a=o,d=!1;function g(){a===o&&(a=o.slice())}function p(){if(d)throw new Error(x(3));return i}function m(h){if(typeof h!="function")throw new Error(x(4));if(d)throw new Error(x(5));var y=!0;return g(),a.push(h),function(){if(y){if(d)throw new Error(x(6));y=!1,g();var w=a.indexOf(h);a.splice(w,1),o=null}}}function l(h){if(!je(h))throw new Error(x(7));if(typeof h.type>"u")throw new Error(x(8));if(d)throw new Error(x(9));try{d=!0,i=s(i,h)}finally{d=!1}for(var y=o=a,b=0;b<y.length;b++){var w=y[b];w()}return h}function u(h){if(typeof h!="function")throw new Error(x(10));s=h,l({type:ee.REPLACE})}function v(){var h,y=m;return h={subscribe:function(w){if(typeof w!="object"||w===null)throw new Error(x(11));function T(){w.next&&w.next(p())}T();var A=y(T);return{unsubscribe:A}}},h[Z]=function(){return this},h}return l({type:ee.INIT}),n={dispatch:l,subscribe:m,getState:p,replaceReducer:u},n[Z]=v,n}function Pe(t,e,r){return e.split(".").reduce((n,s)=>n&&n[s]?n[s]:r||null,t)}function _e(t,e){return t.filter(r=>r!==e)}function ue(t){return typeof t=="object"}function Le(t,e){const r=new Map,n=i=>{r.set(i,r.has(i)?r.get(i)+1:1)};t.forEach(n),e.forEach(n);const s=[];return r.forEach((i,o)=>{i===1&&s.push(o)}),s}function Ae(t,e){return t.filter(r=>e.indexOf(r)>-1)}const q="dnd-core/INIT_COORDS",R="dnd-core/BEGIN_DRAG",V="dnd-core/PUBLISH_DRAG_SOURCE",j="dnd-core/HOVER",P="dnd-core/DROP",_="dnd-core/END_DRAG";function te(t,e){return{type:q,payload:{sourceClientOffset:e||null,clientOffset:t||null}}}const Me={type:q,payload:{clientOffset:null,sourceClientOffset:null}};function ke(t){return function(r=[],n={publishSource:!0}){const{publishSource:s=!0,clientOffset:i,getSourceClientOffset:o}=n,a=t.getMonitor(),d=t.getRegistry();t.dispatch(te(i)),He(r,a,d);const g=$e(r,a);if(g==null){t.dispatch(Me);return}let p=null;if(i){if(!o)throw new Error("getSourceClientOffset must be defined");Fe(o),p=o(g)}t.dispatch(te(i,p));const l=d.getSource(g).beginDrag(a,g);if(l==null)return;Ue(l),d.pinSource(g);const u=d.getSourceType(g);return{type:R,payload:{itemType:u,item:l,sourceId:g,clientOffset:i||null,sourceClientOffset:p||null,isSourcePublic:!!s}}}}function He(t,e,r){f(!e.isDragging(),"Cannot call beginDrag while dragging."),t.forEach(function(n){f(r.getSource(n),"Expected sourceIds to be registered.")})}function Fe(t){f(typeof t=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function Ue(t){f(ue(t),"Item must be an object.")}function $e(t,e){let r=null;for(let n=t.length-1;n>=0;n--)if(e.canDragSource(t[n])){r=t[n];break}return r}function ze(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Be(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable}))),n.forEach(function(s){ze(t,s,r[s])})}return t}function Ge(t){return function(r={}){const n=t.getMonitor(),s=t.getRegistry();qe(n),Ye(n).forEach((o,a)=>{const d=Ve(o,a,s,n),g={type:P,payload:{dropResult:Be({},r,d)}};t.dispatch(g)})}}function qe(t){f(t.isDragging(),"Cannot call drop while not dragging."),f(!t.didDrop(),"Cannot call drop twice during one drag operation.")}function Ve(t,e,r,n){const s=r.getTarget(t);let i=s?s.drop(n,t):void 0;return Xe(i),typeof i>"u"&&(i=e===0?{}:n.getDropResult()),i}function Xe(t){f(typeof t>"u"||ue(t),"Drop result must either be an object or undefined.")}function Ye(t){const e=t.getTargetIds().filter(t.canDropOnTarget,t);return e.reverse(),e}function We(t){return function(){const r=t.getMonitor(),n=t.getRegistry();Qe(r);const s=r.getSourceId();return s!=null&&(n.getSource(s,!0).endDrag(r,s),n.unpinSource()),{type:_}}}function Qe(t){f(t.isDragging(),"Cannot call endDrag while not dragging.")}function $(t,e){return e===null?t===null:Array.isArray(t)?t.some(r=>r===e):t===e}function Je(t){return function(r,{clientOffset:n}={}){Ze(r);const s=r.slice(0),i=t.getMonitor(),o=t.getRegistry(),a=i.getItemType();return et(s,o,a),Ke(s,i,o),tt(s,i,o),{type:j,payload:{targetIds:s,clientOffset:n||null}}}}function Ze(t){f(Array.isArray(t),"Expected targetIds to be an array.")}function Ke(t,e,r){f(e.isDragging(),"Cannot call hover while not dragging."),f(!e.didDrop(),"Cannot call hover after drop.");for(let n=0;n<t.length;n++){const s=t[n];f(t.lastIndexOf(s)===n,"Expected targetIds to be unique in the passed array.");const i=r.getTarget(s);f(i,"Expected targetIds to be registered.")}}function et(t,e,r){for(let n=t.length-1;n>=0;n--){const s=t[n],i=e.getTargetType(s);$(i,r)||t.splice(n,1)}}function tt(t,e,r){t.forEach(function(n){r.getTarget(n).hover(e,n)})}function rt(t){return function(){if(t.getMonitor().isDragging())return{type:V}}}function nt(t){return{beginDrag:ke(t),publishDragSource:rt(t),hover:Je(t),drop:Ge(t),endDrag:We(t)}}class st{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const e=this,{dispatch:r}=this.store;function n(i){return(...o)=>{const a=i.apply(e,o);typeof a<"u"&&r(a)}}const s=nt(this);return Object.keys(s).reduce((i,o)=>{const a=s[o];return i[o]=n(a),i},{})}dispatch(e){this.store.dispatch(e)}constructor(e,r){this.isSetUp=!1,this.handleRefCountChange=()=>{const n=this.store.getState().refCount>0;this.backend&&(n&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!n&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=r,e.subscribe(this.handleRefCountChange)}}function it(t,e){return{x:t.x+e.x,y:t.y+e.y}}function ge(t,e){return{x:t.x-e.x,y:t.y-e.y}}function ot(t){const{clientOffset:e,initialClientOffset:r,initialSourceClientOffset:n}=t;return!e||!r||!n?null:ge(it(e,n),r)}function at(t){const{clientOffset:e,initialClientOffset:r}=t;return!e||!r?null:ge(e,r)}const N=[],X=[];N.__IS_NONE__=!0;X.__IS_ALL__=!0;function ct(t,e){return t===N?!1:t===X||typeof e>"u"?!0:Ae(e,t).length>0}class lt{subscribeToStateChange(e,r={}){const{handlerIds:n}=r;f(typeof e=="function","listener must be a function."),f(typeof n>"u"||Array.isArray(n),"handlerIds, when specified, must be an array of strings.");let s=this.store.getState().stateId;const i=()=>{const o=this.store.getState(),a=o.stateId;try{a===s||a===s+1&&!ct(o.dirtyHandlerIds,n)||e()}finally{s=a}};return this.store.subscribe(i)}subscribeToOffsetChange(e){f(typeof e=="function","listener must be a function.");let r=this.store.getState().dragOffset;const n=()=>{const s=this.store.getState().dragOffset;s!==r&&(r=s,e())};return this.store.subscribe(n)}canDragSource(e){if(!e)return!1;const r=this.registry.getSource(e);return f(r,`Expected to find a valid source. sourceId=${e}`),this.isDragging()?!1:r.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;const r=this.registry.getTarget(e);if(f(r,`Expected to find a valid target. targetId=${e}`),!this.isDragging()||this.didDrop())return!1;const n=this.registry.getTargetType(e),s=this.getItemType();return $(n,s)&&r.canDrop(this,e)}isDragging(){return!!this.getItemType()}isDraggingSource(e){if(!e)return!1;const r=this.registry.getSource(e,!0);if(f(r,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()||!this.isSourcePublic())return!1;const n=this.registry.getSourceType(e),s=this.getItemType();return n!==s?!1:r.isDragging(this,e)}isOverTarget(e,r={shallow:!1}){if(!e)return!1;const{shallow:n}=r;if(!this.isDragging())return!1;const s=this.registry.getTargetType(e),i=this.getItemType();if(i&&!$(s,i))return!1;const o=this.getTargetIds();if(!o.length)return!1;const a=o.indexOf(e);return n?a===o.length-1:a>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return ot(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return at(this.store.getState().dragOffset)}constructor(e,r){this.store=e,this.registry=r}}const re=typeof global<"u"?global:self,fe=re.MutationObserver||re.WebKitMutationObserver;function he(t){return function(){const r=setTimeout(s,0),n=setInterval(s,50);function s(){clearTimeout(r),clearInterval(n),t()}}}function dt(t){let e=1;const r=new fe(t),n=document.createTextNode("");return r.observe(n,{characterData:!0}),function(){e=-e,n.data=e}}const ut=typeof fe=="function"?dt:he;class gt{enqueueTask(e){const{queue:r,requestFlush:n}=this;r.length||(n(),this.flushing=!0),r[r.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:e}=this;for(;this.index<e.length;){const r=this.index;if(this.index++,e[r].call(),this.index>this.capacity){for(let n=0,s=e.length-this.index;n<s;n++)e[n]=e[n+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=ut(this.flush),this.requestErrorThrow=he(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class ft{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,r){this.onError=e,this.release=r,this.task=null}}class ht{create(e){const r=this.freeTasks,n=r.length?r.pop():new ft(this.onError,s=>r[r.length]=s);return n.task=e,n}constructor(e){this.onError=e,this.freeTasks=[]}}const pe=new gt,pt=new ht(pe.registerPendingError);function mt(t){pe.enqueueTask(pt.create(t))}const Y="dnd-core/ADD_SOURCE",W="dnd-core/ADD_TARGET",Q="dnd-core/REMOVE_SOURCE",L="dnd-core/REMOVE_TARGET";function vt(t){return{type:Y,payload:{sourceId:t}}}function yt(t){return{type:W,payload:{targetId:t}}}function bt(t){return{type:Q,payload:{sourceId:t}}}function wt(t){return{type:L,payload:{targetId:t}}}function xt(t){f(typeof t.canDrag=="function","Expected canDrag to be a function."),f(typeof t.beginDrag=="function","Expected beginDrag to be a function."),f(typeof t.endDrag=="function","Expected endDrag to be a function.")}function Et(t){f(typeof t.canDrop=="function","Expected canDrop to be a function."),f(typeof t.hover=="function","Expected hover to be a function."),f(typeof t.drop=="function","Expected beginDrag to be a function.")}function z(t,e){if(e&&Array.isArray(t)){t.forEach(r=>z(r,!1));return}f(typeof t=="string"||typeof t=="symbol",e?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var E;(function(t){t.SOURCE="SOURCE",t.TARGET="TARGET"})(E||(E={}));let Dt=0;function Tt(){return Dt++}function St(t){const e=Tt().toString();switch(t){case E.SOURCE:return`S${e}`;case E.TARGET:return`T${e}`;default:throw new Error(`Unknown Handler Role: ${t}`)}}function ne(t){switch(t[0]){case"S":return E.SOURCE;case"T":return E.TARGET;default:throw new Error(`Cannot parse handler ID: ${t}`)}}function se(t,e){const r=t.entries();let n=!1;do{const{done:s,value:[,i]}=r.next();if(i===e)return!0;n=!!s}while(!n);return!1}class Ot{addSource(e,r){z(e),xt(r);const n=this.addHandler(E.SOURCE,e,r);return this.store.dispatch(vt(n)),n}addTarget(e,r){z(e,!0),Et(r);const n=this.addHandler(E.TARGET,e,r);return this.store.dispatch(yt(n)),n}containsHandler(e){return se(this.dragSources,e)||se(this.dropTargets,e)}getSource(e,r=!1){return f(this.isSourceId(e),"Expected a valid source ID."),r&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return f(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}getSourceType(e){return f(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}getTargetType(e){return f(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}isSourceId(e){return ne(e)===E.SOURCE}isTargetId(e){return ne(e)===E.TARGET}removeSource(e){f(this.getSource(e),"Expected an existing source."),this.store.dispatch(bt(e)),mt(()=>{this.dragSources.delete(e),this.types.delete(e)})}removeTarget(e){f(this.getTarget(e),"Expected an existing target."),this.store.dispatch(wt(e)),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){const r=this.getSource(e);f(r,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=r}unpinSource(){f(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,r,n){const s=St(e);return this.types.set(s,r),e===E.SOURCE?this.dragSources.set(s,n):e===E.TARGET&&this.dropTargets.set(s,n),s}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}}const Nt=(t,e)=>t===e;function Ct(t,e){return!t&&!e?!0:!t||!e?!1:t.x===e.x&&t.y===e.y}function It(t,e,r=Nt){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!r(t[n],e[n]))return!1;return!0}function Rt(t=N,e){switch(e.type){case j:break;case Y:case W:case L:case Q:return N;case R:case V:case _:case P:default:return X}const{targetIds:r=[],prevTargetIds:n=[]}=e.payload,s=Le(r,n);if(!(s.length>0||!It(r,n)))return N;const o=n[n.length-1],a=r[r.length-1];return o!==a&&(o&&s.push(o),a&&s.push(a)),s}function jt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Pt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable}))),n.forEach(function(s){jt(t,s,r[s])})}return t}const ie={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function _t(t=ie,e){const{payload:r}=e;switch(e.type){case q:case R:return{initialSourceClientOffset:r.sourceClientOffset,initialClientOffset:r.clientOffset,clientOffset:r.clientOffset};case j:return Ct(t.clientOffset,r.clientOffset)?t:Pt({},t,{clientOffset:r.clientOffset});case _:case P:return ie;default:return t}}function Lt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function O(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable}))),n.forEach(function(s){Lt(t,s,r[s])})}return t}const At={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function Mt(t=At,e){const{payload:r}=e;switch(e.type){case R:return O({},t,{itemType:r.itemType,item:r.item,sourceId:r.sourceId,isSourcePublic:r.isSourcePublic,dropResult:null,didDrop:!1});case V:return O({},t,{isSourcePublic:!0});case j:return O({},t,{targetIds:r.targetIds});case L:return t.targetIds.indexOf(r.targetId)===-1?t:O({},t,{targetIds:_e(t.targetIds,r.targetId)});case P:return O({},t,{dropResult:r.dropResult,didDrop:!0,targetIds:[]});case _:return O({},t,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return t}}function kt(t=0,e){switch(e.type){case Y:case W:return t+1;case Q:case L:return t-1;default:return t}}function Ht(t=0){return t+1}function Ft(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ut(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable}))),n.forEach(function(s){Ft(t,s,r[s])})}return t}function $t(t={},e){return{dirtyHandlerIds:Rt(t.dirtyHandlerIds,{type:e.type,payload:Ut({},e.payload,{prevTargetIds:Pe(t,"dragOperation.targetIds",[])})}),dragOffset:_t(t.dragOffset,e),refCount:kt(t.refCount,e),dragOperation:Mt(t.dragOperation,e),stateId:Ht(t.stateId)}}function zt(t,e=void 0,r={},n=!1){const s=Bt(n),i=new lt(s,new Ot(s)),o=new st(s,i),a=t(o,e,r);return o.receiveBackend(a),o}function Bt(t){const e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return de($t,t&&e&&e({name:"dnd-core",instanceId:"dnd-core"}))}function Gt(t,e){if(t==null)return{};var r=qt(t,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function qt(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,i;for(i=0;i<n.length;i++)s=n[i],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}let oe=0;const I=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var Dr=S.memo(function(e){var{children:r}=e,n=Gt(e,["children"]);const[s,i]=Vt(n);return S.useEffect(()=>{if(i){const o=me();return++oe,()=>{--oe===0&&(o[I]=null)}}},[]),c.jsx(Se.Provider,{value:s,children:r})});function Vt(t){if("manager"in t)return[{dragDropManager:t.manager},!1];const e=Xt(t.backend,t.context,t.options,t.debugMode),r=!t.context;return[e,r]}function Xt(t,e=me(),r,n){const s=e;return s[I]||(s[I]={dragDropManager:zt(t,e,r,n)}),s[I]}function me(){return typeof global<"u"?global:window}function ve(t){let e=null;return()=>(e==null&&(e=t()),e)}function Yt(t,e){return t.filter(r=>r!==e)}function Wt(t,e){const r=new Set,n=i=>r.add(i);t.forEach(n),e.forEach(n);const s=[];return r.forEach(i=>s.push(i)),s}class Qt{enter(e){const r=this.entered.length,n=s=>this.isNodeInDocument(s)&&(!s.contains||s.contains(e));return this.entered=Wt(this.entered.filter(n),[e]),r===0&&this.entered.length>0}leave(e){const r=this.entered.length;return this.entered=Yt(this.entered.filter(this.isNodeInDocument),e),r>0&&this.entered.length===0}reset(){this.entered=[]}constructor(e){this.entered=[],this.isNodeInDocument=e}}class Jt{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(e=>{Object.defineProperty(this.item,e,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${e}" until the drop event.`),null}})})}loadDataTransfer(e){if(e){const r={};Object.keys(this.config.exposeProperties).forEach(n=>{const s=this.config.exposeProperties[n];s!=null&&(r[n]={value:s(e,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,r)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(e,r){return r===e.getSourceId()}endDrag(){}constructor(e){this.config=e,this.item={},this.initializeExposedProperties()}}const ye="__NATIVE_FILE__",be="__NATIVE_URL__",we="__NATIVE_TEXT__",xe="__NATIVE_HTML__",ae=Object.freeze(Object.defineProperty({__proto__:null,FILE:ye,HTML:xe,TEXT:we,URL:be},Symbol.toStringTag,{value:"Module"}));function F(t,e,r){const n=e.reduce((s,i)=>s||t.getData(i),"");return n??r}const B={[ye]:{exposeProperties:{files:t=>Array.prototype.slice.call(t.files),items:t=>t.items,dataTransfer:t=>t},matchesTypes:["Files"]},[xe]:{exposeProperties:{html:(t,e)=>F(t,e,""),dataTransfer:t=>t},matchesTypes:["Html","text/html"]},[be]:{exposeProperties:{urls:(t,e)=>F(t,e,"").split(`
`),dataTransfer:t=>t},matchesTypes:["Url","text/uri-list"]},[we]:{exposeProperties:{text:(t,e)=>F(t,e,""),dataTransfer:t=>t},matchesTypes:["Text","text/plain"]}};function Zt(t,e){const r=B[t];if(!r)throw new Error(`native type ${t} has no configuration`);const n=new Jt(r);return n.loadDataTransfer(e),n}function U(t){if(!t)return null;const e=Array.prototype.slice.call(t.types||[]);return Object.keys(B).filter(r=>{const n=B[r];return n!=null&&n.matchesTypes?n.matchesTypes.some(s=>e.indexOf(s)>-1):!1})[0]||null}const Kt=ve(()=>/firefox/i.test(navigator.userAgent)),Ee=ve(()=>!!window.safari);class ce{interpolate(e){const{xs:r,ys:n,c1s:s,c2s:i,c3s:o}=this;let a=r.length-1;if(e===r[a])return n[a];let d=0,g=o.length-1,p;for(;d<=g;){p=Math.floor(.5*(d+g));const u=r[p];if(u<e)d=p+1;else if(u>e)g=p-1;else return n[p]}a=Math.max(0,g);const m=e-r[a],l=m*m;return n[a]+s[a]*m+i[a]*l+o[a]*m*l}constructor(e,r){const{length:n}=e,s=[];for(let u=0;u<n;u++)s.push(u);s.sort((u,v)=>e[u]<e[v]?-1:1);const i=[],o=[];let a,d;for(let u=0;u<n-1;u++)a=e[u+1]-e[u],d=r[u+1]-r[u],i.push(a),o.push(d/a);const g=[o[0]];for(let u=0;u<i.length-1;u++){const v=o[u],h=o[u+1];if(v*h<=0)g.push(0);else{a=i[u];const y=i[u+1],b=a+y;g.push(3*b/((b+y)/v+(b+a)/h))}}g.push(o[o.length-1]);const p=[],m=[];let l;for(let u=0;u<g.length-1;u++){l=o[u];const v=g[u],h=1/i[u],y=v+g[u+1]-l-l;p.push((l-v-y)*h),m.push(y*h*h)}this.xs=e,this.ys=r,this.c1s=g,this.c2s=p,this.c3s=m}}const er=1;function De(t){const e=t.nodeType===er?t:t.parentElement;if(!e)return null;const{top:r,left:n}=e.getBoundingClientRect();return{x:n,y:r}}function C(t){return{x:t.clientX,y:t.clientY}}function tr(t){var e;return t.nodeName==="IMG"&&(Kt()||!(!((e=document.documentElement)===null||e===void 0)&&e.contains(t)))}function rr(t,e,r,n){let s=t?e.width:r,i=t?e.height:n;return Ee()&&t&&(i/=window.devicePixelRatio,s/=window.devicePixelRatio),{dragPreviewWidth:s,dragPreviewHeight:i}}function nr(t,e,r,n,s){const i=tr(e),a=De(i?t:e),d={x:r.x-a.x,y:r.y-a.y},{offsetWidth:g,offsetHeight:p}=t,{anchorX:m,anchorY:l}=n,{dragPreviewWidth:u,dragPreviewHeight:v}=rr(i,e,g,p),h=()=>{let J=new ce([0,.5,1],[d.y,d.y/p*v,d.y+v-p]).interpolate(l);return Ee()&&i&&(J+=(window.devicePixelRatio-1)*v),J},y=()=>new ce([0,.5,1],[d.x,d.x/g*u,d.x+u-g]).interpolate(m),{offsetX:b,offsetY:w}=s,T=b===0||b,A=w===0||w;return{x:T?b:y(),y:A?w:h()}}class sr{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var e;return!((e=this.globalContext)===null||e===void 0)&&e.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var e;return((e=this.optionsArgs)===null||e===void 0?void 0:e.rootElement)||this.window}constructor(e,r){this.ownerDocument=null,this.globalContext=e,this.optionsArgs=r}}function ir(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function le(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable}))),n.forEach(function(s){ir(t,s,r[s])})}return t}class or{profile(){var e,r;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((e=this.dragStartSourceIds)===null||e===void 0?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((r=this.dragOverTargetIds)===null||r===void 0?void 0:r.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const e=this.rootElement;if(e!==void 0){if(e.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}teardown(){const e=this.rootElement;if(e!==void 0&&(e.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var r;(r=this.window)===null||r===void 0||r.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(e,r,n){return this.sourcePreviewNodeOptions.set(e,n),this.sourcePreviewNodes.set(e,r),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDragSource(e,r,n){this.sourceNodes.set(e,r),this.sourceNodeOptions.set(e,n);const s=o=>this.handleDragStart(o,e),i=o=>this.handleSelectStart(o);return r.setAttribute("draggable","true"),r.addEventListener("dragstart",s),r.addEventListener("selectstart",i),()=>{this.sourceNodes.delete(e),this.sourceNodeOptions.delete(e),r.removeEventListener("dragstart",s),r.removeEventListener("selectstart",i),r.setAttribute("draggable","false")}}connectDropTarget(e,r){const n=o=>this.handleDragEnter(o,e),s=o=>this.handleDragOver(o,e),i=o=>this.handleDrop(o,e);return r.addEventListener("dragenter",n),r.addEventListener("dragover",s),r.addEventListener("drop",i),()=>{r.removeEventListener("dragenter",n),r.removeEventListener("dragover",s),r.removeEventListener("drop",i)}}addEventListeners(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const e=this.monitor.getSourceId(),r=this.sourceNodeOptions.get(e);return le({dropEffect:this.altKeyPressed?"copy":"move"},r||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const e=this.monitor.getSourceId(),r=this.sourcePreviewNodeOptions.get(e);return le({anchorX:.5,anchorY:.5,captureDraggingState:!1},r||{})}isDraggingNativeItem(){const e=this.monitor.getItemType();return Object.keys(ae).some(r=>ae[r]===e)}beginDragNativeItem(e,r){this.clearCurrentDragSourceNode(),this.currentNativeSource=Zt(e,r),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;const r=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var n;return(n=this.rootElement)===null||n===void 0?void 0:n.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},r)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var e;(e=this.window)===null||e===void 0||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e,r){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(r))}handleDragEnter(e,r){this.dragEnterTargetIds.unshift(r)}handleDragOver(e,r){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(r)}handleDrop(e,r){this.dropTargetIds.unshift(r)}constructor(e,r,n){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=s=>{const i=this.sourceNodes.get(s);return i&&De(i)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=s=>!!(s&&this.document&&this.document.body&&this.document.body.contains(s)),this.endDragIfSourceWasRemovedFromDOM=()=>{const s=this.currentDragSourceNode;s==null||this.isNodeInDocument(s)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=s=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(s||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=s=>{if(s.defaultPrevented)return;const{dragStartSourceIds:i}=this;this.dragStartSourceIds=null;const o=C(s);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(i||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:o});const{dataTransfer:a}=s,d=U(a);if(this.monitor.isDragging()){if(a&&typeof a.setDragImage=="function"){const p=this.monitor.getSourceId(),m=this.sourceNodes.get(p),l=this.sourcePreviewNodes.get(p)||m;if(l){const{anchorX:u,anchorY:v,offsetX:h,offsetY:y}=this.getCurrentSourcePreviewNodeOptions(),T=nr(m,l,o,{anchorX:u,anchorY:v},{offsetX:h,offsetY:y});a.setDragImage(l,T.x,T.y)}}try{a==null||a.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(s.target);const{captureDraggingState:g}=this.getCurrentSourcePreviewNodeOptions();g?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(d)this.beginDragNativeItem(d);else{if(a&&!a.types&&(s.target&&!s.target.hasAttribute||!s.target.hasAttribute("draggable")))return;s.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=s=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var i;(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(s.dataTransfer)}if(!this.enterLeaveCounter.enter(s.target)||this.monitor.isDragging())return;const{dataTransfer:a}=s,d=U(a);d&&this.beginDragNativeItem(d,a)},this.handleTopDragEnter=s=>{const{dragEnterTargetIds:i}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=s.altKey,i.length>0&&this.actions.hover(i,{clientOffset:C(s)}),i.some(a=>this.monitor.canDropOnTarget(a))&&(s.preventDefault(),s.dataTransfer&&(s.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=s=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var i;(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(s.dataTransfer)}},this.handleTopDragOver=s=>{const{dragOverTargetIds:i}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){s.preventDefault(),s.dataTransfer&&(s.dataTransfer.dropEffect="none");return}this.altKeyPressed=s.altKey,this.lastClientOffset=C(s),this.scheduleHover(i),(i||[]).some(a=>this.monitor.canDropOnTarget(a))?(s.preventDefault(),s.dataTransfer&&(s.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?s.preventDefault():(s.preventDefault(),s.dataTransfer&&(s.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=s=>{this.isDraggingNativeItem()&&s.preventDefault(),this.enterLeaveCounter.leave(s.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=s=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var i;s.preventDefault(),(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(s.dataTransfer)}else U(s.dataTransfer)&&s.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=s=>{const{dropTargetIds:i}=this;this.dropTargetIds=[],this.actions.hover(i,{clientOffset:C(s)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=s=>{const i=s.target;typeof i.dragDrop=="function"&&(i.tagName==="INPUT"||i.tagName==="SELECT"||i.tagName==="TEXTAREA"||i.isContentEditable||(s.preventDefault(),i.dragDrop()))},this.options=new sr(r,n),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new Qt(this.isNodeInDocument)}}const Tr=function(e,r,n){return new or(e,r,n)},ar=[{name:"Original",filters:{brightness:100,contrast:100,saturation:100,tint:0,hue:0,blur:0}},{name:"Vintage",filters:{brightness:95,contrast:105,saturation:90,tint:30,hue:10,blur:.5}},{name:"Monocromo",filters:{brightness:100,contrast:120,saturation:0,tint:0,hue:0,blur:0}},{name:"High Contrast",filters:{brightness:110,contrast:130,saturation:110,tint:0,hue:0,blur:0}},{name:"Matte",filters:{brightness:90,contrast:90,saturation:80,tint:15,hue:10,blur:0}},{name:"Cálido",filters:{brightness:100,contrast:105,saturation:115,tint:20,hue:30,blur:0}},{name:"Frío",filters:{brightness:100,contrast:105,saturation:110,tint:0,hue:190,blur:0}},{name:"Retrato Suave",filters:{brightness:105,contrast:95,saturation:105,tint:10,hue:15,blur:.3}},{name:"Cine",filters:{brightness:90,contrast:120,saturation:90,tint:20,hue:-10,blur:0}},{name:"Noche",filters:{brightness:80,contrast:110,saturation:80,tint:10,hue:220,blur:.4}}],cr=({onSelectPreset:t,selectedImage:e})=>{const r=n=>{const s={filter:`
                brightness(${(n.brightness??100)/100})
                contrast(${(n.contrast??100)/100})
                saturate(${(n.saturation??100)/100})
                sepia(${(n.tint??0)/100})
                hue-rotate(${n.hue??0}deg)
                blur(${n.blur??0}px)
            `.replace(/\s+/g," ").trim(),transform:`scale(${n.scale??1}) rotate(${n.rotate??0}deg) ${n.flipHorizontal?"scaleX(-1)":""} ${n.flipVertical?"scaleY(-1)":""}`.replace(/\s+/g," ").trim(),mixBlendMode:n.blendMode??"normal",opacity:(n.opacity??100)/100};return console.log("🎨 [FilterPresets] Aplicando filtro:",n.name||"unknown",{filters:n,generatedStyle:s}),s};return c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Filtros predefinidos"}),c.jsx("div",{className:"grid grid-cols-2 gap-4",children:ar.map(n=>c.jsxs("div",{className:"relative group cursor-pointer rounded-xl overflow-hidden border border-gray-100 bg-white hover:shadow-md transition duration-300",onClick:()=>{console.log("🎯 [FilterPresets] Aplicando preset:",n.name,n.filters),t(n.filters)},children:[c.jsx("div",{className:"aspect-square bg-gray-100 overflow-hidden",children:e?c.jsx("img",{src:e.content,alt:`Previsualización de ${n.name}`,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105",style:r({...n.filters,name:n.name})}):c.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:c.jsx("span",{className:"text-sm text-center px-2",children:"Selecciona una imagen"})})}),c.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/60 to-transparent px-3 py-2",children:c.jsx("p",{className:"text-white text-sm font-medium",children:n.name})}),c.jsx("div",{className:"absolute inset-0 bg-black/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center",children:c.jsx("div",{className:"bg-white rounded-full p-2 shadow-md",children:c.jsx(Oe,{className:"w-5 h-5 customtext-primary"})})})]},n.name))})]})},lr=({filters:t={},onFilterChange:e,selectedElement:r})=>{const n=(s,i)=>{const o={...t,[s]:i};e(o)};return c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"font-medium",children:"Ajustes avanzados"}),c.jsx("div",{className:"space-y-3",children:c.jsx(D,{label:"Opacidad",value:t.opacity??100,onChange:s=>n("opacity",s),min:0,max:100,step:1,unit:"%"})})]})},Sr=({filters:t={},onFilterChange:e,selectedElement:r})=>{const[n,s]=S.useState("basic"),[i,o]=S.useState({basic:!0,color:!0,transform:!1,advanced:!1}),a=l=>{o(u=>({...u,[l]:!u[l]}))},d={brightness:t.brightness??100,contrast:t.contrast??100,saturation:t.saturation??100,tint:t.tint??0,hue:t.hue??0,blur:t.blur??0,scale:t.scale??1,rotate:t.rotate??0,opacity:t.opacity??100,blendMode:t.blendMode??"normal",flipHorizontal:t.flipHorizontal??!1,flipVertical:t.flipVertical??!1},g=(l,u)=>{const v={...d,[l]:u};console.log("🎨 [FilterControls] Actualizando filtro:",{key:l,value:u,newFilters:v}),window.FORCE_THUMBNAIL_REGENERATION&&(console.log("🧨 [EMERGENCIA] Limpiando caché y forzando regeneración por cambio en: "+l),window.thumbnailCache&&(window.thumbnailCache={})),e(v),window.FORCE_THUMBNAIL_REGENERATION&&window.forceRegenerateThumbnail&&setTimeout(()=>{console.log("🚀 [EMERGENCIA] Ejecutando regeneración forzada después de cambio en: "+l);try{window._allowNextRegeneration&&window._allowNextRegeneration(),window.forceRegenerateThumbnail(),setTimeout(()=>{window.lockThumbnailsForever&&(console.log("🔒 [AUTO-PROTECCIÓN] Activando bloqueo permanente después de regenerar"),window.lockThumbnailsForever())},500)}catch(h){console.error("Error al regenerar thumbnail:",h)}},100)},p=()=>{const l={brightness:100,contrast:100,saturation:100,tint:0,hue:0,blur:0,scale:1,rotate:0,opacity:100,blendMode:"normal",flipHorizontal:!1,flipVertical:!1};window.FORCE_THUMBNAIL_REGENERATION&&(console.log("🧨 [EMERGENCIA-RESET] Limpiando caché y forzando regeneración al resetear todos los filtros"),window.thumbnailCache&&(window.thumbnailCache={})),e(l),window.FORCE_THUMBNAIL_REGENERATION&&window.forceRegenerateThumbnail&&setTimeout(()=>{console.log("🚀 [EMERGENCIA-RESET] Ejecutando regeneración forzada después de resetear filtros");try{window.forceRegenerateThumbnail()}catch(u){console.error("Error al regenerar thumbnail después de reset:",u)}},100)},m=[{id:"basic",label:"Básico",icon:Ne},...(r==null?void 0:r.type)==="image"?[{id:"presets",label:"Presets",icon:Ce}]:[],{id:"advanced",label:"Avanzado",icon:Ie}];return S.useEffect(()=>{n==="presets"&&(r==null?void 0:r.type)!=="image"&&s("basic")},[r==null?void 0:r.type,n]),c.jsxs("div",{className:"space-y-3",children:[c.jsx("div",{className:"grid grid-cols-1 gap-1 bg-gray-100 rounded-lg p-1",children:m.map(l=>{const u=l.icon;return c.jsxs("button",{onClick:()=>s(l.id),className:`flex items-center gap-2 py-2 px-3 rounded-md text-xs font-medium transition-colors ${n===l.id?"bg-white text-purple-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:[c.jsx(u,{className:"h-3.5 w-3.5"}),l.label]},l.id)})}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("div",{className:"flex flex-col",children:c.jsxs("span",{className:"text-xs font-medium text-gray-700",children:[n==="basic"&&"Básico",n==="presets"&&"Presets",n==="advanced"&&"Avanzado"]})}),c.jsx(H,{variant:"ghost",size:"sm",onClick:p,className:"text-xs h-6 px-2",icon:c.jsx(Re,{className:"h-3 w-3"}),children:"Reset"})]}),c.jsxs("div",{className:"space-y-3",children:[n==="basic"&&c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Ajustes básicos"}),c.jsx("button",{onClick:()=>a("basic"),className:"text-gray-400 hover:text-gray-600",children:i.basic?c.jsx(M,{className:"h-3 w-3"}):c.jsx(k,{className:"h-3 w-3"})})]}),i.basic&&c.jsxs("div",{className:"space-y-2",children:[c.jsx(D,{label:"Brillo",value:d.brightness,onChange:l=>g("brightness",l),min:0,max:200,step:1,unit:"%"}),c.jsx(D,{label:"Contraste",value:d.contrast,onChange:l=>g("contrast",l),min:0,max:200,step:1,unit:"%"}),c.jsx(D,{label:"Saturación",value:d.saturation,onChange:l=>g("saturation",l),min:0,max:200,step:1,unit:"%"}),c.jsx(D,{label:"Opacidad",value:d.opacity,onChange:l=>g("opacity",l),min:0,max:100,step:1,unit:"%"})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Color"}),c.jsx("button",{onClick:()=>a("color"),className:"text-gray-400 hover:text-gray-600",children:i.color?c.jsx(M,{className:"h-3 w-3"}):c.jsx(k,{className:"h-3 w-3"})})]}),i.color&&c.jsxs("div",{className:"space-y-2",children:[c.jsx(D,{label:"Matiz",value:d.hue,onChange:l=>g("hue",l),min:-180,max:180,step:1,unit:"°"}),c.jsx(D,{label:"Tinte sepia",value:d.tint,onChange:l=>g("tint",l),min:0,max:100,step:1,unit:"%"})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Transformar"}),c.jsx("button",{onClick:()=>a("transform"),className:"text-gray-400 hover:text-gray-600",children:i.transform?c.jsx(M,{className:"h-3 w-3"}):c.jsx(k,{className:"h-3 w-3"})})]}),i.transform&&c.jsxs("div",{className:"space-y-2",children:[c.jsx(D,{label:"Escala",value:d.scale,onChange:l=>g("scale",l),min:.1,max:3,step:.1,unit:"x"}),c.jsx(D,{label:"Rotación",value:d.rotate,onChange:l=>g("rotate",l),min:-180,max:180,step:1,unit:"°"}),c.jsx(D,{label:"Desenfoque",value:d.blur,onChange:l=>g("blur",l),min:0,max:20,step:.5,unit:"px"}),c.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[c.jsx(H,{variant:d.flipHorizontal?"default":"outline",size:"sm",onClick:()=>g("flipHorizontal",!d.flipHorizontal),className:"text-xs h-7",children:"Voltear H"}),c.jsx(H,{variant:d.flipVertical?"default":"outline",size:"sm",onClick:()=>g("flipVertical",!d.flipVertical),className:"text-xs h-7",children:"Voltear V"})]})]})]})]}),n==="presets"&&c.jsx(cr,{onSelectPreset:l=>{window.FORCE_THUMBNAIL_REGENERATION&&(console.log("🧨 [EMERGENCIA-PRESET] Limpiando caché y forzando regeneración al aplicar preset"),window.thumbnailCache&&(window.thumbnailCache={})),e({...d,...l}),window.FORCE_THUMBNAIL_REGENERATION&&window.forceRegenerateThumbnail&&setTimeout(()=>{console.log("🚀 [EMERGENCIA-PRESET] Ejecutando regeneración forzada después de aplicar preset");try{window.forceRegenerateThumbnail()}catch(u){console.error("Error al regenerar thumbnail después de aplicar preset:",u)}},100)},selectedImage:r||null}),n==="advanced"&&c.jsx(lr,{filters:d,onFilterChange:e,selectedElement:r})]})]})};export{H as B,Dr as D,Sr as F,Tr as H,wr as R,xr as U,Er as l};
