import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{R as W}from"./recaptcha-wrapper-DoyLjbcj.js";import{r as t}from"./index-BH53Isel.js";import{I as r}from"./InputForm-ZnsQvLid.js";import{u as v,S as f}from"./ubigeo-C_8-4EnP.js";import{S as m}from"./SelectForm-CuEL0BKa.js";import{R as B}from"./PaymentModal-BB1JXzaZ.js";import{H as U}from"./HtmlContent-FTivcJrM.js";import{t as g}from"./index-BZYhE2TF.js";import{X}from"./x-DBMwyD6F.js";import"./index-yBjzXJbu.js";import"./index-BVYA1enw.js";import"./index-Chjiymov.js";import"./hoist-non-react-statics.cjs-kbdZbs82.js";import"./createLucideIcon-Cy5Ya80P.js";import"./chevron-down-DS-mdh9v.js";import"./search-TwiiKGP5.js";import"./check-DQ7QoS0v.js";import"./index-fNjTmf9T.js";import"./index-rimy3MAc.js";function ue({generals:k}){const N=t.useRef(null),[y,E]=t.useState(""),[s,i]=t.useState({nombre:"",tipo_documento:"RUC",numero_identidad:"",celular:"",correo_electronico:"",departamento:"",provincia:"",distrito:"",direccion:"",tipo_producto:"",monto_reclamado:"",descripcion_producto:"",tipo_reclamo:"",fecha_ocurrencia:"",numero_pedido:"",detalle_reclamo:"",acepta_terminos:!1}),[x,p]=t.useState(!1),c=o=>{const{name:a,value:d,type:l,checked:h}=o.target;i({...s,[a]:l==="checkbox"?h:d})},P=o=>{o.preventDefault(),p(!0);const a=N.current.getValue();if(!a){E("Por favor, verifica el reCAPTCHA."),p(!1);return}const d={...s,recaptcha_token:a};fetch("/api/complaints",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)}).then(l=>l.json()).then(l=>{console.log(l),l.type==="success"?(g.success("Solicitud enviada",{description:"Pronto nos comunicaremos contigo ¡Gracias!.",icon:e.jsx(f,{className:"h-5 w-5 text-green-500"}),duration:3e3,position:"bottom-center"}),p(!1)):(g.error("Solicitud rechazada",{description:"Lo sentimos, no se envió su solicitud.",icon:e.jsx(f,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"bottom-center"}),p(!1))}).catch(l=>{g.error("Solicitud rechazada",{description:l||"Lo sentimos, no se envió su solicitud.",icon:e.jsx(f,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"bottom-center"}),p(!1)})},[n,R]=t.useState(""),[u,C]=t.useState(""),[b,j]=t.useState(""),[A,F]=t.useState([]),[M,I]=t.useState([]),[q,S]=t.useState([]);t.useEffect(()=>{const o=[...new Set(v.map(a=>a.departamento))];F(o)},[]),t.useEffect(()=>{if(n){const o=[...new Set(v.filter(a=>a.departamento===n).map(a=>a.provincia))];I(o),C(""),j(""),S([]),i(a=>({...a,departamento:n,provincia:"",distrito:""}))}},[n]),t.useEffect(()=>{if(u){const o=v.filter(a=>a.departamento===n&&a.provincia===u).map(a=>a.distrito);S(o),j(""),i(a=>({...a,provincia:u,distrito:""}))}},[u]),t.useEffect(()=>{b&&i(o=>({...o,distrito:b}))},[b]);const L=[{value:"ruc",label:"RUC"},{value:"dni",label:"DNI"},{value:"ce",label:"CE"},{value:"pasaporte",label:"Pasaporte"}],O=[{value:"producto",label:"Producto"},{value:"servicio",label:"Servicio"}],T=[{value:"reclamo",label:"Reclamo"},{value:"queja",label:"Queja"}],[z,_]=t.useState(!1),w={terms_conditions:"Términos y condiciones"},H=o=>_(o),D=()=>_(null);return e.jsxs("div",{className:" w-full px-primary mx-auto pt-8 pb-16 font-font-general",children:[e.jsxs("div",{className:"max-w-7xl mx-auto  bg-white shadow-lg rounded-2xl customtext-neutral-dark p-8",children:[e.jsx("h1",{className:"text-2xl font-bold mb-10 text-center uppercase",children:"Libro de Reclamaciones"}),e.jsxs("form",{onSubmit:P,children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Identificación del Consumidor"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"space-y-1",children:e.jsx(r,{type:"text",label:"Nombres",name:"nombre",value:s.nombre,onChange:c,placeholder:"Nombres"})}),e.jsx("div",{className:"space-y-1",children:e.jsx(m,{label:"Tipo de documento",options:L,placeholder:"Selecciona  documento",onChange:o=>{i(a=>({...a,tipo_documento:o}))}})}),e.jsx("div",{className:"space-y-1",children:e.jsx(r,{type:"text",label:"Número de identidad",name:"numero_identidad",value:s.numero_identidad,onChange:c,placeholder:"Número de identidad"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsx("div",{className:"space-y-1",children:e.jsx(r,{type:"text",label:"Número de celular",name:"celular",value:s.celular,onChange:c,placeholder:"Número de celular"})}),e.jsx("div",{className:"space-y-1",children:e.jsx(r,{type:"text",label:" Correo Electrónico",name:"correo_electronico",value:s.correo_electronico,onChange:c,placeholder:" Correo Electrónico"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:[e.jsx(m,{label:"Departamento",options:A,placeholder:"Selecciona un Departamento",onChange:o=>{R(o),i(a=>({...a,departmento:o}))}}),e.jsx(m,{disabled:!n,label:"Provincia",options:M,placeholder:"Selecciona una Provincia",onChange:o=>{C(o),i(a=>({...a,provincia:o}))}}),e.jsx(m,{disabled:!u,label:"Distrito",options:q,placeholder:"Selecciona un Distrito",onChange:o=>{j(o),i(a=>({...a,distrito:o}))}})]}),e.jsx("div",{className:"mt-4",children:e.jsx("div",{className:"space-y-1",children:e.jsx(r,{type:"text",label:"Dirección",name:"direccion",value:s.direccion,onChange:c,placeholder:" Dirección"})})})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Identificación del bien contratado"}),e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"relative mt-1",children:e.jsx(m,{label:" ¿Fue un producto o Servicio?",options:O,placeholder:"Selecciona...",onChange:o=>{i(a=>({...a,tipo_producto:o}))}})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsx("div",{className:"space-y-1",children:e.jsx(r,{type:"number",label:" Monto reclamado",name:"monto_reclamado",value:s.monto_reclamado,onChange:c,placeholder:"Monto reclamado"})}),e.jsx("div",{className:"space-y-1",children:e.jsx(r,{type:"text",label:" Descripción de producto",name:"descripcion_producto",value:s.descripcion_producto,onChange:c,placeholder:"Nombre de producto y/o servicios, código(opcional)"})})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Detalle del reclamo del pedido del consumidor"}),e.jsx("div",{className:"mb-4",children:e.jsx(m,{label:"¿Es un reclamo o queja?",options:T,placeholder:"Selecciona...",onChange:o=>{i(a=>({...a,tipo_reclamo:o}))}})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsx("div",{className:"space-y-1",children:e.jsx(r,{type:"date",label:"  Fecha de ocurrencia",name:"fecha_ocurrencia",value:s.fecha_ocurrencia,onChange:c,placeholder:"dd/mm/aaaa"})}),e.jsx("div",{className:"space-y-1",children:e.jsx(r,{type:"text",label:"Número de Pedido",name:"numero_pedido",value:s.numero_pedido,onChange:c,placeholder:"Número de pedido: #95825548"})})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm mb-1 customtext-neutral-dark",children:"Detalle de reclamo o queja"}),e.jsx("textarea",{name:"detalle_reclamo",placeholder:"Detalle de reclamo",className:"w-full min-h-32  px-4 py-3 border customtext-neutral-dark  border-neutral-ligth rounded-xl focus:ring-0 focus:outline-0   transition-all duration-300",value:s.detalle_reclamo,onChange:c})]})})]}),e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("input",{type:"checkbox",id:"terminos",name:"acepta_terminos",className:"mt-1 mr-2",checked:s.acepta_terminos,onChange:c}),e.jsxs("label",{htmlFor:"terminos",className:"text-sm",children:["Estoy de acuerdo con los"," ",e.jsx("a",{onClick:()=>H(0),className:"customtext-primary underline",children:"términos y condiciones"})]})]})}),e.jsxs("div",{className:"mb-8",children:[e.jsx(W,{ref:N,sitekey:"6LfAcfcqAAAAACc7tfKbaBFc1X5I9V4fewWoVf-9"}),y&&e.jsx("p",{className:"text-red-500 mt-2",children:y})]}),e.jsx("div",{children:e.jsxs("button",{disabled:x,type:"submit",className:"bg-primary text-white px-6 py-3 font-medium rounded-lg flex items-center justify-center gap-2",children:[x&&e.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),x?"Enviando...":"Enviar a libro de reclamaciones"]})})]})]}),Object.keys(w).map((o,a)=>{var h;const d=w[o],l=((h=k.find(V=>V.correlative==o))==null?void 0:h.description)??"";return e.jsxs(B,{isOpen:z===a,onRequestClose:D,contentLabel:d,className:"absolute left-1/2 -translate-x-1/2 bg-white p-6 rounded-xl shadow-lg w-[95%] max-w-4xl my-8",overlayClassName:"fixed inset-0 bg-black bg-opacity-50 z-50",children:[e.jsx("button",{onClick:D,className:"float-right text-red-500 hover:text-red-700 transition-all duration-300 ",children:e.jsx(X,{width:"2rem",strokeWidth:"4px"})}),e.jsx("h2",{className:"text-2xl font-bold mb-4",children:d}),e.jsx(U,{className:"prose",html:l})]},a)})]})}export{ue as default};
