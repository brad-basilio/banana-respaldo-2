import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as n}from"./index-BH53Isel.js";import{M as T}from"./MessagesRest-CFTDG4sK.js";import{L as D,G,M as q}from"./esm-hESa1MbP.js";import{G as O}from"./Global-ErywZRdd.js";import{t as H}from"./index-CMHsc23u.js";import{m as i}from"./proxy-BTYtmp9V.js";import{M as _}from"./mail-g7FoGJuB.js";import{P as W}from"./phone-BZ94M50k.js";import{B as K}from"./building-2-D9OTcI0c.js";import{S as U}from"./store-BlkTk2Px.js";import"./index-yBjzXJbu.js";import"./BasicRest-B3rfI5GY.js";import"./main-BvVILmTO.js";import"./___vite-browser-external_commonjs-proxy-0zb4Agf2.js";import"./index-rimy3MAc.js";import"./index-fNjTmf9T.js";import"./createLucideIcon-Cy5Ya80P.js";const Y=new T,ue=({data:N,contacts:y})=>{var z;console.log(y);const d=t=>{var r;return((r=y.find(a=>a.correlative===t))==null?void 0:r.description)||""},g=((z=y.find(t=>t.correlative=="location"))==null?void 0:z.description)??"0,0",R={lat:Number(g.split(",").map(t=>t.trim())[0]),lng:Number(g.split(",").map(t=>t.trim())[1])},h=n.useRef(),u=n.useRef(),f=n.useRef(),x=n.useRef(),[o,S]=n.useState(!1),[b,F]=n.useState(""),[m,w]="",[k,v]=n.useState([]),[M,C]=n.useState(!0),[c,j]=n.useState([]),[P,$]=n.useState(!0);n.useEffect(()=>{(async()=>{try{C(!0);const a=await(await fetch("/api/stores")).json();console.log("API Response:",a);let s=a;if(a.data?s=a.data:a.body&&(s=a.body),Array.isArray(s)){const p=s.filter(l=>l.type==="oficina"&&l.status!==!1);v(p)}else console.error("API response is not an array:",a),v([])}catch(r){console.error("Error loading offices:",r),v([])}finally{C(!1)}})()},[]),n.useEffect(()=>{(async()=>{try{$(!0);const a=await(await fetch("/api/stores")).json();console.log("Stores API Response:",a);let s=a;if(a.data?s=a.data:a.body&&(s=a.body),Array.isArray(s)){const p=s.filter(l=>l.status!==!1&&l.latitude&&l.longitude&&l.latitude!=="0"&&l.longitude!=="0");j(p),console.log("Valid stores loaded:",p)}else console.error("Stores API response is not an array:",a),j([])}catch(r){console.error("Error loading stores:",r),j([])}finally{$(!1)}})()},[]);const A=t=>{const r={url:"",scaledSize:{width:40,height:40},origin:{x:0,y:0},anchor:{x:20,y:40}};switch(t==null?void 0:t.toLowerCase()){case"tienda":return{...r,url:"data:image/svg+xml;base64,"+btoa(`
                        <svg width="40" height="40" viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="20" cy="20" r="18" fill="#10b981" stroke="#fff" stroke-width="3"/>
                            <path d="M12 18h16v12H12V18zm4-6h8v6h-8v-6z" fill="#fff"/>
                            <rect x="14" y="20" width="2" height="2" fill="#10b981"/>
                            <rect x="18" y="20" width="2" height="2" fill="#10b981"/>
                            <rect x="22" y="20" width="2" height="2" fill="#10b981"/>
                            <rect x="26" y="20" width="2" height="2" fill="#10b981"/>
                        </svg>
                    `)};case"oficina":return{...r,url:"data:image/svg+xml;base64,"+btoa(`
                        <svg width="40" height="40" viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="20" cy="20" r="18" fill="#3b82f6" stroke="#fff" stroke-width="3"/>
                            <rect x="12" y="14" width="16" height="14" fill="#fff" rx="1"/>
                            <rect x="14" y="16" width="2" height="2" fill="#3b82f6"/>
                            <rect x="18" y="16" width="2" height="2" fill="#3b82f6"/>
                            <rect x="22" y="16" width="2" height="2" fill="#3b82f6"/>
                            <rect x="26" y="16" width="2" height="2" fill="#3b82f6"/>
                            <rect x="14" y="20" width="2" height="2" fill="#3b82f6"/>
                            <rect x="18" y="20" width="2" height="2" fill="#3b82f6"/>
                            <rect x="22" y="20" width="2" height="2" fill="#3b82f6"/>
                            <rect x="26" y="20" width="2" height="2" fill="#3b82f6"/>
                            <rect x="18" y="24" width="4" height="4" fill="#3b82f6"/>
                        </svg>
                    `)};case"agencia":return{...r,url:"data:image/svg+xml;base64,"+btoa(`
                        <svg width="40" height="40" viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="20" cy="20" r="18" fill="#f59e0b" stroke="#fff" stroke-width="3"/>
                            <path d="M20 12l8 6v12h-6v-8h-4v8h-6V18l8-6z" fill="#fff"/>
                            <circle cx="20" cy="16" r="2" fill="#f59e0b"/>
                        </svg>
                    `)};case"almacen":return{...r,url:"data:image/svg+xml;base64,"+btoa(`
                        <svg width="40" height="40" viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="20" cy="20" r="18" fill="#8b5cf6" stroke="#fff" stroke-width="3"/>
                            <rect x="10" y="16" width="20" height="12" fill="#fff" rx="1"/>
                            <rect x="12" y="18" width="4" height="3" fill="#8b5cf6"/>
                            <rect x="17" y="18" width="4" height="3" fill="#8b5cf6"/>
                            <rect x="22" y="18" width="4" height="3" fill="#8b5cf6"/>
                            <rect x="12" y="22" width="4" height="3" fill="#8b5cf6"/>
                            <rect x="17" y="22" width="4" height="3" fill="#8b5cf6"/>
                            <rect x="22" y="22" width="4" height="3" fill="#8b5cf6"/>
                            <path d="M20 10l8 4v2H12v-2l8-4z" fill="#fff"/>
                        </svg>
                    `)};default:return{...r,url:"data:image/svg+xml;base64,"+btoa(`
                        <svg width="40" height="40" viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="20" cy="20" r="18" fill="#6b7280" stroke="#fff" stroke-width="3"/>
                            <circle cx="20" cy="20" r="8" fill="#fff"/>
                            <circle cx="20" cy="20" r="4" fill="#6b7280"/>
                        </svg>
                    `)}}},B=t=>{switch(t==null?void 0:t.toLowerCase()){case"tienda":return"#10b981";case"oficina":return"#3b82f6";case"agencia":return"#f59e0b";case"almacen":return"#8b5cf6";default:return"#6b7280"}},V=t=>{const a=t.replace(/\D/g,"").slice(0,9);return a.length<=3?a:a.length<=6?`${a.slice(0,3)} ${a.slice(3)}`:`${a.slice(0,3)} ${a.slice(3,6)} ${a.slice(6)}`},E=t=>{const r=t.replace(/\D/g,"");return r.length!==9?"El tel√©fono debe tener 9 d√≠gitos":r.startsWith("9")?"":"Solo se aceptan celulares peruanos (empiezan con 9)"},I=t=>{const r=t.target.value,a=V(r),s=E(a);F(a),w(s),u.current&&(u.current.value=a.replace(/\D/g,""))},L=async t=>{if(t.preventDefault(),o)return;const r=b.replace(/\D/g,""),a=E(b);if(a){w(a),H.error("Error de validaci√≥n",{description:a,duration:3e3,position:"bottom-center",richColors:!0});return}S(!0);const s={name:h.current.value,phone:r,email:f.current.value,description:x.current.value},p=await Y.save(s);H.success("Mensaje enviado",{description:"Tu mensaje ha sido enviado correctamente. ¬°Nos pondremos en contacto contigo pronto!",duration:3e3,position:"bottom-center",richColors:!0}),S(!1),p&&(h.current&&(h.current.value=""),u.current&&F(""),w(""),f.current&&(f.current.value=""),x.current&&(x.current.value=""),N.redirect&&(g.href=N.redirect))};return e.jsxs(i.section,{className:" bg-[#F7F9FB] py-12 px-primary ",initial:{opacity:0},animate:{opacity:1},transition:{duration:.6},children:[e.jsxs(i.div,{className:" mx-auto  2xl:max-w-7xl  flex flex-col md:flex-row gap-12 bg-white rounded-xl p-4 md:px-8 md:py-8",initial:{y:50,opacity:0},animate:{y:0,opacity:1},transition:{duration:.8,delay:.2},children:[e.jsxs(i.div,{className:"w-full md:w-10/12",initial:{x:-50,opacity:0},animate:{x:0,opacity:1},transition:{duration:.8,delay:.4},children:[e.jsx(i.h2,{className:"text-3xl font-bold mb-4 customtext-neutral-dark",initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.6,delay:.6},children:"Hablemos Hoy"}),e.jsx(i.p,{className:"customtext-neutral-light mb-8",initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.6,delay:.7},children:"Etiam ultricies sapien mauris, a consectetur sapien posuere eu. Sed ac faucibus lorem. Integer sit amet tempus sapien."}),e.jsxs(i.form,{onSubmit:L,className:"space-y-6",initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{duration:.8,delay:.8},children:[e.jsx(i.div,{initial:{x:-30,opacity:0},animate:{x:0,opacity:1},transition:{duration:.5,delay:1},children:e.jsx(i.input,{ref:h,disabled:o,type:"text",name:"name",placeholder:"Nombre completo",className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",required:!0,whileFocus:{scale:1.02,borderColor:"#3B82F6"},transition:{type:"spring",stiffness:300,damping:20}})}),e.jsxs(i.div,{initial:{x:-30,opacity:0},animate:{x:0,opacity:1},transition:{duration:.5,delay:1.1},children:[e.jsx(i.input,{ref:u,disabled:o,type:"tel",name:"phone",placeholder:"Tel√©fono (9 d√≠gitos)",value:b,onChange:I,maxLength:11,className:`w-full px-4 py-3 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none ${m?"border-red-400 bg-red-50":"border-gray-300"}`,required:!0,"aria-describedby":m?"phone-error":"phone-help","aria-invalid":m?"true":"false",whileFocus:{scale:1.02,borderColor:"#3B82F6"},transition:{type:"spring",stiffness:300,damping:20}}),m&&e.jsxs(i.span,{id:"phone-error",className:"text-red-500 text-xs flex items-center gap-1 mt-1",role:"alert",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},children:[e.jsx("svg",{className:"w-3 h-3 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),m]})]}),e.jsx(i.div,{initial:{x:-30,opacity:0},animate:{x:0,opacity:1},transition:{duration:.5,delay:1.2},children:e.jsx(i.input,{ref:f,disabled:o,type:"email",name:"email",placeholder:"Correo Electr√≥nico",className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",required:!0,whileFocus:{scale:1.02,borderColor:"#3B82F6"},transition:{type:"spring",stiffness:300,damping:20}})}),e.jsx(i.div,{initial:{x:-30,opacity:0},animate:{x:0,opacity:1},transition:{duration:.5,delay:1.3},children:e.jsx(i.textarea,{ref:x,disabled:o,name:"message",placeholder:"Deja tu mensaje...",rows:"6",className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none resize-none",required:!0,whileFocus:{scale:1.02,borderColor:"#3B82F6"},transition:{type:"spring",stiffness:300,damping:20}})}),e.jsxs(i.button,{type:"submit",className:"bg-primary text-base font-bold text-white px-6 py-3 rounded-xl hover:brightness-90 transition-all flex items-center justify-center gap-2 disabled:opacity-70",disabled:o,initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:1.4},whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},children:[o&&e.jsxs(i.svg,{className:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),o?"Enviando...":"Enviar mensaje"]})]})]}),e.jsxs(i.div,{className:"space-y-8",initial:{x:50,opacity:0},animate:{x:0,opacity:1},transition:{duration:.8,delay:.5},children:[e.jsxs(i.div,{className:"bg-[#F7F9FB] p-6 rounded-xl shadow-lg",initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{duration:.2,delay:0},whileHover:{y:-5,scale:1.02,boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.15)"},children:[e.jsxs("div",{className:"flex items-center gap-3 customtext-primary mb-2",children:[e.jsx(i.div,{whileHover:{rotate:15,scale:1.1},transition:{duration:.2},children:e.jsx(_,{className:"w-5 h-5"})}),e.jsx("h3",{className:"customtext-neutral-dark font-bold text-lg",children:"Email"})]}),e.jsx("p",{className:"customtext-neutral-light mb-2",children:"Escr√≠benos para recibir atenci√≥n personalizada y resolver tus dudas."}),e.jsx("a",{href:`mailto:${d("email_contact")}`,className:"customtext-primary font-bold hover:no-underline",children:d("email_contact")})]}),e.jsxs(i.div,{className:"bg-[#F7F9FB] p-6 rounded-xl shadow-lg",initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{duration:.2,delay:0},whileHover:{y:-5,scale:1.02,boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.15)"},children:[e.jsxs("div",{className:"flex items-center gap-3 customtext-primary mb-2",children:[e.jsx(i.div,{whileHover:{rotate:-15,scale:1.1},transition:{duration:.2},children:e.jsx(W,{className:"w-5 h-5"})}),e.jsx("h3",{className:"customtext-neutral-dark font-bold text-lg",children:"Tel√©fono"})]}),e.jsx("p",{className:"customtext-neutral-light mb-2",children:"Ll√°manos para obtener soporte inmediato y asistencia profesional."}),e.jsx("a",{href:`tel:${d("phone_contact")}`,className:"customtext-primary hover:no-underline font-bold",children:d("phone_contact")})]}),e.jsxs(i.div,{className:"bg-[#F7F9FB] p-6 rounded-xl shadow-lg",initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{duration:.2,delay:0},whileHover:{y:-8,scale:1.02,boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.15)",backgroundColor:"#ffffff"},children:[e.jsxs(i.div,{className:"flex items-center gap-3 customtext-primary mb-4",initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{duration:.5,delay:1.4},children:[e.jsx(i.div,{whileHover:{rotate:20,scale:1.2},transition:{type:"spring",stiffness:400,damping:15},children:e.jsx(K,{className:"w-5 h-5"})}),e.jsx(i.h3,{className:"customtext-neutral-dark font-bold text-lg",children:"Nuestras Oficinas"})]}),M?e.jsxs("div",{className:"flex items-center justify-center py-4",children:[e.jsx("div",{className:"w-6 h-6 border-2 border-primary border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"ml-2 text-sm customtext-neutral-light",children:"Cargando oficinas..."})]}):k.length===0?e.jsxs(i.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:[e.jsx(i.p,{className:"customtext-neutral-light mb-2",whileHover:{x:3,opacity:.8},transition:{type:"spring",stiffness:300,damping:20},children:"Vis√≠tanos en nuestra oficina para conocer nuestras soluciones de tratamiento en persona."}),e.jsx("p",{className:"customtext-primary font-bold",children:d("address")})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx(i.p,{className:"customtext-neutral-light mb-3",whileHover:{x:3,opacity:.8},transition:{type:"spring",stiffness:300,damping:20},children:"Vis√≠tanos en cualquiera de nuestras oficinas para atenci√≥n personalizada."}),k.map((t,r)=>e.jsxs(i.div,{className:"bg-white p-4 rounded-lg border border-gray-100 hover:shadow-md transition-shadow duration-200",initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{duration:.4,delay:1.5+r*.1},whileHover:{x:2,scale:1.01},children:[e.jsx("h4",{className:"customtext-neutral-dark font-bold mb-2",children:t.name}),e.jsx("p",{className:"customtext-primary font-bold",children:t.address})]},t.id))]})]}),e.jsxs(i.div,{className:"bg-[#F7F9FB] p-6 rounded-xl shadow-lg",initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{duration:.2,delay:0},whileHover:{y:-5,scale:1.02,boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.15)"},children:[e.jsxs(i.div,{className:"flex items-center gap-3 customtext-primary mb-2",initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{duration:.5,delay:1.5},children:[e.jsx(i.div,{whileHover:{rotate:-20,scale:1.2},transition:{type:"spring",stiffness:400,damping:15},children:e.jsx(U,{className:"w-5 h-5"})}),e.jsx(i.h3,{className:"customtext-neutral-dark font-bold text-lg",children:"Tienda"})]}),e.jsxs(i.p,{className:"customtext-primary font-bold",transition:{type:"spring",stiffness:300,damping:20},children:[" ",d("address")]})]})]})]}),e.jsxs(i.div,{className:"mx-auto 2xl:max-w-7xl gap-12 bg-white rounded-xl px-8 py-8",initial:{y:50,opacity:0},animate:{y:0,opacity:1},transition:{duration:.8,delay:1.4},children:[e.jsxs(i.div,{className:"mb-6",children:[e.jsx(i.h3,{className:"text-2xl font-bold customtext-neutral-dark mb-2",initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.6,delay:1.5},children:"Nuestras Ubicaciones"}),e.jsx(i.p,{className:"customtext-neutral-light mb-4",initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.6,delay:1.6},children:"Encuentra nuestras tiendas, oficinas y agencias m√°s cercanas a tu ubicaci√≥n."})]}),e.jsxs(i.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.6,delay:1.8},className:"relative",children:[P&&e.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-75 flex items-center justify-center z-10 rounded-xl",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-6 h-6 border-2 border-primary border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"customtext-neutral-light",children:"Cargando ubicaciones..."})]})}),e.jsx(D,{googleMapsApiKey:O.GMAPS_API_KEY,className:"rounded-xl",children:e.jsx(G,{mapContainerStyle:{width:"100%",height:"500px",borderRadius:"12px"},zoom:c.length>0?15:20,center:c.length>0?{lat:c.reduce((t,r)=>t+parseFloat(r.latitude),0)/c.length,lng:c.reduce((t,r)=>t+parseFloat(r.longitude),0)/c.length}:R,options:{styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}]},children:c.map(t=>e.jsx(q,{position:{lat:parseFloat(t.latitude),lng:parseFloat(t.longitude)},icon:A(t.type),title:`${t.name} (${t.type})`,onClick:()=>{new window.google.maps.InfoWindow({content:`
                                                <div style="padding: 10px; max-width: 250px;">
                                                    <h4 style="margin: 0 0 8px 0; color: ${B(t.type)}; font-weight: bold;">
                                                        ${t.name}
                                                    </h4>
                                                    <p style="margin: 0 0 5px 0; color: #6b7280; font-size: 12px; text-transform: uppercase; font-weight: 500;">
                                                        ${t.type}
                                                    </p>
                                                    <p style="margin: 0 0 8px 0; color: #374151; line-height: 1.4;">
                                                        üìç ${t.address}
                                                    </p>
                                                    ${t.phone?`
                                                        <p style="margin: 0 0 8px 0; color: #374151;">
                                                            üìû <a href="tel:${t.phone}" style="color: ${B(t.type)}; text-decoration: none;">${t.phone}</a>
                                                        </p>
                                                    `:""}
                                                    ${t.schedule?`
                                                        <p style="margin: 0; color: #6b7280; font-size: 13px;">
                                                            üïí ${t.schedule}
                                                        </p>
                                                    `:""}
                                                </div>
                                            `}).open(window.google.maps,void 0)}},t.id))})})]})]})]})};export{ue as default};
