import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as f}from"./index-BH53Isel.js";import"./EditorLayout-CbVT4hVv.js";import"./thumbnailGenerator-B4goYG9Y.js";import"./EditorMain-TzD4oLUa.js";import{R as G}from"./PaymentModal-BB1JXzaZ.js";import{H as be}from"./jspdf.es.min-D3plwuQr.js";import{X as Y}from"./x-DBMwyD6F.js";import{C as xe}from"./chevron-left-B2s3ZsB7.js";import{C as ye}from"./chevron-right-Ckt5D2ka.js";import"./index-yBjzXJbu.js";import"./index-BZYhE2TF.js";import"./index-rimy3MAc.js";import"./index-fNjTmf9T.js";import"./index-BSWw-p5k.js";import"./createLucideIcon-Cy5Ya80P.js";import"./copy-6OEekgvq.js";import"./trash-2-DK1wnsDn.js";import"./TextElement-_pvTHO57.js";import"./upload-qgEr5bIl.js";import"./index-Chjiymov.js";import"./preload-helper-BfFHrpNk.js";import"./typeof-QjJsDpFa.js";const Q={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",padding:"0",border:"none",background:"none",overflow:"visible"},overlay:{backgroundColor:"rgba(0, 0, 0, 0.8)",zIndex:1e3}},we=`
    .stf__wrapper {
        margin: 0 !important;
        padding: 0 !important;
    }
    .stf__block {
        margin: 0 !important;
        padding: 0 !important;
    }
    .stf__page {
        margin: 0 !important;
        padding: 0 !important;
        box-shadow: 0 4px 8px rgba(0,0,0,0.15) !important;
    }
    .page-container img {
        display: block;
        margin: 0;
        padding: 0;
        border: none;
        outline: none;
        image-rendering: -webkit-optimize-contrast !important;
        image-rendering: high-quality !important;
        -webkit-backface-visibility: hidden !important;
        backface-visibility: hidden !important;
        -webkit-transform: translateZ(0) !important;
        transform: translateZ(0) !important;
        -ms-interpolation-mode: bicubic !important;
    }
    .page-container {
        -webkit-font-smoothing: subpixel-antialiased !important;
        -moz-osx-font-smoothing: auto !important;
    }
`;G.setAppElement("#app");const es=({isOpen:l,onRequestClose:b,pages:x,pageThumbnails:I={},addAlbumToCart:N,workspaceDimensions:y={width:800,height:600},layouts:q=[],presetData:L=null,projectData:g=null,itemData:i=null,contentType:A={type:"album",name:"Álbum",description:"Vista de Álbum",icon:"📖"},categorizedPages:je={cover:[],content:[],final:[]},albumLoadingState:P={isLoading:!1,loadedImages:0,totalImages:0,message:""}})=>{var ae;const[U,oe]=f.useState(0),[_,D]=f.useState(!1),[V,Ne]=f.useState(!1),[ne,F]=f.useState({}),[ie,ee]=f.useState(!1),[Pe,le]=f.useState(!1),[Ce,ke]=f.useState(!1),[Ie,Ee]=f.useState(0),[S,C]=f.useState({isOpen:!1,message:"Iniciando proceso...",subMessage:"Estamos preparando tu álbum",progress:0}),$=f.useRef();function de(s,a,t,r,o,c){const d=a.width,m=a.height,u=o/c,h=d/m;let p=0,j=0,w=d,n=m;u>h?(n=d/u,j=(m-n)/2):(w=m*u,p=(d-w)/2),s.drawImage(a,p,j,w,n,t,r,o,c)}function ce(s){const a=s.match(/grid-cols-(\d+)/),t=s.match(/grid-rows-(\d+)/),r=s.match(/gap-(\d+)/);return{cols:a?parseInt(a[1],10):1,rows:t?parseInt(t[1],10):1,gap:r?parseInt(r[1],10)*4:0}}function se(s,a,t=1){const r=s&&s.match(new RegExp(`${a}-span-(\\d+)`));return r?parseInt(r[1],10):t}function me(s,a,t){const{cols:r,rows:o,gap:c}=ce(s.template),d=s.style&&s.style.padding?parseInt(s.style.padding):0,m=a.width-2*d,u=a.height-2*d,h=(m-c*(r-1))/r,p=(u-c*(o-1))/o,j=Array.from({length:o},()=>Array(r).fill(!1)),w={};for(let n=0;n<s.cells;n++){const E=s.cellStyles&&s.cellStyles[n]?s.cellStyles[n]:"",T=se(E,"col",1),z=se(E,"row",1);let H=!1;for(let v=0;v<=o-z&&!H;v++)for(let M=0;M<=r-T&&!H;M++){let Z=!0;for(let B=v;B<v+z;B++){for(let O=M;O<M+T;O++)if(j[B][O]){Z=!1;break}if(!Z)break}if(Z){for(let O=v;O<v+z;O++)for(let J=M;J<M+T;J++)j[O][J]=!0;const B=t&&t[n]?t[n].id:n;w[B]={x:d+M*(h+c),y:d+v*(p+c),width:h*T+c*(T-1),height:p*z+c*(z-1)},H=!0}}if(!H){const v=t&&t[n]?t[n].id:n;console.warn(`[GRID-PLACEMENT] No se pudo ubicar la celda ${v}`),w[v]={x:0,y:0,width:h,height:p}}}return w}f.useCallback(async()=>{if(!x||x.length===0||!l)return;ee(!0),F({});const s={},a=4,t=(d,m,u,h)=>{if(!m||!m.image)return;const p=new Image;p.src=m.image,p.onload=()=>{const j=u.x+m.x*h,w=u.y+m.y*h,n=m.width*h,E=m.height*h;de(d,p,j,w,n,E)}},r=async(d,m)=>{const u=document.createElement("canvas"),h=u.getContext("2d");if(u.width=y.width*a,u.height=y.height*a,L&&L.final_layer_image){const n=new Image;n.src=L.final_layer_image,n.onload=()=>{h.drawImage(n,0,0,u.width,u.height)}}const p=q.find(n=>n.id===d.layoutId);if(!p)return;const j=me(p,y,d.cells);d.cells.forEach(n=>{const E=j[n.id];E&&n.elements.forEach(T=>{t(h,T,E,a)})});const w=u.toDataURL("image/jpeg",.9);return{[d.id]:w}},o=x.map((d,m)=>r(d));(await Promise.all(o)).forEach(d=>{Object.assign(s,d)}),F(s),ee(!1)},[x,l,y,q,L]);const ge=()=>{var t,r;const s=x.map((o,c)=>({id:o.id||`page-${c}`,index:c})),a={...y,originalWidth:y.originalWidth||((t=i==null?void 0:i.dimensions)!=null&&t.width?parseFloat(i.dimensions.width):297),originalHeight:y.originalHeight||((r=i==null?void 0:i.dimensions)!=null&&r.height?parseFloat(i.dimensions.height):210),width:parseInt(y.width||800),height:parseInt(y.height||600)};return{format:(g==null?void 0:g.format)||"album",quality:"high",pages:s,pages_count:x.length,workspace_dimensions:a,product_dimensions:(i==null?void 0:i.dimensions)||{},use_pdf_thumbnails:!0}},te=async()=>{var s;if(!(g!=null&&g.id)){console.warn("No hay proyecto cargado para generar PDF automáticamente.");return}try{const a=ge();if((await fetch(`/api/customer/projects/${g.id}/generate-pdf`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((s=document.querySelector('meta[name="csrf-token"]'))==null?void 0:s.content)||""},body:JSON.stringify(a)})).ok){le(!0);try{const r=await fetch(`/api/customer/projects/${g.id}/pdf-info`);if(r.ok){const o=await r.json()}}catch(r){console.warn("⚠️ [AUTO-PDF] No se pudo obtener info del PDF:",r.message)}}else console.warn("⚠️ [AUTO-PDF] Error al generar PDF automáticamente")}catch(a){console.warn("⚠️ [AUTO-PDF] Error en generación automática:",a.message)}};f.useEffect(()=>{l&&(Object.keys(I).length>0?F(I):F({}),g!=null&&g.id&&setTimeout(()=>{te()},1e3))},[l,I,g]),f.useEffect(()=>{l||F({})},[l]);const X=Object.keys(I).length>0?I:ne;if(!x||!Array.isArray(x)||x.length===0)return e.jsx(G,{isOpen:l,onRequestClose:b,style:Q,contentLabel:"Vista previa del álbum",ariaHideApp:!0,shouldCloseOnOverlayClick:!0,shouldCloseOnEsc:!0,role:"dialog","aria-modal":"true","aria-labelledby":"modal-title","aria-describedby":"modal-description",children:e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg max-w-md mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{id:"modal-title",className:"text-xl font-bold",children:"Vista previa del álbum"}),e.jsx("button",{onClick:b,className:"text-gray-500 hover:text-gray-700","aria-label":"Cerrar vista previa",children:e.jsx(Y,{size:24})})]}),e.jsx("p",{id:"modal-description",className:"text-gray-600",children:"No hay páginas disponibles para mostrar."})]})});const ue=()=>{$.current&&$.current.pageFlip().flipPrev()},he=()=>{$.current&&$.current.pageFlip().flipNext()},pe=y.width/y.height,R=600,W=Math.round(R*pe),fe=()=>{const s=(i==null?void 0:i.has_cover_image)===!0||(i==null?void 0:i.has_cover_image)===1,a=(i==null?void 0:i.has_back_cover_image)===!0||(i==null?void 0:i.has_back_cover_image)===1;return x.filter(r=>!(r.type==="cover"&&!s||r.type==="final"&&!a))},k=(()=>{const s=fe();return s.length===0?(console.warn("⚠️ [BOOK-PAGES] No hay páginas válidas para mostrar"),[]):s.map((t,r)=>{let o="";return t.type==="cover"?o="Portada":t.type==="final"?o="Contraportada":t.type==="content"?o=`Página ${t.pageNumber||r+1}`:o=`Página ${r+1}`,{...t,id:`${t.id}-display`,originalId:t.id,displayIndex:r,pageType:t.type,pageTitle:o,originalPageNumber:t.pageNumber}})})(),re=k.length>0&&((ae=k[0])==null?void 0:ae.pageType)==="cover",K=k.length>0&&!re&&!k.some(s=>s.pageType==="final");return k.length===0?e.jsx(G,{isOpen:l,onRequestClose:b,style:Q,contentLabel:"Vista previa del álbum",ariaHideApp:!0,shouldCloseOnOverlayClick:!0,shouldCloseOnEsc:!0,role:"dialog","aria-modal":"true","aria-labelledby":"modal-title","aria-describedby":"modal-description",children:e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg max-w-md mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h2",{id:"modal-title",className:"text-xl font-bold",children:["Vista previa del ",A.name.toLowerCase()]}),e.jsx("button",{onClick:b,className:"text-gray-500 hover:text-gray-700","aria-label":"Cerrar vista previa",children:e.jsx(Y,{size:24})})]}),e.jsx("p",{id:"modal-description",className:"text-gray-600",children:"No hay páginas habilitadas para mostrar. Verifique la configuración de portada y contraportada."})]})}):e.jsxs(G,{isOpen:l,onRequestClose:b,style:Q,contentLabel:`Vista previa del ${A.name.toLowerCase()}`,ariaHideApp:!0,shouldCloseOnOverlayClick:!0,shouldCloseOnEsc:!0,role:"dialog","aria-modal":"true","aria-labelledby":"modal-title","aria-describedby":"modal-description",children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:we}}),(ie||V||P.isLoading)&&e.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl flex flex-col items-center max-w-md mx-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mb-4"}),P.isLoading?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-gray-700 text-center",children:P.message||"Cargando álbum..."}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-3",children:e.jsx("div",{className:"bg-purple-600 h-2 rounded-full transition-all duration-300",style:{width:`${P.totalImages>0?P.loadedImages/P.totalImages*100:0}%`}})}),e.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:[P.loadedImages," de ",P.totalImages," imágenes"]})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-gray-700",children:V?"Preparando álbum...":"Cargando vistas previas..."}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Procesando contenido"})]})]})}),e.jsxs("div",{className:"relative flex flex-col items-center justify-center p-6 bg-white rounded-2xl shadow-2xl",children:[e.jsxs("h2",{id:"modal-title",className:"sr-only",children:["Vista previa del ",A.name.toLowerCase()]}),e.jsxs("p",{id:"modal-description",className:"sr-only",children:["Navegue por las páginas de su ",A.name.toLowerCase()," usando los controles de navegación o teclado. Puede cerrar esta ventana presionando Escape o el botón de cerrar."]}),e.jsx("button",{onClick:b,className:"absolute top-4 right-4 p-2 rounded-full bg-white/80 hover:bg-white text-gray-700 shadow z-10","aria-label":`Cerrar vista previa del ${A.name.toLowerCase()}`,children:e.jsx(Y,{className:"h-6 w-6"})}),e.jsxs("div",{className:"flex items-center justify-center gap-8 mb-6 mt-2",children:[e.jsx("button",{onClick:ue,className:"p-3 rounded-full bg-gray-100 hover:bg-gray-200 text-gray-700 shadow transition-colors","aria-label":"Página anterior",children:e.jsx(xe,{className:"h-6 w-6"})}),e.jsx("div",{className:"flex items-center",children:e.jsxs("span",{className:"flex items-center text-gray-700 text-base font-medium px-4 py-2 bg-gray-50 rounded-lg","aria-live":"polite",children:[(()=>{const s=k[U];return s?s.pageTitle||`Página ${U+1}`:"Cargando..."})(),e.jsx("span",{className:"mx-2 text-gray-400",children:"•"}),U+1," / ",k.length," páginas",K&&e.jsx("span",{className:"ml-2 text-xs text-blue-600 bg-blue-50 px-2 py-1 rounded",children:"Solo contenido"})]})}),e.jsx("button",{onClick:he,className:"p-3 rounded-full bg-gray-100 hover:bg-gray-200 text-gray-700 shadow transition-colors","aria-label":"Página siguiente",children:e.jsx(ye,{className:"h-6 w-6"})})]}),e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(be,{ref:$,width:W,height:R,size:"stretch",minWidth:W*.7,maxWidth:W*1.3,minHeight:R*.7,maxHeight:R*1.3,maxShadowOpacity:.3,showCover:re,mobileScrollSupport:!0,onFlip:s=>oe(s.data),className:"shadow-xl",usePortrait:!1,startPage:0,drawShadow:!0,flippingTime:600,useMouseEvents:!0,swipeDistance:50,showPageCorners:!K,disableFlipByClick:!1,autoSize:K,style:{margin:0,padding:0},children:k.map((s,a)=>{const t=s.originalId||s.id;return X[t],e.jsx("div",{id:`page-${s.originalId||s.id}`,className:"page-container",style:{width:W,height:R,margin:0,padding:0,overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#ffffff"},children:e.jsx("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:s.isBlankPage?e.jsx("div",{style:{width:"100%",height:"100%",backgroundColor:"#ffffff",display:"flex",alignItems:"center",justifyContent:"center",color:"#f3f4f6",fontSize:"14px",fontStyle:"italic"},children:s.hasLogo&&s.logoUrl?e.jsx("img",{src:s.logoUrl,alt:"Logo",style:{maxWidth:"120px",maxHeight:"120px",objectFit:"contain",opacity:.8,filter:"grayscale(20%)"},onError:r=>{console.warn("⚠️ [BOOK-PREVIEW] Error cargando logo:",s.logoUrl),r.target.style.display="none"}}):null}):X[s.originalId||s.id]?e.jsx("img",{src:X[s.originalId||s.id],alt:s.pageTitle||`Página ${a+1}`,style:{width:"100%",height:"100%",objectFit:"contain",margin:0,padding:0,border:"none",imageRendering:"auto",backgroundColor:"#ffffff",WebkitBackfaceVisibility:"hidden",backfaceVisibility:"hidden",WebkitTransform:"translateZ(0)",transform:"translateZ(0)"}}):e.jsx(ve,{page:s,pageIdx:a})})},`page-${a}`)})})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mt-6 w-full max-w-2xl mx-auto",children:[e.jsx("button",{className:`flex-1 py-3 px-4 rounded-lg font-semibold shadow transition flex items-center justify-center ${_?"bg-purple-400 text-white cursor-not-allowed":"bg-purple-600 text-white hover:bg-purple-700"}`,onClick:async()=>{var a;if(_)return;D(!0),C({isOpen:!0,message:"Iniciando proceso...",subMessage:"Estamos preparando tu álbum",progress:0});const s=[{progress:20,message:"Verificando proyecto",subMessage:"Validando contenido del álbum",delay:500},{progress:40,message:"Preparando tu álbum",subMessage:"Organizando páginas y elementos",delay:800},{progress:60,message:"Agregando al carrito",subMessage:"Configurando tu pedido",delay:1e3},{progress:80,message:"Finalizando proceso",subMessage:"Últimos detalles",delay:700},{progress:100,message:"¡Proceso completado!",subMessage:"Preparando redirección",delay:500}];try{for(const o of s)await new Promise(c=>setTimeout(c,o.delay)),C({isOpen:!0,message:o.message,subMessage:o.subMessage,progress:o.progress});if(!(g!=null&&g.id)){console.error("❌ No hay datos del proyecto"),C({isOpen:!1,message:"",subMessage:"",progress:0}),alert("Error: No se encontró información del proyecto.");return}if(typeof N!="function"){console.error("❌ addAlbumToCart no es una función"),C({isOpen:!1,message:"",subMessage:"",progress:0}),alert("Error: Función de carrito no disponible. Inténtelo nuevamente.");return}console.log("🛒 [CART] Iniciando addAlbumToCart...");const t=N();let r;if(t&&typeof t.then=="function"?(console.log("🛒 [CART] addAlbumToCart es async, esperando resultado..."),r=await t):(console.log("🛒 [CART] addAlbumToCart es sync, resultado inmediato:",t),r=t),console.log("🛒 [CART] Resultado final de addAlbumToCart:",r),!r){console.error("❌ No se pudo agregar al carrito"),C({isOpen:!1,message:"",subMessage:"",progress:0}),alert("Error al agregar el álbum al carrito. Revise la consola para más detalles.");return}te().catch(o=>{console.warn("⚠️ Error al generar PDF (continuando):",o.message)}),C({isOpen:!0,message:"¡Álbum agregado al carrito!",subMessage:"Redirigiendo automáticamente...",progress:100}),await new Promise(o=>setTimeout(o,1e3)),C({isOpen:!1,message:"",subMessage:"",progress:0}),b(),setTimeout(()=>{window.location.pathname!=="/cart"&&(console.log("🔄 [BACKUP] Redirección de respaldo ejecutándose..."),window.location.href="/cart")},3e3)}catch(t){console.error("❌ Error en proceso de compra:",t),C({isOpen:!1,message:"",subMessage:"",progress:0});try{const o=`${((a=window.Global)==null?void 0:a.APP_CORRELATIVE)||"bananalab"}_cart`;if(JSON.parse(localStorage.getItem(o)||"[]").length>0){console.log("✅ [RECOVERY] Producto encontrado en carrito, redirigiendo..."),b(),setTimeout(()=>{window.location.href="/cart"},500);return}}catch(o){console.error("❌ Error en recuperación:",o)}confirm(`Error: ${t.message}

¿Desea intentar ir al carrito manualmente?`)&&(window.location.href="/cart")}finally{D(!1)}},disabled:_||V,children:_?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Agregando al carrito..."]}):"Comprar ahora"}),e.jsx("button",{className:"flex-1 py-3 px-4 rounded-lg bg-gray-200 text-gray-700 font-semibold shadow hover:bg-gray-300 transition",onClick:b,disabled:_||V,children:"Continuar editando"})]}),S.isOpen&&e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-[9999] animate-in fade-in duration-500",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl p-8 min-w-96 max-w-96 mx-4 text-center relative overflow-hidden animate-in zoom-in duration-500",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-50 via-blue-50 to-pink-50 opacity-60"}),e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"absolute top-4 left-4 w-2 h-2 bg-purple-300 rounded-full animate-bounce opacity-60",style:{animationDelay:"0s"}}),e.jsx("div",{className:"absolute top-8 right-6 w-1 h-1 bg-blue-300 rounded-full animate-bounce opacity-60",style:{animationDelay:"0.5s"}}),e.jsx("div",{className:"absolute bottom-8 left-8 w-1.5 h-1.5 bg-pink-300 rounded-full animate-bounce opacity-60",style:{animationDelay:"1s"}}),e.jsx("div",{className:"absolute bottom-4 right-4 w-1 h-1 bg-purple-400 rounded-full animate-bounce opacity-60",style:{animationDelay:"1.5s"}})]}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"mb-6 relative",children:[e.jsxs("div",{className:"w-24 h-24 mx-auto bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center shadow-2xl relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-400 to-pink-400 rounded-full animate-ping opacity-20"}),e.jsx("div",{className:"absolute inset-2 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full animate-pulse"}),e.jsx("svg",{className:"w-12 h-12 text-white relative z-10",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})]}),e.jsx("div",{className:"absolute inset-0 w-24 h-24 mx-auto",children:e.jsxs("svg",{className:"w-24 h-24 transform -rotate-90",viewBox:"0 0 96 96",children:[e.jsx("circle",{cx:"48",cy:"48",r:"44",stroke:"currentColor",strokeWidth:"4",fill:"none",className:"text-gray-200"}),e.jsx("circle",{cx:"48",cy:"48",r:"44",stroke:"url(#progressGradient)",strokeWidth:"4",fill:"none",strokeLinecap:"round",strokeDasharray:`${2*Math.PI*44}`,strokeDashoffset:`${2*Math.PI*44*(1-S.progress/100)}`,style:{transition:"stroke-dashoffset 0.5s ease-in-out"}}),e.jsx("defs",{children:e.jsxs("linearGradient",{id:"progressGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",style:{stopColor:"#8b5cf6",stopOpacity:1}}),e.jsx("stop",{offset:"100%",style:{stopColor:"#ec4899",stopOpacity:1}})]})})]})})]}),e.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent mb-3 animate-pulse",children:S.message}),e.jsx("p",{className:"text-gray-600 mb-6 text-base leading-relaxed",children:S.subMessage}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4 mb-4 overflow-hidden shadow-inner",children:e.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 h-4 rounded-full transition-all duration-500 ease-out relative",style:{width:`${S.progress}%`},children:[e.jsx("div",{className:"absolute inset-0 bg-white/30 animate-pulse rounded-full"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent skew-x-12 animate-shimmer"})]})}),e.jsxs("p",{className:"text-lg font-bold text-purple-600 mb-4",children:[S.progress,"%"]})]}),e.jsx("style",{jsx:!0,children:`
                            @keyframes shimmer {
                                0% { transform: translateX(-100%) skewX(-12deg); }
                                100% { transform: translateX(200%) skewX(-12deg); }
                            }
                            .animate-shimmer {
                                animation: shimmer 2s infinite;
                            }
                        `})]})})]})},ve=({page:l,pageIdx:b})=>{const x=l.pageTitle||(l.type==="content"?`Página ${l.originalPageNumber||l.pageNumber||b+1}`:l.type==="cover"?"Portada":l.type==="final"?"Contraportada":`Página ${b+1}`),I=l.pageType||l.type||"content";let N="";switch(I){case"cover":N="📚";break;case"final":N="📖";break;case"content":N="📄";break;default:N="📄"}return e.jsxs("div",{className:"flex flex-col items-center justify-center w-full h-full bg-gray-50 border-2 border-gray-200 rounded-lg",style:{minHeight:"400px"},children:[e.jsx("div",{className:"text-6xl mb-4",children:N}),e.jsx("div",{className:"text-lg font-semibold text-gray-700 mb-2",children:x}),e.jsx("div",{className:"text-sm text-gray-500",children:"Vista previa"}),l.layout&&e.jsxs("div",{className:"text-xs text-gray-400 mt-2",children:["Layout: ",l.layout.name||"Personalizado"]}),!1]})};export{es as B};
