import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{R as S,r as s}from"./index-BH53Isel.js";import{B as z}from"./book-BuHIVa2d.js";import"./index-yBjzXJbu.js";import"./createLucideIcon-Cy5Ya80P.js";const E=S.memo(({pageId:$,thumbnail:t,altText:p,type:l="content",className:x="",onLoad:o,onError:d,showPlaceholder:h=!0,placeholderIcon:y})=>{const[n,m]=s.useState(!1),[r,g]=s.useState(!1),[f,j]=s.useState(!1),u=s.useRef(null),i=s.useRef(null);s.useEffect(()=>{if(u.current)return i.current=new IntersectionObserver(([a])=>{var c;a.isIntersecting&&(j(!0),(c=i.current)==null||c.disconnect())},{rootMargin:"50px"}),i.current.observe(u.current),()=>{var a;(a=i.current)==null||a.disconnect()}},[]);const v=()=>{m(!0),g(!1),o==null||o()},b=()=>{g(!0),m(!1),d==null||d()},N=t&&f&&!r,I=!t||r||!n,w=y||(()=>l==="cover"||l==="final"?e.jsx(z,{className:"w-8 h-8"}):e.jsx("div",{className:"grid grid-cols-2 gap-0.5 w-8 h-8",children:Array.from({length:4}).map((a,c)=>e.jsx("div",{className:"bg-gray-300 rounded-sm"},c))})),R={cover:"text-purple-300 bg-purple-50",content:"text-blue-300 bg-blue-50",final:"text-green-300 bg-green-50"}[l]||"text-gray-300 bg-gray-50";return e.jsxs("div",{ref:u,className:`relative w-full h-full overflow-hidden ${x}`,children:[N&&e.jsx("img",{src:t,alt:p,className:`absolute inset-0 w-full h-full object-contain transition-opacity duration-300 ${n?"opacity-100":"opacity-0"}`,onLoad:v,onError:b,loading:"lazy",decoding:"async",style:{imageRendering:"optimizeQuality"}}),I&&h&&e.jsx("div",{className:`absolute inset-0 flex items-center justify-center ${R} transition-opacity duration-300 ${n&&!r?"opacity-0":"opacity-100"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx(w,{}),!t&&e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"text-xs opacity-75",children:"Generando..."}),e.jsx("div",{className:"w-8 h-1 bg-current opacity-30 rounded-full mx-auto mt-1",children:e.jsx("div",{className:"h-full bg-current rounded-full animate-pulse"})})]}),r&&e.jsx("div",{className:"text-xs opacity-75 mt-1",children:"Error"})]})}),t&&f&&!n&&!r&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100",children:e.jsx("div",{className:"w-6 h-6 border-2 border-gray-300 border-t-gray-600 rounded-full animate-spin"})})]})});E.displayName="OptimizedThumbnail";
