import{j as t}from"./AboutSimple-Cf8x2fCZ.js";import{r as i}from"./index-BH53Isel.js";import{c as C}from"./ReactAppend-QR5TrZfj.js";import{B as D}from"./Base-DlUcAFv5.js";import{C as N}from"./CreateReactScript-CLZ4wiPb.js";import{T as y}from"./Table-DitbKwtZ.js";import{I as n}from"./InputFormGroup-D5I6zpZc.js";import{R as E}from"./ReactAppend-Vm5G2nof.js";import{D as b}from"./DxButton-DV0H-ZcL.js";import{S as T}from"./SwitchFormGroup-CGYpv_4Q.js";import{T as k}from"./TextareaFormGroup-DVzYJtLM.js";import{M as B}from"./Modal-B6PZ5H4-.js";import{S}from"./ProductCard-B4Ag8Mdr.js";import{C as P}from"./CanvasPresetsRest-C7tex7wE.js";import"./index-yBjzXJbu.js";import"./index-B6ujFmsw.js";import"./Global-D6eBBAMK.js";import"./tippy-react.esm-_w2ZiBvC.js";import"./index-fRpqIG3j.js";/* empty css              */import"./Logout-DXm-w6is.js";import"./main-Byrjfx4U.js";import"./___vite-browser-external_commonjs-proxy-0zb4Agf2.js";import"./MenuItemContainer-TZamybjX.js";import"./index.esm-BjZvalV8.js";import"./index-NIGUFBhG.js";/* empty css               */import"./General-BmbBKdsB.js";import"./LaravelSession-Dz9cpV3l.js";import"./BasicRest-DByHAxxD.js";import"./index-BJa4kPFi.js";const f=new P,G=({presetTypes:x={}})=>{const s=i.useRef(),h=i.useRef(),o=i.useRef(),a=i.useRef(),l=i.useRef(),c=i.useRef(),u=i.useRef(),m=i.useRef(),p=i.useRef(),[g,v]=i.useState(!1),R=e=>{e!=null&&e.id?(v(!0),o.current.value=e.id,a.current.value=e.name||"",l.current.value=e.description||"",c.current.value=e.width||"",u.current.value=e.height||"",m.current.value=e.dpi||300,p.current.value=e.background_color||"#FFFFFF"):(v(!1),o.current.value="",a.current.value="",l.current.value="",c.current.value="",u.current.value="",m.current.value=300,p.current.value="#FFFFFF"),$(h.current).modal("show")},w=async e=>{e.preventDefault();const r={id:o.current.value||void 0,name:a.current.value,description:l.current.value,width:parseFloat(c.current.value),height:parseFloat(u.current.value),dpi:parseInt(m.current.value,10),pages:0,background_color:p.current.value,type:"photo"};await f.save(r)&&($(s.current).dxDataGrid("instance").refresh(),$(h.current).modal("hide"))},F=async e=>{const{isConfirmed:r}=await S.fire({title:"Eliminar preset",text:"¿Estás seguro de eliminar este preset?",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"});!r||!await f.delete(e)||$(s.current).dxDataGrid("instance").refresh()},j=async({id:e,value:r})=>{await f.boolean({id:e,field:"active",value:r})&&$(s.current).dxDataGrid("instance").refresh()};return t.jsxs(t.Fragment,{children:[t.jsx(y,{gridRef:s,title:"Presets de Canvas",rest:f,toolBar:e=>{e.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(s.current).dxDataGrid("instance").refresh()}}),e.unshift({widget:"dxButton",location:"after",options:{icon:"plus",text:"Nuevo preset",hint:"Nuevo preset",onClick:()=>R()}})},columns:[{},{dataField:"name",caption:"Nombre",minWidth:200},{caption:"Dimensiones",cellTemplate:(e,{data:r})=>{e.text(`${r.width} x ${r.height} mm`)},width:150,allowFiltering:!1},{},{dataField:"dpi",caption:"DPI",width:100,alignment:"center"},{dataField:"active",caption:"Visible",dataType:"boolean",width:"80px",cellTemplate:(e,{data:r})=>{E(e,t.jsx(T,{checked:r.active,onChange:d=>j({id:r.id,value:d.target.checked})}))}},{caption:"Acciones",cellTemplate:(e,{data:r})=>{e.css("text-overflow","unset"),e.append(b({className:"btn btn-xs btn-soft-primary",title:"Editar",icon:"fa fa-pen",onClick:()=>R(r)})),e.append(b({className:"btn btn-xs btn-soft-danger",title:"Eliminar",icon:"fa fa-trash",onClick:()=>F(r.id)}))},allowFiltering:!1,allowExporting:!1}]}),t.jsx(B,{modalRef:h,title:g?"Editar preset":"Agregar preset",onSubmit:w,size:"lg",children:t.jsxs("div",{className:"row",id:"principal-container",children:[t.jsx("input",{ref:o,type:"hidden"}),t.jsx("div",{className:"col-md-6",children:t.jsx(n,{eRef:a,label:"Nombre del Preset",placeholder:"Ej: Canvas 30x40mm",required:!0})}),t.jsx("div",{className:"col-md-12",children:t.jsx(k,{eRef:l,label:"Descripción",placeholder:"Descripción del preset (opcional)",rows:2})}),t.jsx("div",{className:"col-md-3",children:t.jsx(n,{eRef:c,label:"Ancho (mm)",type:"number",min:"0.1",step:"0.1",required:!0})}),t.jsx("div",{className:"col-md-3",children:t.jsx(n,{eRef:u,label:"Alto (mm)",type:"number",min:"0.1",step:"0.1",required:!0})}),t.jsx("div",{className:"col-md-3",children:t.jsx(n,{eRef:m,label:"DPI",type:"number",min:"72",max:"1200",required:!0})}),t.jsx("div",{className:"col-md-6",children:t.jsx(n,{eRef:p,label:"Color de Fondo",type:"color"})})]})})]})};N((x,s)=>{C.createRoot(x).render(t.jsx(D,{...s,title:"Presets de Canvas",children:t.jsx(G,{...s})}))});
