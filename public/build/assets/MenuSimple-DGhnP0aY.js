import{j as t}from"./AboutSimple-Cf8x2fCZ.js";import{r as n}from"./index-BH53Isel.js";import{t as y}from"./MobileMenu-C3K8Idwv.js";import{T as k}from"./tag-BY9rARtP.js";import{C as _}from"./chevron-up-D78jyEhP.js";import{C as $}from"./chevron-down-DS-mdh9v.js";import"./index-yBjzXJbu.js";import"./main-BvVILmTO.js";import"./___vite-browser-external_commonjs-proxy-0zb4Agf2.js";import"./BasicRest-D4oLyrkA.js";import"./index-CMHsc23u.js";import"./index-rimy3MAc.js";import"./index-fNjTmf9T.js";import"./createLucideIcon-Cy5Ya80P.js";const D=({pages:v=[],items:j,data:m,visible:h=!1})=>{const[u,p]=n.useState(!1),[o,w]=n.useState([]),[i,g]=n.useState(0),d=n.useRef(null);n.useEffect(()=>{function e(s){d.current&&!d.current.contains(s.target)&&p(!1)}return document.addEventListener("pointerdown",e),()=>document.removeEventListener("pointerdown",e)},[]),n.useEffect(()=>{(async()=>{try{console.log("Fetching active tags...");const s=await y.getTags();if(console.log("Tags response:",s),s!=null&&s.data){const r=s.data.filter(a=>a.promotional_status==="permanent"||a.promotional_status==="active").sort((a,l)=>a.promotional_status==="active"&&l.promotional_status!=="active"?-1:l.promotional_status==="active"&&a.promotional_status!=="active"?1:a.name.localeCompare(l.name));w(r),console.log("Active tags set:",r);const c=r.filter(a=>a.promotional_status==="active").length,N=r.filter(a=>a.promotional_status==="permanent").length;if(console.log(`ðŸŽ¯ Tags cargados: ${c} promocionales activos, ${N} permanentes`),c>0){const a=r.filter(l=>l.promotional_status==="active");console.log("ðŸŽ‰ Promociones activas:",a.map(l=>`${l.name} (${l.start_date} - ${l.end_date})`))}}}catch(s){console.error("Error fetching tags:",s)}})()},[]),n.useEffect(()=>{if(o.length>2&&window.innerWidth<1024){const e=setInterval(()=>{g(s=>{const r=s+2;return r>=o.length?0:r})},3e3);return()=>clearInterval(e)}},[o.length]);const f=window.innerWidth<1024,x=f?h&&o.length>0:!0,b=o.length>0&&f&&h;return console.log("items",m),console.log("tags",o),console.log("isMobile",f),console.log("shouldShowMenu",x),x?t.jsx("nav",{className:`${b?" block w-full relative md:block bg-secondary font-paragraph text-sm":" relative w-full md:block bg-secondary font-paragraph text-sm"}`,ref:d,children:t.jsx("div",{className:"px-primary  2xl:px-0 2xl:max-w-7xl mx-auto",children:t.jsx("ul",{className:"flex items-center gap-4 lg:gap-6 text-sm justify-between",children:b?t.jsx("div",{className:"w-full py-3 px-4",children:t.jsxs("div",{className:"relative",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-3 h-10",children:[o.slice(i,i+2).map((e,s)=>{const r=i+s;return t.jsxs("a",{href:`/catalogo?tag=${e.id}`,className:"group relative border-white border-2 overflow-hidden rounded-full shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-[1.02]",style:{background:`linear-gradient(135deg, ${e.background_color||"#3b82f6"}, ${e.background_color||"#3b82f6"}dd)`},children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/10 to-transparent"}),t.jsx("div",{className:"relative h-full flex items-center justify-center p-3",children:t.jsxs("div",{className:"flex items-center gap-2 text-center",children:[e.icon?t.jsx("img",{src:`/storage/images/tag/${e.icon}`,alt:e.name,className:"w-6 h-6 object-contain filter brightness-0 invert",onError:c=>c.target.src="/api/cover/thumbnail/null"}):t.jsx(k,{size:20,style:{color:e.text_color||"#ffffff"}}),t.jsx("span",{className:"text-xs font-semibold leading-tight",style:{color:e.text_color||"#ffffff"},children:e.name})]})}),t.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-all duration-300"})]},`${e.id}-${r}`)}),o.slice(i,i+2).length<2&&t.jsx("div",{className:"rounded-2xl bg-white/10 flex items-center justify-center",children:t.jsx("div",{className:"text-white/50 text-xs",children:"MÃ¡s prÃ³ximamente"})})]}),o.length>2&&t.jsx("div",{className:"flex justify-center mt-2 gap-1",children:Array.from({length:Math.ceil(o.length/2)}).map((e,s)=>t.jsx("button",{onClick:()=>g(s*2),className:`w-2 h-2 rounded-full transition-all duration-300 ${Math.floor(i/2)===s?"bg-primary shadow-lg":"bg-neutral-light hover:bg-white/60"}`},s))})]})}):t.jsxs(t.Fragment,{children:[t.jsxs("ul",{className:"flex items-center gap-4 lg:gap-6 text-sm",children:[(m==null?void 0:m.showCategories)&&t.jsxs("li",{className:"relative py-3",children:[t.jsxs("button",{className:"font-medium customtext-neutral-dark flex items-center gap-2 hover:customtext-primary pr-6 transition-colors duration-300 relative before:absolute before:right-0 before:top-1/2 before:-translate-y-1/2 before:h-3 before:w-[1px] before:bg-[#262624]",onClick:()=>p(!u),children:["Categorias",u?t.jsx(_,{size:20}):t.jsx($,{size:20})]}),u&&t.jsx("div",{className:"absolute z-50 top-12 left-0 bg-white shadow-xl border-t rounded-xl transition-all duration-500 ease-in-out h-[70dvh] overflow-y-scroll w-[calc(60vw-6rem)]",children:t.jsx("div",{className:"p-8",children:t.jsx("div",{className:"columns-1 sm:columns-2 lg:columns-3 xl:columns-4 gap-8",children:[...j].sort((e,s)=>e.name.localeCompare(s.name)).map((e,s)=>t.jsxs("div",{className:"w-full break-inside-avoid-column mb-8",children:[t.jsx("a",{href:`/catalogo?category=${e.slug}`,className:"customtext-neutral-dark font-bold text-base mb-4 cursor-pointer hover:customtext-primary transition-colors duration-300 w-full inline-block border-b pb-2",children:e.name}),t.jsx("ul",{className:"space-y-1",children:e.subcategories.map((r,c)=>t.jsx("li",{className:"w-full",children:t.jsx("a",{href:`/catalogo?subcategory=${r.slug}`,className:"customtext-neutral-dark text-sm hover:customtext-primary transition-colors duration-300 cursor-pointer w-full inline-block line-clamp-2",children:r.name})},c))})]},s))})})})]}),v.filter(e=>e.menuable).map((e,s,r)=>t.jsx("li",{className:"py-3",children:t.jsx("a",{href:e.path,className:"font-medium hover:customtext-primary cursor-pointer transition-all duration-300"+(s!==r.length-1?" pr-6 relative before:absolute before:right-0 before:top-1/2 before:-translate-y-1/2 before:h-3 before:w-[1px] before:bg-[#262624]":" pr-6"),children:e.name})},s))]}),o.length>0&&t.jsx("div",{className:"flex items-center gap-4 lg:gap-4 text-sm",children:o.map((e,s)=>t.jsx("li",{className:"",children:t.jsxs("a",{href:`/catalogo?tag=${e.id}`,className:"font-medium rounded-full p-2 hover:brightness-105 cursor-pointer transition-all duration-300 relative flex items-center gap-2",style:{backgroundColor:e.background_color||"#3b82f6",color:e.text_color||"#ffffff"},title:e.description||e.name,children:[e.icon&&t.jsx("img",{src:`/storage/images/tag/${e.icon}`,alt:e.name,className:"w-4 h-4",onError:r=>r.target.src="/api/cover/thumbnail/null"}),e.name]})},e.id))})]})})})}):null};export{D as default};
