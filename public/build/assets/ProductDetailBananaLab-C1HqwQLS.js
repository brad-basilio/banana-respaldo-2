import{j as a}from"./AboutSimple-Cf8x2fCZ.js";import{r as l}from"./index-BH53Isel.js";import{I as rs}from"./ItemsRest-BSMuMwsF.js";import{P as os}from"./ProjectsRest-BkwGpyic.js";import"./main-6DCdASTx.js";import{S as c}from"./ProductCard-CRhBSmWZ.js";import"./BlogCarousel-BcMdR14t.js";/* empty css               */import"./BlogCarrusel-B3SD0Iql.js";import"./ProductMakita-BWUynGjS.js";import"./ProductNavigation-BvCahFZS.js";import{C as ts}from"./HeaderSearch-BZ6sxqwg.js";/* empty css              */import ns from"./ProductBananaLab-s6bMhull.js";import{t as ls}from"./index-BZYhE2TF.js";import{m as r}from"./proxy-F8AlgMSF.js";import{C as v}from"./chevron-right-Ckt5D2ka.js";import{C as H}from"./circle-check-CPWcvHtC.js";import{C as cs}from"./chevron-up-D78jyEhP.js";import{C as is}from"./chevron-down-DS-mdh9v.js";import{B as ds}from"./brush-CV0tCVRD.js";import{C as ps}from"./circle-check-big-D6DM3vPb.js";import"./index-yBjzXJbu.js";import"./BasicRest-C4m6wu80.js";import"./___vite-browser-external_commonjs-proxy-0zb4Agf2.js";import"./eye-CKCH9ORv.js";import"./createLucideIcon-Cy5Ya80P.js";import"./PaymentModal-BB1JXzaZ.js";import"./index-fNjTmf9T.js";import"./index-Chjiymov.js";import"./CartItemRow-CLVGv7Ee.js";import"./Number2Currency-e57Tgsuk.js";import"./tippy-react.esm-BWiGTO87.js";import"./index-rimy3MAc.js";import"./trash-2-DK1wnsDn.js";import"./plus-Bot15Khs.js";import"./index-CmxRu895.js";import"./navigation-8XRQbJaH.js";import"./create-element-if-not-defined-ubJ3ncqT.js";import"./pagination-BlBBVkNx.js";import"./grid-BZ4EKnFQ.js";import"./Strengths-Ym4uqnVf.js";import"./CardProductBananaLab-BFvT6V2i.js";import"./CartModalBananaLab-8Jz_q0w8.js";import"./shopping-bag-CoWGrL8C.js";import"./x-DBMwyD6F.js";import"./shopping-cart-CZEUxbmv.js";import"./arrow-right-DR00rP9v.js";import"./heart-ChuvJi-4.js";import"./adjustTextColor-DJKJvkxA.js";import"./chevron-left-B2s3ZsB7.js";function ha({item:s,data:xs,setCart:b,cart:i,favorites:m,setFavorites:R,generals:u,isUser:A}){var N,C,k,E,P,B,I,$,S,_,T;const p=new rs,O=new os,h=u==null?void 0:u.find(e=>e.correlative==="phone_whatsapp"),q=h==null?void 0:h.description,W=encodeURIComponent(`Â¡Hola! Tengo dudas sobre este producto: ${s.name}`),F=`https://wa.me/${q}?text=${W}`,M=()=>{window.open(F,"_blank")},[U,V]=l.useState(!1),[d,j]=l.useState({url:s==null?void 0:s.image,type:"main"}),[x,z]=l.useState(!1),[us,hs]=l.useState(1),[D,gs]=l.useState(!1),[L,K]=l.useState([]),[y,G]=l.useState([]),[fs,Q]=l.useState([]);i==null||i.find(e=>e.id==(s==null?void 0:s.id)),l.useEffect(()=>{s!=null&&s.id&&(Y(s),X(s),J(s),Z(s))},[s]);const w={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.5}}},t={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{duration:.5}}},g={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},J=async e=>{try{const o={id:e==null?void 0:e.id};if(!await p.updateViews(o))return}catch{return}},X=async e=>{try{const o={id:e==null?void 0:e.id},n=await p.verifyCombo(o);if(!n)return;const f=n[0].associated_items;K(Object.values(f))}catch{return}},Y=async e=>{try{const o={id:e==null?void 0:e.id},n=await p.productsRelations(o);if(!n)return;G(Object.values(n))}catch{return}},Z=async e=>{try{const o={slug:e==null?void 0:e.slug},n=await p.getVariations(o);if(!n)return;Q(n.variants)}catch{return}};L.reduce((e,o)=>e+parseFloat(o.final_price),0),m.some(e=>e.id===s.id);const ss=()=>window.innerWidth<=768||/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),as=async()=>{if(ss()){c.fire({title:"",html:`
                    <div class="text-center">
                        <div class="text-5xl mb-3">ðŸŽ¨</div>
                        <p class="text-base text-gray-700 mb-3">Para crear tu regalo personalizado necesitas usar una <strong>laptop</strong> o <strong>PC</strong></p>
                        <p class="text-sm text-gray-500">El editor funciona mejor en pantallas grandes</p>
                    </div>
                `,confirmButtonText:"Entendido",confirmButtonColor:"#af5cb8",showCancelButton:!1,customClass:{popup:"swal2-mobile-modal",title:"text-lg font-semibold",htmlContainer:"text-center"},width:"85%",padding:"1.5rem"});return}es()},es=async()=>{if(!A){c.fire({title:"Inicia sesiÃ³n para continuar",html:`
                    <div class="text-center">
                        <div class="text-5xl mb-4">ðŸŽ¨</div>
                        <p class="text-lg font-medium text-gray-700 mb-3">Para crear tu regalo personalizado</p>
                        <p class="text-base text-gray-600 mb-4">Necesitas tener una cuenta para acceder al editor de diseÃ±o</p>
                        <div class="bg-blue-50 p-4 rounded-lg">
                            <p class="text-sm customtext-primary">
                                <strong>âœ¨ Beneficios:</strong> Guarda tus proyectos, accede desde cualquier lugar y crea diseÃ±os Ãºnicos
                            </p>
                        </div>
                    </div>
                `,showCancelButton:!0,confirmButtonColor:"#af5cb8",cancelButtonColor:"#6b7280",confirmButtonText:"ðŸš€ Iniciar sesiÃ³n",cancelButtonText:"Cancelar",customClass:{popup:"swal2-login-modal",title:"text-xl font-bold text-gray-800",htmlContainer:"text-center",confirmButton:"px-6 py-3 text-base font-semibold",cancelButton:"px-6 py-3 text-base"},width:"450px",padding:"2rem",backdrop:"rgba(0,0,0,0.4)",allowOutsideClick:!1}).then(e=>{if(e.isConfirmed){const o=window.location.href,n=`/iniciar-sesion?redirect=${encodeURIComponent(o)}`;window.location.href=n}});return}try{c.fire({title:"Creando proyecto...",text:"Por favor espera mientras preparamos tu editor de diseÃ±o",allowOutsideClick:!1,allowEscapeKey:!1,didOpen:()=>{c.showLoading()}});const e={item_id:s==null?void 0:s.id,name:`Proyecto - ${s==null?void 0:s.name}`,description:`Proyecto personalizado para ${s==null?void 0:s.name}`,item_name:s==null?void 0:s.name,item_image:s==null?void 0:s.image,item_price:s==null?void 0:s.final_price,canvas_preset_id:s==null?void 0:s.canvas_preset_id};console.log("Creating canvas project with data:",e);const o=await O.createCanvasProject(e);if(console.log("Created project response:",o),o&&o.id)c.close(),ls.success("Proyecto creado",{description:"Tu proyecto ha sido creado exitosamente. SerÃ¡s redirigido al editor.",icon:a.jsx(ps,{className:"h-5 w-5 text-green-500"}),duration:2e3,position:"bottom-center"}),setTimeout(()=>{window.location.href=`/canvas/editor?project=${o.id}`},1e3);else throw c.close(),new Error("No se pudo crear el proyecto. El servidor no devolviÃ³ datos del proyecto.")}catch(e){c.close(),console.error("Error creating canvas project:",e),c.fire({title:"Error",text:e.message||"OcurriÃ³ un error al crear el proyecto. Por favor intenta nuevamente.",icon:"error",confirmButtonText:"Entendido"})}};return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"hidden lg:block bg-sections-color py-2 text-sm",children:a.jsxs(r.div,{initial:"hidden",animate:"visible",variants:w,className:" px-primary 2xl:max-w-7xl 2xl:px-0 mx-auto text-sm font-semibold font-paragraph flex items-center customtext-neutral-dark",children:[((N=s==null?void 0:s.collection)==null?void 0:N.name)&&a.jsxs("a",{href:`/catalogo?collection=${(C=s==null?void 0:s.collection)==null?void 0:C.slug}`,className:"flex gap-2 items-center customtext-primary cursor-pointer",children:[(k=s==null?void 0:s.collection)==null?void 0:k.name," ",a.jsx(v,{strokeWidth:1.5})]}),((E=s==null?void 0:s.category)==null?void 0:E.name)&&a.jsxs("a",{href:`/catalogo?category=${s==null?void 0:s.category.slug}`,className:"flex gap-2 items-center customtext-primary cursor-pointer",children:[(P=s==null?void 0:s.category)==null?void 0:P.name," ",a.jsx(v,{strokeWidth:1.5})]}),((B=s==null?void 0:s.subcategory)==null?void 0:B.name)&&a.jsxs("a",{href:`/catalogo?subcategory=${s==null?void 0:s.subcategory.slug}`,className:"flex gap-2 items-center customtext-primary cursor-pointer",children:[(I=s==null?void 0:s.subcategory)==null?void 0:I.name," ",a.jsx(v,{subcategory:1.5})]}),s==null?void 0:s.name]})}),a.jsxs(r.div,{initial:"hidden",animate:"visible",variants:w,className:" px-primary 2xl:max-w-7xl 2xl:px-0 mx-auto py-4 md:py-6 xl:py-8 bg-white font-paragraph",children:[a.jsx(r.div,{variants:t,className:"bg-white rounded-xl ",children:a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 xl:gap-20 2xl:gap-32",children:[a.jsx(r.div,{variants:t,className:"font-font-general lg:hidden",children:a.jsx(r.h1,{className:"customtext-primary text-center text-4xl  lg:text-start lg:text-4xl 2xl:text-5xl font-bold mt-2",whileHover:{x:5},children:s==null?void 0:s.name})}),a.jsx("div",{className:"space-y-6",children:a.jsxs(r.div,{variants:g,className:"flex flex-col gap-6",children:[a.jsx(r.div,{variants:t,className:"flex-1",children:a.jsx(r.img,{src:d.type==="main"?`/storage/images/item/${d.url}`:`/storage/images/item/${d.url}`,onError:e=>e.target.src="/api/cover/thumbnail/null",alt:"Product main",className:"w-full object-cover aspect-square rounded-3xl",whileHover:{scale:1.02},transition:{type:"spring",stiffness:400,damping:10}})}),a.jsxs(r.div,{variants:t,className:"flex flex-row gap-2 items-center",children:[a.jsx(r.button,{onClick:()=>j({url:s==null?void 0:s.image,type:"main"}),whileHover:{scale:1.05},whileTap:{scale:.95},className:`w-16 h-16  rounded-xl object-cover overflow-hidden ${d.url===(s==null?void 0:s.image)?"shadow-2xl w-20 h-20":"shadow"}`,children:a.jsx("img",{src:`/storage/images/item/${s==null?void 0:s.image}`,alt:"Main Thumbnail",className:"w-full h-full object-cover",onError:e=>e.target.src="/api/cover/thumbnail/null"})}),s==null?void 0:s.images.map((e,o)=>a.jsx(r.button,{onClick:()=>j({url:e.url,type:"gallery"}),whileHover:{scale:1.05},whileTap:{scale:.95},className:`w-16 h-16  rounded-xl object-cover overflow-hidden ${d.url===e.url?"shadow-2xl w-20 h-20":"shadow"}`,children:a.jsx("img",{src:`/storage/images/item/${e.url}`||"/api/cover/thumbnail/null",alt:`Thumbnail ${o+1}`,className:"w-full h-full object-cover",onError:n=>n.target.src="/api/cover/thumbnail/null"})},o))]})]})}),a.jsxs(r.div,{variants:g,className:"flex flex-col gap-2",children:[a.jsx(r.div,{variants:t,className:"font-font-general hidden lg:block",children:a.jsx(r.h1,{className:"customtext-neutral-dark text-3xl  lg:text-start lg:text-4xl 2xl:text-5xl font-bold mt-2",whileHover:{x:5},children:s==null?void 0:s.name})}),a.jsxs(r.div,{variants:t,className:" hidden lg:flex flex-wrap customtext-neutral-light items-center gap-y-2 gap-x-8 text-sm font-font-general",children:[a.jsxs("span",{className:"customtext-neutral-light text-sm 2xl:text-base",children:["SKU:"," ",a.jsx("span",{className:"customtext-neutral-dark font-bold",children:s==null?void 0:s.sku})]}),a.jsxs("span",{className:"customtext-neutral-light text-sm 2xl:text-base",children:["Disponibilidad:"," ",a.jsx("span",{className:"customtext-neutral-dark font-bold",children:(s==null?void 0:s.stock)>0?"En stock":"Agotado"})]})]}),a.jsxs(r.div,{variants:t,className:"flex flex-col w-full xl:w-1/2 !font-font-general max-w-xl lg:mt-5",children:[(s==null?void 0:s.discount)&&(s==null?void 0:s.discount)<(s==null?void 0:s.price)&&(s==null?void 0:s.discount)>0&&a.jsxs("p",{className:"text-sm 2xl:text-base customtext-neutral-light",children:["Precio:"," ",a.jsxs("span",{className:"line-through",children:["S/ ",s==null?void 0:s.price]})]}),a.jsxs("div",{className:"flex flex-row items-center gap-4 relative",children:[a.jsxs(r.span,{className:"text-[40px] font-bold customtext-neutral-dark",whileHover:{scale:1.05},children:["S/ ",s==null?void 0:s.final_price]}),(s==null?void 0:s.discount)&&(s==null?void 0:s.discount)<(s==null?void 0:s.price)&&(s==null?void 0:s.discount)>0&&a.jsxs(r.span,{className:"bg-[#F93232] text-white font-bold px-3 py-2 rounded-xl text-base",whileHover:{scale:1.1},whileTap:{scale:.9},children:["-",Number(s==null?void 0:s.discount_percent).toFixed(1),"%"]})]})]}),a.jsx("div",{className:"block flex-1 w-full max-h-max",children:a.jsxs("div",{className:"bg-sections-color rounded-lg p-6",children:[a.jsx("ul",{className:`space-y-2 customtext-neutral-light mb-4 transition-all duration-300 max-h-full ${x?"md:max-h-full":"md:max-h-24 md:overflow-hidden"}`,style:{listStyleType:"disc"},children:s==null?void 0:s.specifications.map((e,o)=>e.type==="principal"&&a.jsxs("li",{className:"flex gap-2",children:[a.jsxs("div",{className:"hidden lg:flex gap-2",children:[a.jsx(H,{className:"customtext-primary"}),a.jsxs("span",{className:"font-semibold",children:[e.title," :"]}),e.description]}),a.jsxs("div",{className:"flex flex-col lg:hidden gap-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(H,{className:"min-h-4 min-w-4 max-w-4 max-h-4 customtext-primary"}),a.jsxs("span",{className:"font-semibold",children:[e.title," :"]})]}),a.jsx("span",{className:"ml-6",children:e.description})]})]},o))}),a.jsxs("button",{className:"customtext-primary text-sm font-semibold hover:underline hidden md:flex items-center gap-1 transition-all duration-300",onClick:()=>z(!x),children:[x?"Ver menos":"Ver mÃ¡s especificaciones",x?a.jsx(cs,{className:"w-4 h-4"}):a.jsx(is,{className:"w-4 h-4"})]})]})}),a.jsx(r.div,{variants:t,className:"flex flex-col mt-4 lg:mt-0",children:a.jsxs(r.button,{onClick:as,className:"w-full flex gap-4 items-center justify-center font-paragraph text-base 2xl:text-lg bg-primary text-white py-3 font-semibold rounded-3xl hover:opacity-90 transition-all duration-300 mt-3",whileHover:{scale:1.02},whileTap:{scale:.98},children:["Crea y edita tu regalo",a.jsx(ds,{width:20})]})}),a.jsx(r.div,{variants:t,className:"w-full mt-5",children:a.jsxs(r.div,{className:"bg-[#F7F9FB] flex flex-row rounded-xl p-5 gap-3",whileHover:{y:-2},children:[a.jsx("img",{src:"/assets/img/salafabulosa/whatsapp.png",onError:e=>e.target.src="assets/img/noimage/no_imagen_circular.png",className:"w-12 h-12 object-contain",loading:"lazy"}),a.jsx("div",{className:"customtext-neutral-dark cursor-pointer font-font-general text-base 2xl:text-xl font-semibold",children:a.jsxs("p",{children:["Â¿Tienes dudas sobre este producto? Haz"," ",a.jsx("a",{className:"underline",onClick:M,children:"clic aquÃ­"})," ","y chatea con nosotros por WhatsApp"]})})]})})]})]})}),a.jsxs(r.div,{variants:t,className:"grid gap-10 lg:gap-20 md:grid-cols-2 bg-white rounded-xl py-8 font-font-general",children:[(($=s==null?void 0:s.specifications)==null?void 0:$.length)>0&&a.jsxs(r.div,{variants:t,children:[a.jsx("h2",{className:"text-2xl font-bold customtext-neutral-dark mb-4 border-b pb-3",children:"Especificaciones"}),a.jsx("div",{className:"space-y-1",children:s.specifications.map((e,o)=>e.type==="general"&&a.jsxs(r.div,{className:`grid grid-cols-2 gap-4 p-4 ${o%2===0?"bg-sections-color":"bg-white"}`,whileHover:{x:5},children:[a.jsx("div",{className:"customtext-neutral-light opacity-85",children:e.title}),a.jsx("div",{className:"customtext-neutral-dark",children:e.description})]},o))})]}),a.jsxs(r.div,{variants:t,className:"font-font-general",children:[((S=s==null?void 0:s.description)==null?void 0:S.replace(/<[^>]+>/g,""))&&a.jsx("h2",{className:"text-2xl font-bold customtext-neutral-dark mb-4 border-b pb-3",children:"InformaciÃ³n adicional"}),a.jsxs(r.div,{className:`space-y-2 ${D?"":"max-h-[400px] overflow-hidden"}`,children:[((_=s==null?void 0:s.description)==null?void 0:_.replace(/<[^>]+>/g,""))&&a.jsxs(a.Fragment,{children:[a.jsx("h3",{className:"text-xl font-semibold customtext-neutral-dark mb-4",children:"Acerca de este artÃ­culo"}),a.jsx(r.div,{className:"customtext-neutral-dark",dangerouslySetInnerHTML:{__html:s==null?void 0:s.description},initial:{opacity:0},animate:{opacity:1},transition:{duration:.5}})]}),((T=s==null?void 0:s.features)==null?void 0:T.length)>0&&a.jsx(r.div,{className:"pl-10",variants:g,children:a.jsx("ul",{className:"list-disc pl-5 space-y-2",children:s==null?void 0:s.features.map((e,o)=>a.jsx(r.li,{className:"customtext-neutral-dark",variants:t,children:e.feature},o))})})]})]})]}),a.jsx(ts,{cart:i,setCart:b,modalOpen:U,setModalOpen:V})]}),y.length>0&&a.jsx(r.div,{className:"my-10",initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},children:a.jsx(ns,{data:{title:"Productos relacionados",link_catalog:"/catalogo"},items:y,cart:i,setCart:b,favorites:m,setFavorites:R})})]})}export{ha as default};
